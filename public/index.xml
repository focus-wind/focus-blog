<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>北溪入江流</title>
        <link>/</link>
        <description>Recent content on 北溪入江流</description>
        <generator>Hugo -- gohugo.io</generator>
        <lastBuildDate>Wed, 01 Feb 2023 00:00:00 +0000</lastBuildDate><atom:link href="/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Git配置SSH公钥</title>
        <link>/post/version_management_git/git%E9%85%8D%E7%BD%AEssh%E5%85%AC%E9%92%A5/</link>
        <pubDate>Wed, 01 Feb 2023 00:00:00 +0000</pubDate>
        
        <guid>/post/version_management_git/git%E9%85%8D%E7%BD%AEssh%E5%85%AC%E9%92%A5/</guid>
        <description>&lt;h1 id=&#34;生成添加ssh公匙&#34;&gt;生成添加ssh公匙&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;在GitBash界面按照如下命令生成公匙&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ssh-keygen -t rsa -C &lt;span class=&#34;s2&#34;&gt;&amp;#34;xxxxx@xxxxx.com&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-t&lt;/code&gt;： Type，指定要创建密钥的类型
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rsa&lt;/code&gt;：通过rsa加密算法生成的密钥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dsa&lt;/code&gt;：通过dsa加密算法生成的密钥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ecdsa&lt;/code&gt;：通过带椭圆曲线的dsa加密算法生成的密钥&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-C&lt;/code&gt;：Commit，更改密钥文件的注释&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;注意:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;这里的 &lt;a class=&#34;link&#34; href=&#34;mailto:xxxxx@xxxxx.com&#34; &gt;xxxxx@xxxxx.com&lt;/a&gt; 只是生成的 sshkey 的注释名称，并不约束或要求具体命名为某个邮箱。&lt;/li&gt;
&lt;li&gt;现网的大部分教程均讲解的使用邮箱生成，其一开始的初衷仅仅是为了便于辨识所以使用了邮箱。&lt;/li&gt;
&lt;li&gt;根据项目组规范要求，使用个人邮箱命名sshkey的名称。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;按照提示完成三次回车，即可生成 ssh key。&lt;/li&gt;
&lt;li&gt;通过查看 ~/.ssh/id_rsa.pub文件内容，获取到你的 public key。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;~/：当前用户文件夹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Linux：/home/{userName}&lt;/li&gt;
&lt;li&gt;Windows：C:\Users{userName}&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;复制id_rsa.pub文件中中生成的sshkey&lt;/li&gt;
&lt;li&gt;在Git仓库的[ssh公匙]页面添加sshkey&lt;/li&gt;
&lt;li&gt;将复制的sshkey添加到公匙输入框中，设置标题，确定即可添加公匙&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;验证ssh公匙&#34;&gt;验证ssh公匙&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;打开 shell 界面&lt;/li&gt;
&lt;li&gt;输入&lt;code&gt;ssh -T git@gitee.com&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;首次使用需要确认并添加主机到本机SSH可信列表。若返回 Hi XXX! You&amp;rsquo;ve successfully authenticated, but Gitee.com does not provide shell access. 内容，则证明添加成功。&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        </item>
        <item>
        <title>Hugo博客教程（一）</title>
        <link>/post/blog/hugo/hugo%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B%E4%B8%80/</link>
        <pubDate>Wed, 01 Feb 2023 00:00:00 +0000</pubDate>
        
        <guid>/post/blog/hugo/hugo%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B%E4%B8%80/</guid>
        <description>&lt;h1 id=&#34;hugo博客教程一&#34;&gt;Hugo博客教程（一）&lt;/h1&gt;
&lt;h2 id=&#34;博客&#34;&gt;博客&lt;/h2&gt;
&lt;h3 id=&#34;静态博客&#34;&gt;静态博客&lt;/h3&gt;
&lt;p&gt;        静态博客是指利用生成工具（如：Hugo、Hexo）等将博文编译成静态文件的一种博客系统。博主只需要将生成文件部署在静态服务器上即可被互联网访问，在访问时，直接获取静态资源，不需要向数据库中请求博文、图片等信息。&lt;/p&gt;
&lt;h4 id=&#34;静态博客的优缺点&#34;&gt;静态博客的优缺点&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;优点&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;速度快：用户在访问博客时，只需要获取静态资源，不需要向服务器查询博文、图片等信息。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;部署方便、成本低：市面上有许多免费开源的托管程序，不需要承担高昂的服务器费用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;维护方便：服务器维护成本低。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;迁移方便：无数据库系统，迁移时，不需要专门进行数据库迁移操作，只需保存原始博文即可。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安全：无需担心数据库注入、跨站攻击等网络安全问题。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;缺点&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;不支持原生注册登录、原生评论，需要使用第三方评论工具。第三方评论工具的安全性和速度质疑。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;入门难度大，不易上手。静态博客的内容管理和操作都有一定的难度，需要一定的编程基础。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;常见的静态博客&#34;&gt;常见的静态博客&lt;/h4&gt;
&lt;h5 id=&#34;hexo&#34;&gt;Hexo&lt;/h5&gt;
&lt;p&gt;        基于Node.js的静态网站生成器，近几年（截止到2023年）的发展不如以前那么好，主题多，教程多，官方文档丰富，可以很快的搭建出漂亮的博客页面。由于其基于Node.js的特点，当博客数量增多时，渲染时间长。&lt;/p&gt;
&lt;p&gt;        所以Hexo适用于博客数量少，更新周期长的博主。&lt;/p&gt;
&lt;h5 id=&#34;hugo&#34;&gt;Hugo&lt;/h5&gt;
&lt;p&gt;        Hugo是一个基于Go语言开发的静态网站生成器，Hugo的突出特点是简洁、灵活、高效。近几年（截止到2023年）发展迅速，越来越多的网站开始使用Hugo搭建。相比于Hexo，其渲染速度快，配置简单。但是其主题相比于Hexo较少。&lt;/p&gt;
&lt;p&gt;        Hugo适合于博客数量多，更新周期短的博主。&lt;/p&gt;
&lt;h3 id=&#34;动态博客&#34;&gt;动态博客&lt;/h3&gt;
&lt;p&gt;    动态博客是指当服务器收到访问请求时，会结合数据库，调用相应的程序，动态生成需要传回的页面文件。动态博客相比于静态博客最大的区别在于其需要数据库的参与。&lt;/p&gt;
&lt;h4 id=&#34;动态博客的优缺点&#34;&gt;动态博客的优缺点&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;优点&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;网页动态生成，对于不同用户，不同时间的访问展现不同的页面内容。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;功能强大：动态博客相比于静态博客的功能更加强大。比如对数据库的支持、注册登录、访问量统计、原生评论的支持。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;交互性强：因为其支持原生评论和访问量统计的特点，相比于静态博客具有更好的交互性。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;缺点&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;浪费系统资源：因为其与数据库交互的，所以相比于静态博客更消耗系统资源，浏览速度慢。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;易遭受攻击：因为动态博客需要支持数据库，还有后端代码，所以更易受到数据库注入和跨站攻击等威胁。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;维护迁移困难：相比于静态博客只需要保存静态资源，动态博客的迁移不仅需要重新部署博客，还需要迁移数据库，修改配置等操作，在迁移中容易出现操作失误导致迁移失败重新迁移。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;成本高：需要独立的服务器部署博客网站。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;常见的动态博客&#34;&gt;常见的动态博客&lt;/h4&gt;
&lt;h5 id=&#34;wordpress&#34;&gt;WordPress&lt;/h5&gt;
&lt;p&gt;        全球最著名的博客网站，并逐步演化为内容管理系统软件。拥有世界上最强大的插件和模板。功能强大、扩展性强。缺点是插件和模板对于国内的支持不好，国内访问速度缓慢。&lt;/p&gt;
&lt;h5 id=&#34;typecho&#34;&gt;Typecho&lt;/h5&gt;
&lt;p&gt;        国内开源的一个动态博客平台，相比于WordPress更加轻巧、快速。原生默认采用MarkDown编辑器，相比于WordPress的编辑器更加高效。&lt;/p&gt;
&lt;h3 id=&#34;为什么选择静态博客&#34;&gt;为什么选择静态博客&lt;/h3&gt;
&lt;p&gt;        静态博客和动态博客相比各有优劣，但是相比较而言，搭建个人博客，最方便、成本最低、体验最好的就是静态博客。相比于动态博客需要的服务器部署，目前有很多平台支持免费的静态博客部署，成本更低，有需要的只需要买一个域名即可支持每年搭建个人博客所需要的金钱耗费。随着个人博客的发展，静态博客也是目前的趋势所在。&lt;/p&gt;
&lt;p&gt;        当然动态博客也有自己的优势，动态博客的功能性、互操性更强，而且动态博客需要部署在服务器上，有自己的一台服务器可以干很多事情，不仅是搭建个人博客，甚至可以搭建自己的云盘、图库、邮件系统、甚至是通过服务器来学习相关的Linux操作系统知识。&lt;/p&gt;
&lt;p&gt;        在众多静态博客中，Hugo不是最流行的，但却是未来的静态博客的趋势所在。相比于Hexo的需要安装Node.js，Hugo基于Go打包的二进制文件，只需要把文件下载下来并添加到环境变量中即可使用，且Hugo的渲染速度相比于Hexo更快，更适合有长期写博客人的需求。&lt;/p&gt;
&lt;h2 id=&#34;hugo的安装与配置&#34;&gt;Hugo的安装与配置&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.gohugo.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Hugo中文文档 (gohugo.org)&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://gohugo.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Hugo官方官网(gohugo.io)&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/gohugoio/hugo/releases&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Hugo安装包下载地址：Releases · gohugoio/hugo (github.com)&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在下载Hugo安装包时，有Hugo和Hugo-extended两种可运行文件下载，其中Hugo仅支持JS，Hugo-extended是Hugo的扩展版本，在支持JS的基础上还支持TS，所以在下载时建议下载Hugo-extended版本的可执行文件。&lt;/p&gt;
&lt;h3 id=&#34;windows系统的安装与配置&#34;&gt;Windows系统的安装与配置&lt;/h3&gt;
&lt;p&gt;        在&lt;a class=&#34;link&#34; href=&#34;https://github.com/gohugoio/hugo/releases&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Hugo安装包下载地址：Releases · gohugoio/hugo (github.com)&lt;/a&gt;下载好Hugo.exe文件后，将Hugo.exe文件放在想要存放的位置即可，比如我这里放在&lt;code&gt;D:\Blog\Hugo&lt;/code&gt;文件夹下面，此时在该文件夹下面打开cmd命令提示符即可运行Hugo的相关命令，运行命令Hugo命令实际上就是在调用Hugo.exe文件。&lt;/p&gt;
&lt;h4 id=&#34;windows环境变量配置&#34;&gt;Windows环境变量配置&lt;/h4&gt;
&lt;p&gt;        此电脑 &amp;ndash; 属性 &amp;ndash; 高级系统设置 &amp;ndash; 高级 &amp;ndash;环境变量 &amp;ndash; Path&lt;/p&gt;
&lt;p&gt;        在Windows的系统环境变量配置中，添加存放Hugo.exe文件的文件夹，确定之后即可在其他任意地方运行Hugo命令而不是仅在安装位置运行。&lt;/p&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./Windows下Hugo环境变量配置.png&#34; title=&#34;&#34; alt=&#34;Windows下Hugo环境变量配置&#34;&gt;
&lt;/div&gt;
&lt;h3 id=&#34;linux系统的安装与配置&#34;&gt;Linux系统的安装与配置&lt;/h3&gt;
&lt;p&gt;        Hugo在Linux上的安装与配置和Windows类似。首先wget下载指定的Hugo压缩文件（tar.gz文件一般是Linux系统的压缩文件），以v0.110.0版本为例：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 下载指定版本的Hugo文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget https://github.com/gohugoio/hugo/releases/download/v0.110.0/hugo_extended_0.110.0_linux-amd64.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 解压tar.gz压缩文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tar -zxvf hugo_extended_0.110.0_linux-amd64.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;        解压后，使用&lt;code&gt;mv&lt;/code&gt;命令将可执行文件移动到想要存放的路径。&lt;/p&gt;
&lt;h4 id=&#34;linux环境变量配置&#34;&gt;Linux环境变量配置&lt;/h4&gt;
&lt;p&gt;        Linux修改本用户的环境变量一般需要修改用户目录下的bashrc文件即&lt;code&gt;~/.bashrc&lt;/code&gt;文件，在文件中加入&lt;code&gt;export PATH=$PATH:{PATH}&lt;/code&gt;即可，修改后的文件不会立即生效，需要使用&lt;code&gt;source ~/.bashrc&lt;/code&gt;命令重新加载bashrc文件即可完成环境变量配置。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 打开~/.bashrc文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vim ~/.bashrc
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 在bashrc文件中加入环境变量配置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 在修改bashrc文件时注意添加注释，避免之后找不到相关配置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# /home/user/blog/Hugo是我存放Hugo文件的目录，在配置时根据自己的情况按需修改&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;PATH&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$PATH&lt;/span&gt;:/home/user/blog/Hugo
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 保存修改，退出后在shell界面重新加载bashrc文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt; ~/.bashrc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;安装检查&#34;&gt;安装检查&lt;/h3&gt;
&lt;p&gt;        在配置好环境变量后，在cmd或者shell（尽量不要在可执行文件存放的位置中）中运行Hugo命令检查是否安装成功，一般而言使用version查看是否安装成功。&lt;/p&gt;
&lt;p&gt;在cmd和shell中执行：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;hugo version
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;成功示例：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;hugo v0.110.0-e32a493b7826d02763c3b79623952e625402b168+extended windows/amd64 &lt;span class=&#34;nv&#34;&gt;BuildDate&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;2023-01-17T12:16:09Z &lt;span class=&#34;nv&#34;&gt;VendorInfo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gohugoio
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>关于</title>
        <link>/about/</link>
        <pubDate>Mon, 09 Jan 2023 00:00:00 +0000</pubDate>
        
        <guid>/about/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;自述&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;状况：00后，XAUT大四即将毕业生&lt;/li&gt;
&lt;li&gt;专业：IOT&lt;/li&gt;
&lt;li&gt;职业规划：网络安全、人工智能（不求甚解，我想未来每一个学习技术都应该会一点人工智能吧）&lt;/li&gt;
&lt;li&gt;爱好：河图，古风音乐，假面骑士&lt;/li&gt;
&lt;li&gt;Sign：我见青山多妩媚，料青山见我应如是。| Follow One Cause Until Success.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;博客经历&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;2020.2：第一次使用WordPress搭建博客&lt;/li&gt;
&lt;li&gt;2021.4：长时间停更博客，因项目原因，关停博客网站&lt;/li&gt;
&lt;li&gt;2021.7：使用Typecho重新搭建博客网站&lt;/li&gt;
&lt;li&gt;2022.2：原服务器到期，使用Hexo重新搭建博客网站&lt;/li&gt;
&lt;li&gt;2022.3：转回Typecho，迁移博客&lt;/li&gt;
&lt;li&gt;2023.1：服务器到期，转为使用成本更低，更方便的静态博客Hugo&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>归档</title>
        <link>/archives/</link>
        <pubDate>Mon, 09 Jan 2023 00:00:00 +0000</pubDate>
        
        <guid>/archives/</guid>
        <description></description>
        </item>
        <item>
        <title>友链</title>
        <link>/links/</link>
        <pubDate>Mon, 09 Jan 2023 00:00:00 +0000</pubDate>
        
        <guid>/links/</guid>
        <description>&lt;h1 id=&#34;莫愁前路无知己天下谁人不识君&#34;&gt;莫愁前路无知己，天下谁人不识君&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;申请友链格式（评论区或向邮箱focus-wind@foxmail.com发信）：
如果你想成为博主的友链，请将博主的链接信息添加到你的友链当中&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;博客名：北溪入江流&lt;/li&gt;
&lt;li&gt;博客描述：我见青山多妩媚，料青山见我应如是。&lt;/li&gt;
&lt;li&gt;博客地址：https://focus-wind.com/&lt;/li&gt;
&lt;li&gt;博客头像：http://focus-wind.com/&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Git分支管理</title>
        <link>/post/version_management_git/git%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86/</link>
        <pubDate>Sun, 01 Jan 2023 00:00:00 +0000</pubDate>
        
        <guid>/post/version_management_git/git%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86/</guid>
        <description>&lt;h1 id=&#34;git分支管理&#34;&gt;Git分支管理&lt;/h1&gt;
&lt;p&gt;Git常用分支包括： &lt;strong&gt;master&lt;/strong&gt;，&lt;strong&gt;hotfix&lt;/strong&gt;，&lt;strong&gt;bugfix&lt;/strong&gt;，&lt;strong&gt;release&lt;/strong&gt;，&lt;strong&gt;develop&lt;/strong&gt;，&lt;strong&gt;feature&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/post/version_management_git/git%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86/git_branch.png&#34;
	width=&#34;1988&#34;
	height=&#34;1236&#34;
	srcset=&#34;/post/version_management_git/git%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86/git_branch_hua82e18d67f008e7d173910039aa56555_172643_480x0_resize_box_3.png 480w, /post/version_management_git/git%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86/git_branch_hua82e18d67f008e7d173910039aa56555_172643_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Git分支图.png&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;160&#34;
		data-flex-basis=&#34;386px&#34;
	
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;master&lt;/strong&gt;：项目主分支，有且仅有一个，除项目负责人外其他开发人员不得向 master 分支合并内容。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;hotfix&lt;/strong&gt;：紧急线上 bug 修复分支，紧急即需要立刻尽快去处理发布上线（自 master 拉取）, 直接进行测试及上线。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;bugfix&lt;/strong&gt;：非紧急上线的 bug 修复分支, 如非当天上线即使用 bugfix 进行命名（自 master 拉取） , 直接进行测试及上线。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;release&lt;/strong&gt;：作为提测及上线分支，release是发布正式版本之前（即合并到 master 分支之前），需要有一个预发布的版本进行测试。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;develop&lt;/strong&gt;：主开发分支，存有确定性的所有功能（上线和未上线）, 作为开发环境共有的部署分支。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;feature&lt;/strong&gt;：功能开发分支，feature 是为了开发后续版本的功能，从 develop 分支拉取出来的。开发完成稳定后，要再并入 develop 分支。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1 id=&#34;分支命名&#34;&gt;分支命名&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;hotfix&lt;/strong&gt;：hotfix/{功能}，如 hotfix/providerLose。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;bugfix&lt;/strong&gt;：bugfix/{功能}_年月日，如 bugfix/pubMsg_20210701。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;release&lt;/strong&gt;：release/{功能}_年月日，如 release/pubMsg_20210701。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;feature&lt;/strong&gt;：feature/{功能}_年月日，如 feature/pubMsg_20210701。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1 id=&#34;分支管理&#34;&gt;分支管理&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;上线完成之后, 提交申请进行master的合并处理, 打 Tag 维护（审核人员 / Leader）&lt;/li&gt;
&lt;li&gt;相关分支创建人, 删除对应上线功能 feature / release / bugfix 分支&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1 id=&#34;git代码提交规约推荐&#34;&gt;Git代码提交规约（推荐）&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;设置用户名为本人姓名，邮箱为公司邮箱或本人邮箱。&lt;/li&gt;
&lt;li&gt;代码提交规则：
&lt;ol&gt;
&lt;li&gt;提交的说明包含两部分：动作类型:简要说明，以英文的“:”作为区分。&lt;/li&gt;
&lt;li&gt;动作类型使用英文大写。&lt;/li&gt;
&lt;li&gt;理论上一次提交仅包含一个功能修改，如功能过大，需要注明功能的完成进度。若一次提交有多个功能修改，则每个功能提交描述作为单独的一行，每行以英文标识符“,”作为行尾结束符。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;动作&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;th&gt;示例&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ADD&lt;/td&gt;
&lt;td&gt;新加功能，文件&lt;/td&gt;
&lt;td&gt;ADD:增加文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DEL&lt;/td&gt;
&lt;td&gt;删除功能，文件&lt;/td&gt;
&lt;td&gt;DEL:删除文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MOD&lt;/td&gt;
&lt;td&gt;修改功能&lt;/td&gt;
&lt;td&gt;MOD:修改功能&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FIX&lt;/td&gt;
&lt;td&gt;修复问题&lt;/td&gt;
&lt;td&gt;FIX:修复问题&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PREF&lt;/td&gt;
&lt;td&gt;优化功能，提升性能，体验&lt;/td&gt;
&lt;td&gt;PREF:优化功能&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STYLE&lt;/td&gt;
&lt;td&gt;修改代码格式（不影响代码运行的变动）&lt;/td&gt;
&lt;td&gt;STYLE:修改代码格式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;REFACTOR&lt;/td&gt;
&lt;td&gt;重构（既不增加新功能，也不修改bug的代码变动，一般重构需要使用新的独立分支处理）&lt;/td&gt;
&lt;td&gt;REFACTOR:重构代码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DOCS&lt;/td&gt;
&lt;td&gt;文档&lt;/td&gt;
&lt;td&gt;DOCS:文档&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h1 id=&#34;代码提交流程&#34;&gt;代码提交流程&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;代码修改完成后，需先进行编码规范检查，注释检查，单元测试等操作。&lt;/li&gt;
&lt;li&gt;测试通过后提交到本地，检查提交文件是否正确，有无遗漏文件，添加相关说明。&lt;/li&gt;
&lt;li&gt;拉取服务器的代码，检查代码合并结果，若有冲突则找相关人员解决冲突。解决冲突后，重新编译测试代码，测试成功后提交本地代码。&lt;/li&gt;
&lt;li&gt;推送代码到服务器。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>Git初始化配置</title>
        <link>/post/version_management_git/git%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE/</link>
        <pubDate>Thu, 01 Dec 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/version_management_git/git%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE/</guid>
        <description>&lt;h1 id=&#34;git配置&#34;&gt;Git配置&lt;/h1&gt;
&lt;p&gt;Git 提供了一个叫做 git config 的工具，专门用来配置或读取相应的工作环境变量。
这些环境变量，决定了 Git 在各个环节的具体工作方式和行为。这些变量具体配置在以下三个不同的地方：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;git/etc/gitconfig&lt;/code&gt; 文件：系统中对所有用户都普遍适用的配置。若使用 &lt;code&gt;git config&lt;/code&gt; 时用 &lt;code&gt;--system&lt;/code&gt; 选项，读写的就是这个文件。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;~/.gitconfig&lt;/code&gt; 文件：用户目录下的配置文件只适用于该用户。若使用 &lt;code&gt;git config&lt;/code&gt; 时用 &lt;code&gt;--global&lt;/code&gt; 选项，读写的就是这个文件。&lt;/li&gt;
&lt;li&gt;当前项目的 Git 目录中的配置文件（也就是工作目录中的 &lt;code&gt;.git/config&lt;/code&gt; 文件）：这里的配置仅仅针对当前项目有效。每一个级别的配置都会覆盖上层的相同配置，所以 &lt;code&gt;.git/config&lt;/code&gt; 里的配置会覆盖 &lt;code&gt;/etc/gitconfig&lt;/code&gt; 中的同名变量。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;配置用户信息&#34;&gt;配置用户信息&lt;/h1&gt;
&lt;p&gt;配置个人的用户名称和电子邮件地址：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git config --global user.name &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$userName&lt;/span&gt;$&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git config --global user.email &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$userEmail&lt;/span&gt;$&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果使用 &lt;code&gt;--global&lt;/code&gt; 选项，那么就会更改用户主目录下的配置文件，以后所有的项目都会默认使用这里配置的用户信息。
如果要在某个特定的项目中使用其他名字或者邮箱，只要去掉 &lt;code&gt;--global&lt;/code&gt; 选项重新配置即可，新的设定保存在当前项目的 &lt;code&gt;.git/config&lt;/code&gt; 文件里。&lt;/p&gt;
&lt;h1 id=&#34;查看配置信息&#34;&gt;查看配置信息&lt;/h1&gt;
&lt;p&gt;使用 &lt;code&gt;git config --list&lt;/code&gt; 命令可以查看当前用户的个人配置信息，若看到重复变量名，则说明它们位于不同的配置文件中。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>计算机视觉实验：边缘提取与特征检测</title>
        <link>/post/opencv/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E5%AE%9E%E9%AA%8C%E8%BE%B9%E7%BC%98%E6%8F%90%E5%8F%96%E4%B8%8E%E7%89%B9%E5%BE%81%E6%A3%80%E6%B5%8B/</link>
        <pubDate>Wed, 16 Nov 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/opencv/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E5%AE%9E%E9%AA%8C%E8%BE%B9%E7%BC%98%E6%8F%90%E5%8F%96%E4%B8%8E%E7%89%B9%E5%BE%81%E6%A3%80%E6%B5%8B/</guid>
        <description>&lt;h1 id=&#34;一实验内容&#34;&gt;一：实验内容&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;掌握python进行图像处理、了解opencv-python库的使用&lt;/li&gt;
&lt;li&gt;基于robert、prewitt、sobel算子完成图像边缘提取&lt;/li&gt;
&lt;li&gt;了解SUSAN、Harris、SIFT算子的特征检测&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;二实验过程&#34;&gt;二：实验过程&lt;/h1&gt;
&lt;h2 id=&#34;一边缘提取&#34;&gt;（一）边缘提取&lt;/h2&gt;
&lt;h3 id=&#34;1卷积算子&#34;&gt;（1）卷积算子&lt;/h3&gt;
&lt;h4 id=&#34;arobert交叉算子&#34;&gt;a：robert交叉算子&lt;/h4&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./robert交叉算子.png&#34; title=&#34;&#34; alt=&#34;robert交叉算子&#34;&gt;
&lt;/div&gt;
&lt;h4 id=&#34;bprewitt算子&#34;&gt;b：prewitt算子&lt;/h4&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./prewitt算子.png&#34; title=&#34;&#34; alt=&#34;prewitt算子&#34;&gt;
&lt;/div&gt;
&lt;h4 id=&#34;csobel算子&#34;&gt;c：sobel算子&lt;/h4&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./sobel算子.png&#34; title=&#34;&#34; alt=&#34;sobel算子&#34;&gt;
&lt;/div&gt;
&lt;h4 id=&#34;dlaplacian算子&#34;&gt;d：laplacian算子&lt;/h4&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./laplacian算子.png&#34; title=&#34;&#34; alt=&#34;laplacian算子&#34;&gt;
&lt;/div&gt;
&lt;h3 id=&#34;2实验代码&#34;&gt;（2）实验代码&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;cv2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_edge_extraction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ndarray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;robert&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    边缘提取
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :param img: 需要进行边缘提取的图，COLOR：BGR
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :param kernel_method: 边缘提取算子名称，全小写
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :return: x方向（0.5x）和y方向（0.5y）边缘提取的加权和
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 转换为灰度图&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;gray&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cvtColor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;COLOR_BGR2GRAY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 边缘提取算子&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;robert&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;kernel_x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;kernel_y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;prewitt&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;kernel_x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;kernel_y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;sobel&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;kernel_x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;kernel_y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;laplacian&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;kernel_x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;kernel_y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;kernel_x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;kernel_y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 进行边缘提取&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;filter_x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filter2D&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ddepth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kernel_x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;filter_y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filter2D&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ddepth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kernel_y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# x方向和y方向加权&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;img_add_weight&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addWeighted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filter_x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img_add_weight&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;image_show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ndarray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;img&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    显示图片
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :param img:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :param title:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :return:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;namedWindow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imshow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;waitKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;edge_extraction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;robert&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 读取图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imdecode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fromfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IMREAD_COLOR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 边缘提取&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;img_extraction&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_edge_extraction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 显示图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;image_show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img_extraction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;二特征点检测&#34;&gt;（二）特征点检测&lt;/h2&gt;
&lt;h3 id=&#34;1实验代码&#34;&gt;（1）实验代码&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;  1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 90
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 91
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 92
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 93
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 94
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 95
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 96
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 97
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 98
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 99
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;100
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;101
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;102
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;103
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;104
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;105
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;106
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;107
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;108
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;109
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;110
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;111
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;112
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;113
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;114
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;cv2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;feature_point_detection_susan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ndarray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    susan特征点检测
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :param img:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :return:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# susan算子&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ones&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;astype&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 检测阈值&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;threshold&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;37&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 像素偏差阈值&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# ir：中心位置像素，ir0周边位置像素&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 获取矩形区域&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;ir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 使用susan算子截取圆形区域&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;ir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;susan_operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;ir0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 平滑曲线相似变换：c = e的[-((ir - ir0)/6))的6次方]的次方，表示相似还是不相似&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;similarity&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ir0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 小于阈值，提取特征点&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;similarity&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;threshold&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;feature_point_detection_harris&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ndarray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    harris特征点检测
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :param img:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :return:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 转换为灰度图&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;gray&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cvtColor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;COLOR_BGR2GRAY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# Harris特征点检测&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 检测窗口大小&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;block_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# Sobel的卷积核&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;k_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 权重系数&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.04&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cornerHarris&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;block_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;k_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 在原图上绘制关键点&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.01&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;feature_point_detection_sift&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ndarray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    sift特征点检测
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :param img:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :return:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 转换为灰度图&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;gray&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cvtColor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;COLOR_BGR2GRAY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 创建SIFT对象&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;sift&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SIFT_create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# SIFT关键点检测&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;kernel_point&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sift&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;detect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 在原图绘制关键点&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;drawKeypoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;image_show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ndarray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;img&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    显示图片
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :param img:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :param title:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :return:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;namedWindow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imshow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;waitKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;feature_point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;susan&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 读取图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imdecode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fromfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IMREAD_COLOR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 特征检测&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;susan&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;img_feature_point&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;feature_point_detection_susan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;harris&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;img_feature_point&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;feature_point_detection_harris&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;sift&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;img_feature_point&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;feature_point_detection_sift&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;img_feature_point&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;feature_point_detection_susan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 显示图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;image_show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img_feature_point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;三实验结果及分析&#34;&gt;三：实验结果及分析&lt;/h1&gt;
&lt;h2 id=&#34;一边缘提取-1&#34;&gt;（一）边缘提取&lt;/h2&gt;
&lt;h3 id=&#34;1实验原图&#34;&gt;（1）实验原图&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./image.jpeg&#34; title=&#34;&#34; alt=&#34;image&#34;&gt;
&lt;/div&gt;
&lt;h3 id=&#34;2robert算子&#34;&gt;（2）robert算子&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./robert交叉算子实验结果.png&#34; title=&#34;&#34; alt=&#34;robert交叉算子实验结果&#34;&gt;
&lt;/div&gt;
提取时间：0.0020003318786621094
&lt;h3 id=&#34;3prewitt算子&#34;&gt;（3）prewitt算子&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./prewitt算子实验结果.png&#34; title=&#34;&#34; alt=&#34;prewitt算子实验结果&#34;&gt;
&lt;/div&gt;
提取时间：0.0010013580322265625
&lt;h3 id=&#34;3sobel算子&#34;&gt;（3）sobel算子&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./sobel算子实验结果.png&#34; title=&#34;&#34; alt=&#34;sobel算子实验结果&#34;&gt;
&lt;/div&gt;
提取时间：0.002001523971557617
&lt;h3 id=&#34;4laplacian算子&#34;&gt;（4）laplacian算子&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./laplacian算子实验结果.png&#34; title=&#34;&#34; alt=&#34;laplacian算子实验结果&#34;&gt;
&lt;/div&gt;
提取时间：0.001997232437133789
&lt;h3 id=&#34;5综合对比&#34;&gt;（5）综合对比&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./特征检测综合对比图.png&#34; title=&#34;&#34; alt=&#34;特征检测综合对比图&#34;&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;robert提取时间：0.0020003318786621094&lt;/li&gt;
&lt;li&gt;prewitt提取时间：0.0010013580322265625&lt;/li&gt;
&lt;li&gt;sobel提取时间：0.002001523971557617&lt;/li&gt;
&lt;li&gt;laplacian提取时间：0.001997232437133789&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过上图可以看出，laplacian二阶算子的边缘提取算子的提取效果明显优于robert，prewitt，sobel等一阶算子。且一阶算子和二阶算子在提取的时间上和算法的复杂度上相差不大，所以在实验中，如果有特征提取需求的话，可以尽量多采用二阶算子进行边缘提取。&lt;/p&gt;
&lt;h2 id=&#34;二特征点检测-1&#34;&gt;（二）特征点检测&lt;/h2&gt;
&lt;h3 id=&#34;1实验原图-1&#34;&gt;（1）实验原图&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./chess.png&#34; title=&#34;&#34; alt=&#34;实验原图&#34;&gt;
&lt;/div&gt;
&lt;h3 id=&#34;2susan特征点检测&#34;&gt;（2）susan特征点检测&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./susan.png&#34; title=&#34;&#34; alt=&#34;susan特征点检测&#34;&gt;
&lt;/div&gt;
&lt;h3 id=&#34;3harris特征点检测&#34;&gt;（3）harris特征点检测&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./harris.png&#34; title=&#34;&#34; alt=&#34;harris特征点检测&#34;&gt;
&lt;/div&gt;
&lt;h3 id=&#34;4sift特征点检测&#34;&gt;（4）sift特征点检测&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./sift.png&#34; title=&#34;&#34; alt=&#34;sift特征点检测&#34;&gt;
&lt;/div&gt;
&lt;h3 id=&#34;5综合对比-1&#34;&gt;（5）综合对比&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./特征点检测综合对比.png&#34; title=&#34;&#34; alt=&#34;特征点检测综合对比&#34;&gt;
&lt;/div&gt;
&lt;p&gt;在实验中，因为opencv不提供（或本人没有找到）有关susan的特征点检测的函数，所以susan特征点检测是自己写的，相比于其他特征点检测直接调用底层库较慢。在三个检测图片中，可以发现sift特征点检测检测到的特征点更多，其他检测是边缘特征点，二sift不仅检测了边缘特征点，也检测出了中心特征点。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>应用层</title>
        <link>/post/network/%E5%BA%94%E7%94%A8%E5%B1%82/</link>
        <pubDate>Sat, 15 Oct 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/network/%E5%BA%94%E7%94%A8%E5%B1%82/</guid>
        <description>&lt;h1 id=&#34;网络应用模型&#34;&gt;网络应用模型&lt;/h1&gt;
&lt;h2 id=&#34;客户服务器模型cs&#34;&gt;客户/服务器模型（C/S）&lt;/h2&gt;
&lt;p&gt;在客户/服务器模型（Client/Server，C/S）中，总是有一个打开的主机称为&lt;strong&gt;服务器&lt;/strong&gt;，它服务于许多来自其他称为&lt;strong&gt;客户机&lt;/strong&gt;的请求。
在客户/服务器模型中，客户程序必须知道服务器程序的地址，服务器需要运行同时处理多个远程或本地客户的请求。服务器系统启动后就一直自动调用并一直不断地运行，被动等待客户的请求，服务器程序不需要知道客户程序的地址。&lt;/p&gt;
&lt;h3 id=&#34;客户服务器模型的工作流程&#34;&gt;客户/服务器模型的工作流程&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;服务器处于接收请求的状态&lt;/li&gt;
&lt;li&gt;客户机发出服务请求，等待接收结果&lt;/li&gt;
&lt;li&gt;服务器收到请求后，分析请求，进行处理，并将结果发送给客户机&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;客户服务器模型的主要特点&#34;&gt;客户/服务器模型的主要特点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;网络中的计算机地位不平，服务器可以通过对用户权限的限制达到管理客户机的目的，使它们不能随意存储/删除数据，或进行其他受限的网络活动。整个网络的管理工作由少数服务器担当，网络的管理非常集中方便&lt;/li&gt;
&lt;li&gt;客户机之间不直接通信&lt;/li&gt;
&lt;li&gt;可扩展性不佳。受服务器硬件和带宽的限制，服务器支持的客户机数量有限&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;客户服务器模型常见应用&#34;&gt;客户/服务器模型常见应用&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Web&lt;/li&gt;
&lt;li&gt;文件传输协议FTP&lt;/li&gt;
&lt;li&gt;远程登陆&lt;/li&gt;
&lt;li&gt;电子邮件&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;浏览器服务器模型bs&#34;&gt;浏览器/服务器模型（B/S）&lt;/h2&gt;
&lt;p&gt;浏览器/服务器模型（Browser/Server，B/S）是一种对C/S模型的变化和改进，在这种模型中，用户界面完全通过浏览器实现，一部分事务逻辑在浏览器实现，大部分事务逻辑在服务器中实现，它是一种特殊的客户/服务器模型，这种模型的客户是某种浏览器，采用HTTP协议通信。&lt;/p&gt;
&lt;h3 id=&#34;浏览器服务器模型三层架构&#34;&gt;浏览器/服务器模型三层架构：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;客户端表示层：由Web浏览器组成，它不存放任何应用程序&lt;/li&gt;
&lt;li&gt;应用服务器层：由一台或多台服务器组成，处理应用中的所有事务逻辑等，具有良好的扩展性，可以随应用的需要增加服务器&lt;/li&gt;
&lt;li&gt;数据中心层：由数据库系统组成，用于存放业务数据&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;浏览器服务器模型的优点&#34;&gt;浏览器/服务器模型的优点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;具有分布性特点，可以随时进行查询，浏览等业务处理&lt;/li&gt;
&lt;li&gt;业务扩展简方便，通过增加网页即可增加服务器的功能&lt;/li&gt;
&lt;li&gt;维护简单方便，只需要改变网页，就可以实现所有用户的同步更新&lt;/li&gt;
&lt;li&gt;开发简单，共享性强&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;p2p模型&#34;&gt;P2P模型&lt;/h2&gt;
&lt;p&gt;在C/S和B/S模型中，系统的性能由服务器的性能决定，当大量用户请求服务时，服务器就必然成为系统的瓶颈。
P2P模型（Peer to Peer）的思想是整个网络的传输内容不保存在中心服务器上，每个结点都同时具有下载、上传的功能，其权力和义务是对等的。
在P2P模型中，没有服务器和客户机之分，任意一对计算机都是&lt;strong&gt;对等方（Peer）&lt;/strong&gt;，可以直接相互通信&lt;/p&gt;
&lt;h3 id=&#34;p2p模型的优点&#34;&gt;P2P模型的优点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;减轻了服务器的计算压力，消除了对某个服务器的完全依赖，可以将任务分配到各个结点上，大大提高了系统效率和资源利用率&lt;/li&gt;
&lt;li&gt;多个对等方之间可以直接共享文档&lt;/li&gt;
&lt;li&gt;可扩展性好，传统服务器有响应和带宽的限制，因此只能接受一定数量的请求&lt;/li&gt;
&lt;li&gt;网络健壮性强，单个结点的失效不会影响其他部分的结点&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;p2p模型的缺点&#34;&gt;P2P模型的缺点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;在获取服务的同时，还要给其他结点提供服务，会占用较多的内存，影响整机速度&lt;/li&gt;
&lt;li&gt;经常进行P2P下载会对硬盘造成较大的损伤&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;域名系统dns&#34;&gt;域名系统（DNS）&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;域名系统（Domain Name System，DNS）&lt;/strong&gt;：是因特网使用的命名系统，用来把便于人们记忆的具有特定含义的主机名转换为便于机器处理的IP地址。DNS采用C/S模型，协议运行在UDP之上，使用53号端口&lt;/p&gt;
&lt;h2 id=&#34;层次域名空间&#34;&gt;层次域名空间&lt;/h2&gt;
&lt;p&gt;因特网采用层次树状结构的命名方法。任何一个连接到因特网的主机或路由器，都有唯一的层次结构名称，即域名。域是域名空间中一个可被管理的部分，域可以划分为子域，子域可以继续划分为子域的子域，这样就形成了顶级域，二级域、三级域等。每个域名都由标号序列组成，各标号之间用点（“.&amp;quot;）隔开。如focus-wind.com这个域名，com是顶级域，focus-wind是二级域。&lt;/p&gt;
&lt;h3 id=&#34;域名标号&#34;&gt;域名标号（“.&amp;quot;）&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;标号中的英文不区分大小写&lt;/li&gt;
&lt;li&gt;标号中除了连字符（“-”）不能使用其他的标点符号&lt;/li&gt;
&lt;li&gt;每个域名不超过63个字符，多标号组成的完整域名最长不超过255个字符&lt;/li&gt;
&lt;li&gt;级别低的域名写在左边，级别高的域名写在右边&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;顶级域名top-level-domaintld分类&#34;&gt;顶级域名（Top Level Domain，TLD）分类&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;国家（地区）顶级域名（nTLD），如“.cn”表示中国，“us”表示美国&lt;/li&gt;
&lt;li&gt;通用顶级域名（gTLD），如“.com”表示公司，“.net”表示网络服务机构，&amp;quot;.org“表示非营利性组织，&amp;quot;.gov”表示国家或政府部门&lt;/li&gt;
&lt;li&gt;基础结构域名（反向域名），用于反向域名解析，仅有一个 &amp;ldquo;.arpa“&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在域名系统中，每个域分别由不同的组织进行管理，每个组织都可以将它们的域再分成一定数目的子域，并将子域委托给其他组织去管理&lt;/p&gt;
&lt;h2 id=&#34;域名服务器&#34;&gt;域名服务器&lt;/h2&gt;
&lt;p&gt;因特网将域名系统设计成了一个联机分布式的数据库系统。域名到IP地址的解析由运行在域名服务器上的程序完成，一个服务器所管辖的域称为区，各单位根据具体情况划分自己管辖的区，但一个区中所有结点必须连通。每个区设置相应的权限域名服务器，保存该区的主机域名到IP的映射。每个域名服务器不但能进行域名到IP的解析，还要具有连向其他域名服务器的信息，当自己不能进行域名到IP地址的转换时，能够知道到什么地方找其他域名服务器。
DNS使用层次方式组织域名服务器。&lt;/p&gt;
&lt;h3 id=&#34;根域名服务器&#34;&gt;根域名服务器&lt;/h3&gt;
&lt;p&gt;根域名服务器是最高层次的域名服务器，所有的根域名服务器都知道所有的顶级域名服务器的IP地址。不管是本地域名服务器还是因特网任何一个域名的解析，只要自己无法完成解析，都要求助于根域名服务器。
因特网上有13个根域名服务器，13个根域名服务器都视为单个服务器，每个服务器是冗余服务器的集群，以提供安全性和可靠性。
根域名服务器用来管理顶级域，一般告诉本地域名服务器下一步应当找那个顶级域名服务器进行查询&lt;/p&gt;
&lt;h3 id=&#34;顶级域名服务器&#34;&gt;顶级域名服务器&lt;/h3&gt;
&lt;p&gt;顶级域名服务器负责管理该顶级域名服务器注册的所有二级域名。收到DNS查询请求时，给出相应应当。响应可能是最后结果，也可能是下一步应当查询的域名服务器的IP地址。&lt;/p&gt;
&lt;h3 id=&#34;授权域名服务器权限域名服务器&#34;&gt;授权域名服务器（权限域名服务器）&lt;/h3&gt;
&lt;p&gt;每台服务器都必须在授权域名服务器处登记。为了更可靠的工作，一台主机最好至少有两个授权域名服务器。许多域名服务器都同时充当本地域名服务器和授权域名服务器。
授权域名服务器总能将其管辖的主机名转换为该主机的IP地址&lt;/p&gt;
&lt;h3 id=&#34;本地域名服务器&#34;&gt;本地域名服务器&lt;/h3&gt;
&lt;p&gt;每个因特网服务提供者（ISP），或一所大学、一所大学的各个系，都可以拥有一个本地域名服务器。当一台主机提供DNS查询请求时，这个查询请求报文就发送给该主机的本地域名服务器。&lt;/p&gt;
&lt;h2 id=&#34;域名解析过程&#34;&gt;域名解析过程&lt;/h2&gt;
&lt;p&gt;域名解析就是&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;正向解析：把域名映射为IP地址&lt;/li&gt;
&lt;li&gt;反向解析：把IP地址映射成域名&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当客户端需要域名解析时，通过本机的DNS客户端构造一个DNS请求报文，以UDP数据报的方法发往本地域名服务器。
域名解析有两种方式：迭代查询和递归与迭代相结合的查询。&lt;/p&gt;
&lt;h3 id=&#34;递归查询&#34;&gt;递归查询&lt;/h3&gt;
&lt;p&gt;递归查询是：本地域名只需向根域名服务器查询一次，后面的几次查询都是递归的在其他几个域名服务器之间进行查询。低层DNS服务器查到数据后，按照递归返回结果方式的返回给上级DNS服务器，返回到根域名服务器后，根域名服务器将结果返回给本地域名服务器，本地域名服务器交付给主机。&lt;/p&gt;
&lt;h3 id=&#34;递归与迭代相结合的查询&#34;&gt;递归与迭代相结合的查询&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;主机与本地域名服务器的查询是递归查询&lt;/li&gt;
&lt;li&gt;本地域名服务器向根域名服务器的查询采用迭代查询
&lt;ul&gt;
&lt;li&gt;本地域名服务器向根域名服务器请求DNS请求，DNS查找到下一个服务器的IP地址，返回给本地域名服务器&lt;/li&gt;
&lt;li&gt;本地域名服务器根据返回的IP地址查找对应的域名服务器，直到查找到解析的值&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;为了提高DNS查询的效率，减少因特网DNS查询报文数量。在域名服务器中广泛使用高速缓存。当一个DNS服务器收到DNS查询结果时，将DNS信息缓存到高速缓存中，当另一个相同的域名查询请求到达给DNS服务器时，能直接提供所要的查询服务。DNS服务器在一段时间后会丢弃高速缓存中的信息。&lt;/p&gt;
&lt;h1 id=&#34;文件传输协议ftp&#34;&gt;文件传输协议（FTP）&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;文件传输协议（File Transfer Protocol，FTP）&lt;/strong&gt;：是因特网使用最广泛的文件传送协议，FTP提供交互式的访问，允许客户指明文件的类型与格式，允许文件具有存取权限。屏蔽了计算机系统的细节，适合在异构网络中的任意计算机中传输文件。
FTP采用C/S模型，使用TCP可靠传输服务，FTP服务器进程由两大部分组成：主进程，负责接收新的请求；若干从属进程，负责处理单个请求&lt;/p&gt;
&lt;h2 id=&#34;ftp提供的功能&#34;&gt;FTP提供的功能&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;提供不同种类主机系统之间的文件传输能力&lt;/li&gt;
&lt;li&gt;以用户权限管理的方式提供用户对远程FTP服务器上的文件管理能力&lt;/li&gt;
&lt;li&gt;以匿名FTP的方式提供公用文件共享的能力&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ftp的工作步骤&#34;&gt;FTP的工作步骤&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;打开FTP控制端口（21），使客户进程能够连接上&lt;/li&gt;
&lt;li&gt;等待客户进程发送链接请求&lt;/li&gt;
&lt;li&gt;启动从属进程处理客户进程发来的请求。主进程和从属进程并发执行，从属进程对客户进程的请求处理完毕后终止&lt;/li&gt;
&lt;li&gt;回到等待状态，接收其他客户进程的请求&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;控制连接和数据连接&#34;&gt;控制连接和数据连接&lt;/h2&gt;
&lt;p&gt;FTP在工作时使用两个并行的TCP连接：一个是控制连接（端口号21）；一个是数据连接（端口号是20）&lt;/p&gt;
&lt;h3 id=&#34;控制连接21&#34;&gt;控制连接（21）&lt;/h3&gt;
&lt;p&gt;服务器监听21号端口，等待客户连接，控制连接用户传输控制信息（如连接请求、传送请求等），并且控制信息都以7位ASCII格式发送。
FTP客户发出传送请求，通过控制连接发送给服务端的控制进程，在传输文件时可以使用控制连接控制数据传输（如终止数据传输），控制连接在整个会话期间一直处于打开状态。&lt;/p&gt;
&lt;h3 id=&#34;数据连接20&#34;&gt;数据连接（20）&lt;/h3&gt;
&lt;p&gt;服务器端的控制进程收到FTP客户机发来的文件传输请求后，创建”数据传送进程“和”数据连接“。数据连接用来连接客户端和服务器端的数据传送进程，数据传送进程实际上完成文件的传送，传送完毕后，关闭数据传送进程并结束运行。
数据连接由两种传送模式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主动模式PORT：客户机连接到服务器21端口，登录成功后读取数据时，客户端随机开发一个端口，并发送命令告知服务器，服务器收到PORT命令和端口号后，通过20端口和客户端开发的端口连接，发送数据&lt;/li&gt;
&lt;li&gt;被动模式PASV：客户机连接到服务器21端口，登录成功后读取数据时，发送PASV命令到服务器，服务器在本地随机开放一个端口，客户端连接到服务器开发的端口进行数据传输&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;因为FTP使用分离的控制连接，所以也称FTP的控制信息是带外（Out-of-band）传送的。
使用FTP，若要修改服务器上的文件，若要修改服务器上的文件，则需要将文件传送到本地主机，然后将修改后的文件副本传送到原服务器，来回传送耗费很多时间。
网络文件系统（NFS）采用另一个思路：允许进程打开一个远程文件，并能在该文件的某个特定位置开始读写数据。这样NFS可使用户复制一个大文件中的一个很小的片段，而不需要复制整个大文件。&lt;/p&gt;
&lt;h1 id=&#34;电子邮件&#34;&gt;电子邮件&lt;/h1&gt;
&lt;h2 id=&#34;电子邮件系统的组成结构&#34;&gt;电子邮件系统的组成结构&lt;/h2&gt;
&lt;p&gt;电子邮件是一种异步通信方式。电子邮件把邮件发送到收件人使用的邮件服务器，并放在其中的收件人邮箱中，收件人可以随时在网上使用邮件服务器进行读取。
一个邮件系统由三个主要组件构成：用户代理（User Agent）、邮件服务器和电子邮件协议（SMTP、POP3、IMAP等）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用户代理：用户与电子邮件系统的接口。
&lt;ul&gt;
&lt;li&gt;用户代理向用户提供一个友好的接口来发送和接收邮件。&lt;/li&gt;
&lt;li&gt;用户代理至少具有撰写、显示和邮件处理等功能。&lt;/li&gt;
&lt;li&gt;通常情况，用户代理是运行在PC上的客户端程序&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;邮件服务器：
&lt;ul&gt;
&lt;li&gt;功能是发送和接收邮件，同时还要向发信人报告邮件传送的情况。&lt;/li&gt;
&lt;li&gt;邮件服务器采用C/S模式，但必须能同时充当客户和服务器。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;电子邮件协议：
&lt;ul&gt;
&lt;li&gt;邮件发送协议：用于用户代理向邮件服务器发送邮件或在邮件服务器之间发送邮件
&lt;ul&gt;
&lt;li&gt;SMTP：用“推（Push）”的通信方式将邮件推送到SMTP服务器上&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;邮件读取协议：用于用户代理从邮件服务器读取邮件。
&lt;ul&gt;
&lt;li&gt;POP3：用“拉（Pull）”的通信方式，用户读取邮件时，用户代理向邮件服务器发出请求，“拉”取用户邮箱中的邮件。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;电子邮件的收发过程&#34;&gt;电子邮件的收发过程&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;发信人调用用户代理撰写和编辑要发送的邮件。用户代理用SMTP把邮件推送给发送端邮件服务器&lt;/li&gt;
&lt;li&gt;发送端邮件服务器将邮件放入邮件缓存队列中，等待发送&lt;/li&gt;
&lt;li&gt;发送端邮件服务器SMTP客户进程，发现邮件缓存中有待发送的邮件。向运行在接收端邮件服务器的SMTP服务器进程发起建立TCP连接&lt;/li&gt;
&lt;li&gt;TCP连接建立后，SMTP客户进程向SMTP服务器进程发送邮件。邮件发送完毕，SMTP关闭TCP连接&lt;/li&gt;
&lt;li&gt;运行在接收端的邮件服务器中的SMTP服务器进程收到邮件后，将邮件放入收信人的用户邮件，等待收信人读取邮件&lt;/li&gt;
&lt;li&gt;收信人收信时，调用用户代理，使用POP3（或IMAP）协议将邮件从接收端邮件服务器的用户邮箱中拉取&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;电子邮件格式与mime&#34;&gt;电子邮件格式与MIME&lt;/h2&gt;
&lt;h3 id=&#34;电子邮件格式&#34;&gt;电子邮件格式&lt;/h3&gt;
&lt;p&gt;一个电子邮件分为信封和内容两大部分，邮件内容分为首部和主体两部分。RFC822规定了邮件的首部格式，而邮件的主体部分由用户自由撰写。用户写好首部后，邮件系统自动将信封所需的信息提取出来并写在信封上，用户不需要亲自填写信封上的信息。
邮件内容的首部包含一些首部行。每个首部行由一些关键字后跟冒号再跟值构成，有些关键字是必须的，有些是可选的。首部和主体之间用空行进行分割。
电子邮件构成：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;信封：由邮件系统自动将信封所需的信息提取并写在信封上&lt;/li&gt;
&lt;li&gt;内容
&lt;ul&gt;
&lt;li&gt;首部：
&lt;ul&gt;
&lt;li&gt;首部行：关键字:值&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;主体：由用户自由撰写&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;邮件内容示例&#34;&gt;邮件内容示例&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;首部:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;From:focus@focus-wind.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;To:shangan@foxmail.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Subject:Hello World!!!
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;内容:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;~~~
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;From：必填关键字，由邮件系统自动填入&lt;/li&gt;
&lt;li&gt;To：必填关键字，填入一个或多个收件人的电子邮箱&lt;/li&gt;
&lt;li&gt;Subject：可选关键字，邮件的主题，反映邮件的主要内容&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;多用途网际邮件扩充mime&#34;&gt;多用途网际邮件扩充（MIME）&lt;/h3&gt;
&lt;p&gt;由于SMTP只能传送一定长度的ASCII码邮件，许多非英语国家的文件无法传送，且无法传送可执行文件及其他二进制对象，因此提出了&lt;strong&gt;多用途网际邮件扩充（Multipurpose Internet Mail Extensions，MIME）&lt;/strong&gt;
MIME并未改动SMTP和取代SMTP，MIME继续使用现有的格式，但增加了邮件主体的结构，定义了传送非ASCII码的编码规则。MIME可在现有的电子邮件程序和协议下传送。&lt;/p&gt;
&lt;h4 id=&#34;mime主要内容&#34;&gt;MIME主要内容&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;5个新的邮件首部字段：MIME版本、内容描述、内部标识、传送编码、内容类型&lt;/li&gt;
&lt;li&gt;定义了许多邮件内容的格式，对多媒体电子邮件的表示方法进行了标准化&lt;/li&gt;
&lt;li&gt;定义了传送编码，可对任何内容格式进行转换，不会被邮件系统改变&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;电子邮件协议&#34;&gt;电子邮件协议&lt;/h2&gt;
&lt;h3 id=&#34;简单邮件传输协议smtp邮件发送协议&#34;&gt;简单邮件传输协议（SMTP，邮件发送协议）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;简单邮件传输协议（Simple Mail Transfer Protocol，SMTP）&lt;/strong&gt;：是一种提供可靠且有效的电子邮件传输协议，控制两个相互通信的SMTP进程交换信息。SMTP提供C/S方式，因此负责发送邮件的SMTP进程是SMTP客户，负责接收邮件的SMTP进程是SMTP服务器。SMTP使用TCP连接，端口号为25。SMTP通信分为三个阶段：连接建立、邮件发送、连接释放。&lt;/p&gt;
&lt;h4 id=&#34;连接建立&#34;&gt;连接建立&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;发送人的邮件发送到发送方邮件服务器的邮件缓存中&lt;/li&gt;
&lt;li&gt;SMTP客户每隔一定的时间对邮件缓存扫描一次&lt;/li&gt;
&lt;li&gt;如发现有邮件，就使用SMTP的熟知端口号（25）与接收方的邮件服务器SMTP服务器建立TCP连接&lt;/li&gt;
&lt;li&gt;连接建立后，接收方SMTP服务器发出220 Service ready（服务就绪）&lt;/li&gt;
&lt;li&gt;然后SMTP客户向SMTP服务器发送HELO命令，附上发送方的主机名。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;SMTP不使用中间的邮件服务器。TCP连接在发送方和接收方的两个邮件服务器之间之间建立连接，当接收方邮件服务器因故障暂时无法建立连接时，发送方邮件服务器等待一段时间后再次尝试建立连接。&lt;/p&gt;
&lt;h4 id=&#34;邮件传送&#34;&gt;邮件传送&lt;/h4&gt;
&lt;p&gt;连接建立后，开始传送邮件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;邮件传送从MAIL命令开始，MAIL命令后面又发件人的地址。如：MAIL FROM:&lt;a class=&#34;link&#34; href=&#34;mailto:focus@focus-wind.com&#34; &gt;focus@focus-wind.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;SMTP服务器准备好接收邮件，回答250 OK&lt;/li&gt;
&lt;li&gt;SMTP客户端发送一个或多个RCPT（Recipient）命令，格式为：RCPT TO:&amp;lt;收件人地址&amp;gt;
&lt;ul&gt;
&lt;li&gt;RCPT命令的作用是弄清接收方系统是否已做好接收邮件的准备，然后才发送邮件，以便不致于发送很长邮件后才知道地址错误，避免浪费通信资源&lt;/li&gt;
&lt;li&gt;每发送一个RCPT命令，都应有相应的信息从SMTP服务器返回，如250 OK或550 No such user here（无此用户）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;收到OK回答后，客户端使用DATA命令，表示要开始传输邮件的内容&lt;/li&gt;
&lt;li&gt;正常情况下，SMTP服务器回复的信息是354 Start mail input; end with &amp;lt;CRLF&amp;gt;, &amp;lt;CRLF&amp;gt;（&amp;lt;CRLF&amp;gt;表示回车换行），此时SMTP客户端开始传送邮件内容，并以&amp;lt;CRLF&amp;gt;, &amp;lt;CRLF&amp;gt;表示文件内容结束。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;连接释放&#34;&gt;连接释放&lt;/h4&gt;
&lt;p&gt;邮件发送完毕后，SMTP客户发送QUIT命令，SMTP服务器返回信息是221（服务关闭），表示SMTP同意释放TCP连接，邮件传送过程结束&lt;/p&gt;
&lt;h3 id=&#34;邮局协议pop邮件读取协议&#34;&gt;邮局协议（POP，邮件读取协议）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;邮局协议（Post Office Protocol，POP）&lt;/strong&gt;：是一个非常简单但功能有限的邮件读取协议，限制使用的是第3版邮局协议POP3。POP3采用“拉（Pull）”的方式通信，当用户读取邮件时，用户代理向邮件服务器发出请求，拉取用户邮箱中的邮件
POP使用C/S的工作方式，传输层使用TCP，端口号是110.接收方的用户代理上必须运行POP客户程序，接收方的邮件服务器上运行POP服务器程序。
POP有两种工作方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;下载并保留：用户从邮件服务器上读取邮件后，邮件依然保存在邮件服务器上，用户可再次从邮件服务器上读取该邮件&lt;/li&gt;
&lt;li&gt;下载并删除：邮件一旦被读取，就被从邮件服务器上删除，不能再从邮件服务器上读取&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;因特网报文存取协议imap邮件读取协议&#34;&gt;因特网报文存取协议（IMAP，邮件读取协议）&lt;/h3&gt;
&lt;p&gt;因特网报文存取协议（IMAP）比POP复杂的多，IMAP为用户提供创建文件夹，再不同文件夹之间移动邮件及在远程文件夹中查询邮件等联机命令，因此，IMAP服务器维护了会话用户的状态信息。
IMAP允许用户代理只获取报文的部分信息，如只读取报文的首部或IMIE报文的一部分，适用于低带宽的情况。&lt;/p&gt;
&lt;h3 id=&#34;基于万维网的电子邮件&#34;&gt;基于万维网的电子邮件&lt;/h3&gt;
&lt;p&gt;随着万维网的发展，目前出现了很多基于万维网的电子邮件，如Gmail，Outlook等。
这些电子邮件的特点是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用户浏览器与万维网的邮件服务器之间的邮件发送或接收使用的是HTTP协议&lt;/li&gt;
&lt;li&gt;在不同邮件服务器之间传送邮件时使用SMTP协议&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;万维网www&#34;&gt;万维网（WWW）&lt;/h1&gt;
&lt;h2 id=&#34;www-的概念与组成结构&#34;&gt;WWW 的概念与组成结构&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;万维网（World Wide Web，WWW）&lt;/strong&gt;：是一个分布式、联机式的信息存储空间，在这个空间中：一样有用的事物称为一样“资源”，并由一个全域“统一资源定位符（URL）”标识。这些资源通过超文本传输协议（HTTP）传送给使用者，后者通过单机链接来获取资源。
万维网使用链接的方式能非常方便的从因特网的一个站点访问另一个站点，从而主动地按需获取信息。超文本标记语言（HyperText Markup Language，HTML）使万维网页面设计者可以很方便地用一个超链接从本页面的某处链接到因特网的任何一个万维网界面。&lt;/p&gt;
&lt;h3 id=&#34;万维网内核部分构成&#34;&gt;万维网内核部分构成&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;统一资源定位符（URL）：复杂标识万维网上的各种文档，使每个文档在万维网的范围内具有唯一的标识符URL
&lt;ul&gt;
&lt;li&gt;URL的一般形式：&lt;strong&gt;&amp;lt;协议&amp;gt;://&amp;lt;主机&amp;gt;:&amp;lt;端口&amp;gt;/&amp;lt;资源路径&amp;gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;主机是存放资源的主机在因特网中的域名或IP地址&lt;/li&gt;
&lt;li&gt;在URL中不区分大小写&lt;/li&gt;
&lt;li&gt;端口和资源路径有时可省略&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;超文本传输协议（HTTP）：应用层协议，使用TCP进行可靠的传输，HTTP是万维网客户程序和服务器程序之间交互所必须遵守的协议&lt;/li&gt;
&lt;li&gt;超文本标记语言（HTML）：一种文档结构的标记语言，使用一些约定的标记对页面上的各种信息、格式进行描述&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;万维网的工作流程&#34;&gt;万维网的工作流程&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Web用户使用浏览器与Web服务器建立连接，并发送浏览请求&lt;/li&gt;
&lt;li&gt;Web服务器把URL转换为文件路径，并返回信息给Web浏览器&lt;/li&gt;
&lt;li&gt;通信完成，关闭连接&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;超文本传输协议http&#34;&gt;超文本传输协议（HTTP）&lt;/h2&gt;
&lt;p&gt;HTTP协议定义了浏览器怎样向万维网服务器请求万维网文档，以及服务器怎样把文档传送给浏览器。HTTP是面向事务（Transaction-oriented）的应用层协议，规定了在浏览器和服务器之间的请求和响应的格式与规则。&lt;/p&gt;
&lt;h3 id=&#34;http的操作过程&#34;&gt;HTTP的操作过程&lt;/h3&gt;
&lt;p&gt;按用户单击鼠标后发生的事件顺序：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;浏览器分析链接指向页面的URL&lt;/li&gt;
&lt;li&gt;浏览器向DNS请求解析主机的IP地址&lt;/li&gt;
&lt;li&gt;域名系统DNS解析出主机的IP地址&lt;/li&gt;
&lt;li&gt;浏览器与该服务器建立TCP连接（HTTP默认端口为80）&lt;/li&gt;
&lt;li&gt;浏览器发出HTTP请求&lt;/li&gt;
&lt;li&gt;服务器通过HTTP响应把资源发送给浏览器&lt;/li&gt;
&lt;li&gt;释放TCP连接&lt;/li&gt;
&lt;li&gt;浏览器解释资源文件，并把Web页面呈现给用户&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;http的特点&#34;&gt;HTTP的特点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;HTTP使用TCP作为运输层协议，但HTTP本身是无连接的。即HTTP使用了TCP连接，但通信的双方在交互HTTP报文之前不需要先建立HTTP连接，不必考虑数据在传输过程中被丢弃后怎样被重传，通过TCP保证了数据的可靠传输。&lt;/li&gt;
&lt;li&gt;HTTP是无状态的。同一个用户重复访问服务器的页面时，服务器的响应与第一次被访问时相同。服务器不记得曾经访问过这个用户，也不记得为该用户曾经服务过多少次。
&lt;ul&gt;
&lt;li&gt;HTTP无状态特性简化了服务器的设计，使服务器更容易支持大量并发的HTTP请求&lt;/li&gt;
&lt;li&gt;实际应用中，使用Cookie和数据库的方式来跟踪用户的活动
&lt;ul&gt;
&lt;li&gt;Cookie工作原理：当用户浏览某个使用Cookie的网站时，该网站服务器为用户产生一个唯一的标识码，当用户继续浏览相同的网站时，会取出标识码，放入请求报文的Cookie首部行中。服务器根据请求报文的Cookie识别码从数据库中查询该用户的活动记录，进而执行一些个性化的工作&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;HTTP既可以使用非持久连接，也可以使用持久连接（HTTP/1.1支持）
&lt;ul&gt;
&lt;li&gt;非持久连接：每个网页元素对象的传输都需要单独建立一个TCP连接。
&lt;ul&gt;
&lt;li&gt;请求一个万维网文档所需的时间是该文档的传输时间加上两倍往返时间RTT（一个RTT用于TCP连接，一个RTT用于请求和接收文档）&lt;/li&gt;
&lt;li&gt;每个对象引用都导致2RTT的开销，每次建立新的TCP连接都要分配缓存和变量，使万维网服务器负担更重&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;持久连接：万维网服务器在发送响应后仍然保持这条连接，使同一个客户和该服务器可以继续在这条连接上传送后续的HTTP请求和响应报文
&lt;ul&gt;
&lt;li&gt;非流水线式：
&lt;ul&gt;
&lt;li&gt;客户在收到前一个响应后才能发出下一个请求。&lt;/li&gt;
&lt;li&gt;服务器发送完一个对象后，其TCP连接就处于空闲状态，浪费了服务器资源。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;流水线式：
&lt;ul&gt;
&lt;li&gt;客户每遇到一个对象引用就立即发出一个请求，客户可以逐个连续发出对各个引用对象的请求&lt;/li&gt;
&lt;li&gt;所有的请求和响应都是连续发生的，所有引用的对象共经历1个RTT延迟，减少了TCP连接中的空闲事件&lt;/li&gt;
&lt;li&gt;HTTP/1.1默认使用流水线的持久连接&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;http报文结构&#34;&gt;HTTP报文结构&lt;/h3&gt;
&lt;p&gt;HTTP是面向文本（Text-Oriented）的，因此报文的每个字段都是一些ASCII码串，每个字段的长度都是不确定的&lt;/p&gt;
&lt;h4 id=&#34;http报文分类&#34;&gt;HTTP报文分类&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;请求报文：从客户向服务器发送的请求报文&lt;/li&gt;
&lt;li&gt;响应报文：从服务器到客户的回答&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;http的报文组成&#34;&gt;HTTP的报文组成&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;开始行：用于区分是请求报文还是响应报文
&lt;ul&gt;
&lt;li&gt;请求行：请求报文的开始行
&lt;ul&gt;
&lt;li&gt;方法：对所请求对象进行的操作&lt;/li&gt;
&lt;li&gt;请求资源的URL&lt;/li&gt;
&lt;li&gt;HTTP版本&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;状态行：响应报文的开始行
&lt;ul&gt;
&lt;li&gt;HTTP版本&lt;/li&gt;
&lt;li&gt;响应状态码&lt;/li&gt;
&lt;li&gt;短语&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;开始行的三个字段之间使用空格分隔，最后以CRLF（CR：回车，LF：换行）接收&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;首部行：用来说明浏览器、服务器或报文主体的一些信息
&lt;ul&gt;
&lt;li&gt;首部可以有几行，也可以不使用&lt;/li&gt;
&lt;li&gt;每个首部行都有首部字段名和它的值&lt;/li&gt;
&lt;li&gt;每一行的结束的地方用回车和换行分割&lt;/li&gt;
&lt;li&gt;整个首部行结束，还有一行空行将首部行和后面的实体主体分开&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;实体主体：与HTTP请求或回应一起发送的实体主体的格式和编码信息都在实体标题域
&lt;ul&gt;
&lt;li&gt;实体主体只在请求方法有要求时才会被放在请求消息中。请求消息标题域处的内容长度&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;http请求报文常用方法&#34;&gt;HTTP请求报文常用方法&lt;/h5&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;方法&lt;/th&gt;
&lt;th&gt;意义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;GET&lt;/td&gt;
&lt;td&gt;请求指定的页面信息，并返回实体主体&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HEAD&lt;/td&gt;
&lt;td&gt;类似于GET请求，只不过返回的响应中没有具体的内容，用于获取报文&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;POST&lt;/td&gt;
&lt;td&gt;像指定资源提交数据进行处理（例如提交表单或者上传文件），数据被包含在请求体中，POST请求可能会导致新的资源的建立或已有资源的修改&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PUT&lt;/td&gt;
&lt;td&gt;从客户端向服务器传送数据取代指定的文档的内容&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DELETE&lt;/td&gt;
&lt;td&gt;请求服务器删除指定的页面或资源&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h5 id=&#34;http状态码&#34;&gt;HTTP状态码&lt;/h5&gt;
&lt;h5 id=&#34;http状态码分类&#34;&gt;HTTP状态码分类&lt;/h5&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;分类&lt;/th&gt;
&lt;th&gt;分类描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1**&lt;/td&gt;
&lt;td&gt;信息，服务器收到请求，需要请求者继续执行操作&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2**&lt;/td&gt;
&lt;td&gt;成功，操作被成功接收并处理&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3**&lt;/td&gt;
&lt;td&gt;重定向，需要进一步的操作以完成请求&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4**&lt;/td&gt;
&lt;td&gt;客户端错误，请求包含语法错误或无法完成请求&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5**&lt;/td&gt;
&lt;td&gt;服务器错误，服务器在处理请求的过程中发生了错误&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h5 id=&#34;常见状态码&#34;&gt;常见状态码&lt;/h5&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;状态码&lt;/th&gt;
&lt;th&gt;英文名称&lt;/th&gt;
&lt;th&gt;中文描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;200&lt;/td&gt;
&lt;td&gt;OK&lt;/td&gt;
&lt;td&gt;请求成功。一般用于GET与POST请求&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;400&lt;/td&gt;
&lt;td&gt;Bad Request&lt;/td&gt;
&lt;td&gt;客户端请求的语法错误，服务器无法理解&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;401&lt;/td&gt;
&lt;td&gt;Unauthorized&lt;/td&gt;
&lt;td&gt;请求要求用户的身份认证&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;403&lt;/td&gt;
&lt;td&gt;Forbidden&lt;/td&gt;
&lt;td&gt;服务器理解请求客户端的请求，但是拒绝执行此请求&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;404&lt;/td&gt;
&lt;td&gt;Not Found&lt;/td&gt;
&lt;td&gt;服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人员可设置&amp;quot;您所请求的资源无法找到&amp;quot;的个性页面&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;408&lt;/td&gt;
&lt;td&gt;Request Time-out&lt;/td&gt;
&lt;td&gt;服务器等待客户端发送的请求时间过长，超时&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;502&lt;/td&gt;
&lt;td&gt;Bad Gateway&lt;/td&gt;
&lt;td&gt;作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;简单网络管理&#34;&gt;简单网络管理&lt;/h1&gt;
&lt;h2 id=&#34;简单网络管理协议snmp&#34;&gt;简单网络管理协议（SNMP）&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;简单网络管理协议(Simple Network Management Protocol,SNMP）&lt;/strong&gt;：是专门设计用于在IP网络管理网络节点（服务器、工作站、路由器、交换机及HUBS等）的一种标准协议，它是一种应用层协议。 SNMP使网络管理员能够管理网络效能，发现并解决网络问题以及规划网络增长。通过SNMP接收随机消息（及事件报告）网络管理系统获知网络出现问题。
SNMP主要由：管理信息结构SMI（Structure ofManagement Information）、管理信息库MIB和管理协议SNMP构成。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;管理信息结构SMI：定义了SNMP框架所用信息的组织和标识，为MIB定义管理对象及使用管理对象提供模板。&lt;/li&gt;
&lt;li&gt;管理信息库MIB：定义了可以通过SNMP进行访问的管理对象的集合。
&lt;ul&gt;
&lt;li&gt;一种树状数据库，MIB管理的对象，就是树的端节点，每个节点都有唯一位置和唯一名字，其命名规则就是父节点的名字作为子节点名字的前缀。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;管理协议SNMP：是应用层协议，定义了网络管理者如何对代理进程的MIB对象进行读写操作。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一个SNMP管理的网络由三个关键组件构成：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;网络管理系统（Network-management systems，NMS）：网络管理系统运行应用程序，以该应用程序监视并控制被管理的设备。也称为管理实体（managingentity）
&lt;ul&gt;
&lt;li&gt;网络管理员在这儿与网络设备进行交互&lt;/li&gt;
&lt;li&gt;网络管理系统提供网络管理需要的大量运算和记忆资源&lt;/li&gt;
&lt;li&gt;一个被管理的网络可能存在一个以上的网络管理系统&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;被管理的设备（managed device）：被管理的设备是一个网络节点，它包含一个存在于被管理的网络中的SNMP代理者
&lt;ul&gt;
&lt;li&gt;被管理的设备通过管理信息库（MIB）收集并存储管理信息，并且让网络管理系统能够通过SNMP代理者取得这项信息&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;代理者（agent）：一种存在于被管理的设备中的网络管理软件模块
&lt;ul&gt;
&lt;li&gt;代理者控制本地机器的管理信息，以和SNMP兼容的格式传送这项信息&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;snmp的优点&#34;&gt;SNMP的优点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;基于TCP/IP互联网的标准协议，传输层协议一般采用UDP。&lt;/li&gt;
&lt;li&gt;自动化网络管理。网络管理员可以利用SNMP平台在网络上的节点检索信息、修改信息、发现故障、完成故障诊断、进行容量规划和生成报告。&lt;/li&gt;
&lt;li&gt;屏蔽不同设备的物理差异，实现对不同厂商产品的自动化管理。SNMP只提供最基本的功能集，使得管理任务与被管设备的物理特性和实际网络类型相对独立，从而实现对不同厂商设备的管理。&lt;/li&gt;
&lt;li&gt;简单的请求—应答方式和主动通告方式相结合，并有超时和重传机制。&lt;/li&gt;
&lt;li&gt;报文种类少，报文格式简单，方便解析，易于实现。&lt;/li&gt;
&lt;li&gt;SNMPv3版本提供了认证和加密安全机制，以及基于用户和视图的访问控制功能，增强了安全性。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;常见应用层协议&#34;&gt;常见应用层协议&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;应用程序&lt;/th&gt;
&lt;th&gt;FTP数据连接&lt;/th&gt;
&lt;th&gt;FTP控制连接&lt;/th&gt;
&lt;th&gt;TELNET&lt;/th&gt;
&lt;th&gt;SMTP&lt;/th&gt;
&lt;th&gt;DNS&lt;/th&gt;
&lt;th&gt;TFTP&lt;/th&gt;
&lt;th&gt;HTTP&lt;/th&gt;
&lt;th&gt;POP3&lt;/th&gt;
&lt;th&gt;SNMP&lt;/th&gt;
&lt;th&gt;HTTPS&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;使用协议&lt;/td&gt;
&lt;td&gt;TCP&lt;/td&gt;
&lt;td&gt;TCP&lt;/td&gt;
&lt;td&gt;TCP&lt;/td&gt;
&lt;td&gt;TCP&lt;/td&gt;
&lt;td&gt;UDP&lt;/td&gt;
&lt;td&gt;UDP&lt;/td&gt;
&lt;td&gt;TCP&lt;/td&gt;
&lt;td&gt;TCP&lt;/td&gt;
&lt;td&gt;UDP&lt;/td&gt;
&lt;td&gt;TCP&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;熟知端口号&lt;/td&gt;
&lt;td&gt;20&lt;/td&gt;
&lt;td&gt;21&lt;/td&gt;
&lt;td&gt;23&lt;/td&gt;
&lt;td&gt;25&lt;/td&gt;
&lt;td&gt;53&lt;/td&gt;
&lt;td&gt;69&lt;/td&gt;
&lt;td&gt;80&lt;/td&gt;
&lt;td&gt;110&lt;/td&gt;
&lt;td&gt;161&lt;/td&gt;
&lt;td&gt;443&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>传输层</title>
        <link>/post/network/%E4%BC%A0%E8%BE%93%E5%B1%82/</link>
        <pubDate>Thu, 13 Oct 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/network/%E4%BC%A0%E8%BE%93%E5%B1%82/</guid>
        <description>&lt;h1 id=&#34;传输层提供的服务&#34;&gt;传输层提供的服务&lt;/h1&gt;
&lt;h2 id=&#34;传输层的功能&#34;&gt;传输层的功能&lt;/h2&gt;
&lt;p&gt;传输层向应用层提供通信服务，属于面向通信部分的最高层，是用户功能中的最低层。为运行在不同的主机上的进程之间提供逻辑通信，即使网络层协议不可靠，传输层也可以为用户提供可靠的服务。
传输层的具体功能如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;传输层提供应用程序之间的逻辑通信（即端到端通信）。与网络层的区别是，网络层只提供主机之间的逻辑通信。&lt;/li&gt;
&lt;li&gt;复用和分用：
&lt;ul&gt;
&lt;li&gt;复用：发送方不同的应用进程都可使用同一个传输层协议传送数据&lt;/li&gt;
&lt;li&gt;分用：接收方的传输层在剥去报文的首部后能把这些数据正确交付到目的应用进程&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;传输层对收到的报文进行差错检验，网络层只检查IP数据报首部，不检验数据部分是否出错&lt;/li&gt;
&lt;li&gt;传送层提供两种不同的协议，分别是面向连接的TCP和无连接的UDP。网络层无法同时实现两种协议（要么提供面向连接的虚电路服务，要么提供无连接服务）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;传输层寻址与端口&#34;&gt;传输层寻址与端口&lt;/h2&gt;
&lt;h3 id=&#34;端口的作用&#34;&gt;端口的作用&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;端口&lt;/strong&gt;：能让应用层的各种应用进程将其数据通过端口向下交付给传输层，以及让传输层知道应当将其报文段中的数据向上通过端口交付给应用层相应的进程。端口是传输层服务访问点（TSAP），端口在传输层的作用类似于网络层的IP地址和数据链路层的MAC地址。端口标识的是主机中的应用程序。
数据链路层的SAP是MAC地址，网络层的SAP是IP地址，传输层的SAP是端口。&lt;/p&gt;
&lt;h3 id=&#34;端口号&#34;&gt;端口号&lt;/h3&gt;
&lt;p&gt;应用进程通过端口号进行标识，端口号的长度为16bit，能够表示65536（$2^16$）个不同的端口，端口号只标识本计算机中的各个进程。
端口号根据TCP和UDP协议的不同可以分配相同的端口号。比如9527这个端口号可以分配给仅使用TCP协议的一个进程，也可以同时分配给仅使用UDP协议的一个进程。两者的端口号虽然相同，但是使用的协议不同，所以不是同一进程。&lt;/p&gt;
&lt;h4 id=&#34;端口号分类&#34;&gt;端口号分类&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;服务端使用的端口号
&lt;ul&gt;
&lt;li&gt;熟知端口号（0~1023）：由LANA（互联网地址指派机构）指派给TCP/IP最重要的一些程序&lt;/li&gt;
&lt;li&gt;登记端口号（1024~49151）：供没有端口号的应用程序使用，使用这类端口号应在IANA登记，防止重复使用&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;客户端使用的端口号（48152~65535）：仅在客户进程运行时才动态的选择，又称&lt;strong&gt;短暂端口号（临时端口）&lt;/strong&gt;。通信结束后，端口号就释放，供其他客户进程使用&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;常见熟知端口号&#34;&gt;常见熟知端口号&lt;/h5&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;应用程序&lt;/th&gt;
&lt;th&gt;FTP&lt;/th&gt;
&lt;th&gt;TELNET&lt;/th&gt;
&lt;th&gt;SMTP&lt;/th&gt;
&lt;th&gt;DNS&lt;/th&gt;
&lt;th&gt;TFTP&lt;/th&gt;
&lt;th&gt;HTTP&lt;/th&gt;
&lt;th&gt;HTTPS&lt;/th&gt;
&lt;th&gt;SNMP&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;熟知端口号&lt;/td&gt;
&lt;td&gt;21&lt;/td&gt;
&lt;td&gt;23&lt;/td&gt;
&lt;td&gt;25&lt;/td&gt;
&lt;td&gt;53&lt;/td&gt;
&lt;td&gt;69&lt;/td&gt;
&lt;td&gt;80&lt;/td&gt;
&lt;td&gt;443&lt;/td&gt;
&lt;td&gt;161&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;套接字socket&#34;&gt;套接字（Socket）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;套接字&lt;/strong&gt;：在网络中通过IP地址区分不同的主机，通过端口号区分主机中不同的应用进程，IP地址和端口号合在一起就构成了套接字Socket。在网络中采用发送方和接收方的套接字来识别端点。套接字的本质就是一个通信端点。&lt;strong&gt;套接字Socket = （IP地址 : 端口号）&lt;/strong&gt;
在网络中进行通信时，报文段应含有发送端口和接收端口的套接字。套接字通过发送端口和目的端口区分，所以一个进程可连接的客户进程无理论上的限制。&lt;/p&gt;
&lt;h2 id=&#34;无连接服务与面向连接服务&#34;&gt;无连接服务与面向连接服务&lt;/h2&gt;
&lt;h3 id=&#34;无连接服务&#34;&gt;无连接服务&lt;/h3&gt;
&lt;p&gt;无连接服务是：两个实体之间的通信不需要实现建立好连接，需要通信时，直接发送信息到网络中，让该信息在网络上尽最大努力的传送到目的地。
TCP/IP模型在传输层提供了无连接的用户数据报协议（UDP），提供不可靠的逻辑通信。
UDP是一个无连接的非可靠传输层协议。在网络层之上仅提供两个附加服务：多路复用和对数据的错误检查。&lt;/p&gt;
&lt;h4 id=&#34;无连接服务udp的优点&#34;&gt;无连接服务UDP的优点&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;比较简单，易于实现&lt;/li&gt;
&lt;li&gt;执行速度块&lt;/li&gt;
&lt;li&gt;实时性好&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;udp应用&#34;&gt;UDP应用&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;TFTP：小文件传送协议&lt;/li&gt;
&lt;li&gt;DNS：域名系统&lt;/li&gt;
&lt;li&gt;SNMP：指简单网络管理协议，在IP网络中管理网络结点&lt;/li&gt;
&lt;li&gt;RTP：实时传输协议&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;面向连接服务&#34;&gt;面向连接服务&lt;/h3&gt;
&lt;p&gt;面向连接服务：通信双方在通信之前，必须先建立连接，在通信过程中，整个连接的情况一直被实时的监控和管理。通信结束后，释放建立的连接。
TCP/IP模型在传输层提供了面向连接的传输控制协议（TCP），采用TCP时，传输层向上提供一台全双工的可靠逻辑信道。
TCP连接和网络层虚电路的区别：TCP报文段是在传输层抽象的逻辑信道中传输，对路由器不可见。虚电路经过的交换结点都必须保存虚电路状态信息。传输层采用TCP不影响网络层提供的无连接服务。&lt;/p&gt;
&lt;h4 id=&#34;面向连接服务tcp的优点&#34;&gt;面向连接服务TCP的优点&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;TCP的确认机制和重传机制保证其传输的可靠，稳定&lt;/li&gt;
&lt;li&gt;数据传输中有窗口机制决定传输数据的大小，达到拥塞控制的效果&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;tcp应用&#34;&gt;TCP应用&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;HTTP协议：超文本传输协议，用于浏览器浏览&lt;/li&gt;
&lt;li&gt;HTTPS协议：安全超文本传输协议，携带SSL的HTTP协议&lt;/li&gt;
&lt;li&gt;FTP协议：文件传输协议，用于文件传输&lt;/li&gt;
&lt;li&gt;POP3协议：邮局协议，收邮件使用&lt;/li&gt;
&lt;li&gt;SMTP协议：简单邮件传输协议，用来发送电子邮件&lt;/li&gt;
&lt;li&gt;Telent协议：远程登陆协议，通过一个终端登陆到网络&lt;/li&gt;
&lt;li&gt;SSH协议：安全外壳协议，用于加密安全登陆，替代安全性差的Telent协议&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;udp协议&#34;&gt;UDP协议&lt;/h1&gt;
&lt;p&gt;用户数据报协议（User Datagram Protocol，UDP）仅在IP的数据报服务上增加了两个最基本的服务：复用和分用以及差错检测。
UDP不保证可靠交付，不意外应用对数据的要求不可靠，所有的维护可靠性工作都在应用层来完成。应用开发者可根据应用的需求灵活设计可靠性机制。
UDP是面向报文的。发送方UDP对应用层提供的报文，添加首部后直接交付给网络层，一次发送一个报文，既不合并也不拆分；接收方UDP对网络层提供的UDP数据报，在去除首部后原封不动地交付给上层应用进程。因此，报文是UDP数据报处理的最小单位。&lt;/p&gt;
&lt;h2 id=&#34;udp的特点&#34;&gt;UDP的特点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;UDP无须建立连接，不会引入建立连接的时延，速度比TCP要块很多&lt;/li&gt;
&lt;li&gt;无连接状态，不需要维护连接状态，能支持更多的活动客户机&lt;/li&gt;
&lt;li&gt;分组首部开销小，TCP首部有20B的开销，而UDP首部仅有8B的开销&lt;/li&gt;
&lt;li&gt;应用层能更好的控制要发送的数据和发送时间。UDP没有拥塞控制，网络的拥塞不会影响主机的发送速率。某些实时应用要求以稳定的速度传输，能容忍一些数据的丢失，但不允许有较大的时延，UDP很好的满足了这一要求&lt;/li&gt;
&lt;li&gt;UDP支持一对一、一对多、多对一和多对多的交互通信。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;udp数据报&#34;&gt;UDP数据报&lt;/h2&gt;
&lt;h3 id=&#34;udp的首部格式&#34;&gt;UDP的首部格式&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./UDP数据报格式.png&#34; title=&#34;&#34; alt=&#34;UDP数据报格式&#34;&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;首部（8B）
&lt;ul&gt;
&lt;li&gt;源端口（2B）：源端口号，在需要对方回信时选用，不需要时全为0&lt;/li&gt;
&lt;li&gt;目的端口（2B）：目的端口号，在终点交付报文时必须使用到&lt;/li&gt;
&lt;li&gt;长度（2B）：UDP数据报的长度（包括首部和数据），单位是B，最小值为8（仅首部）&lt;/li&gt;
&lt;li&gt;校验和（2B）：检测UDP数据报传输时是否出错。有错就丢弃。该字段是可选字段，不需要计算校验和时，该字段全为0&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果接收方UDP发现收到的报文端口不正确，那么就丢弃该报文，并由ICMP发送“端口不可达”差错报文给发送方。&lt;/p&gt;
&lt;h3 id=&#34;udp校验&#34;&gt;UDP校验&lt;/h3&gt;
&lt;p&gt;在计算校验和时，在UDP数据报之前添加12B的伪首部，伪首部只参与计算校验和时，校验和按照这个临时的UDP数据报来计算。UDP校验和即校验首部也校验数据（IP数据报只校验首部）。&lt;/p&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./伪首部UDP数据报校验和.png&#34; title=&#34;&#34; alt=&#34;伪首部UDP数据报校验和&#34;&gt;
&lt;/div&gt;
&lt;p&gt;在计算校验和时，UDP数据报添加伪首部，把全零写入校验和字段。把UDP数据报视为许多16位的子串拼接起来。若UDP的数据部分不是偶数个字节，则在数据部分末尾添加0，使其称为偶数个字节（添加的0是临时的）。然后按照二进制反码计算出这些16位的和，将此和的二进制反码写入校验和字段中，校验完毕。
接收方收到UDP数据报时，加入伪首部和末尾添0（如果不是偶数个字节），按二进制反码求这些16位字的和。当无差错时结果为全1，反之表示出现差错，丢弃这个UDP数据报。&lt;/p&gt;
&lt;h1 id=&#34;tcp-协议&#34;&gt;TCP 协议&lt;/h1&gt;
&lt;p&gt;传输控制协议（Transmission Control Protocol，TCP）是在不可靠的网络层之上实现的可靠的数据传输协议，主要解决传输的可靠、有序、无丢失和不重复问题。&lt;/p&gt;
&lt;h2 id=&#34;tcp协议的主要特点&#34;&gt;TCP协议的主要特点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;TCP是面向连接的传输层协议，TCP连接是一条逻辑连接&lt;/li&gt;
&lt;li&gt;每条TCP连接只能有两个端点，每条TCP连接只能是端到端的（进程之间）&lt;/li&gt;
&lt;li&gt;TCP提供可靠交付的服务，保证传送的数据无差错、不丢失、不重复且有序&lt;/li&gt;
&lt;li&gt;TCP提供全双工通信，允许通信双方的进程在任何时刻发送数据，因此，TCP连接的两端都设有发送缓存和接收缓存用来存放双向通信的数据
&lt;ul&gt;
&lt;li&gt;发送缓存：
&lt;ul&gt;
&lt;li&gt;发送应用程序传送给发送方TCP准备发送的数据&lt;/li&gt;
&lt;li&gt;TCP已发送但是尚未收到确认的数据&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;接收缓存：
&lt;ul&gt;
&lt;li&gt;按序到达但尚未被接收应用程序读取的数据&lt;/li&gt;
&lt;li&gt;不按序到达的数据&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;TCP是面向字节流的，虽然应用程序和TCP的交互是一次一个数据块，但TCP把应用程序提供的数据仅视为一连串的无结构的字节流&lt;/li&gt;
&lt;li&gt;TCP报文的长度根据接收方给出的窗口值和当前网络的拥塞程度决定&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;tcp报文段&#34;&gt;TCP报文段&lt;/h2&gt;
&lt;p&gt;TCP传送的数据单元称为报文段。TCP报文段既可以用来传输数据，也可以用来建立连接，释放连接和应答。一个TCP报文段分为首部和数据部分。首部的前20B是固定的，后面4N字节是根据需要而增加的选项，长度为4B的整数倍。首部最短长度为20B。&lt;/p&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./TCP报文段首部.png&#34; title=&#34;&#34; alt=&#34;TCP报文段首部&#34;&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;源端口和目的端口（各2B）：运输层和应用层的服务接口，运输层的复用和分用功能都要通过端口实现&lt;/li&gt;
&lt;li&gt;序号（4B）：范围是$0 \sim 2^{32} - 1$。TCP是面向字节流的，所以TCP连接传送的字节流中的每个字节都按顺序变化，序号字段的值指的是本报文段所发送的数据的第一个字节的序号&lt;/li&gt;
&lt;li&gt;确认号（4B）：期望收到的下一个报文段的第一个数据字节的序号，表面到序号N-1为止的所有数据已经收到&lt;/li&gt;
&lt;li&gt;数据偏移（首部长度，4bit）：表示TCP报文段的首部长度（TCP首部具有长度可选部分），指出TCP首部的数据起初处距离TCP报文段的起始处有多远。数据偏移的单位是4B，由于4bit表示的最大值为15，所以TCP首部的长度范围是：20B~60B&lt;/li&gt;
&lt;li&gt;保留（6bit）：保留为今后使用，目前置为0&lt;/li&gt;
&lt;li&gt;紧急位URG（1bit）：当URG = 1时表示紧急字段有效。告诉系统此报文段有紧急数据，应尽快传送。URG需要和紧急指针联合使用。数据从第一个字节到紧急指针所指的字节接收紧急数据&lt;/li&gt;
&lt;li&gt;确认位ACK（1bit）：仅当ACK = 1时确认号字段有效。TCP规定，连接建立后所有传送的报文段都必须把ACK置1&lt;/li&gt;
&lt;li&gt;推送位PSH（Push，1bit）：当接收方TCP收到PSH = 1的报文，就尽快的将报文交付给接收进程，而不是等缓存填满了才向上交付&lt;/li&gt;
&lt;li&gt;复位位RST（Reset，1bit）：当RST = 1时，表面TCP出现严重错误，必须释放连接，然后再重新建立连接&lt;/li&gt;
&lt;li&gt;同步位SYN（1bit）：当同步位 = 1时，表示这是一个连接请求或连接接受报文
&lt;ul&gt;
&lt;li&gt;当SYN = 1，ACK = 0时表示这时一个连接请求报文&lt;/li&gt;
&lt;li&gt;若同意连接，则响应报文SYN = 1，ACK = 1&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;终止位FIN（1bit）：用来释放连接，当FIN = 1时表明发送方数据已发送完毕，请求释放运输连接&lt;/li&gt;
&lt;li&gt;窗口（2B）：范围是$0 \sim 2^{16} - 1$。指现在允许对方发送的数据量，接收方的数据缓存是有限的，因此用窗口作为接收方让发送方设置其发送窗口的依据&lt;/li&gt;
&lt;li&gt;校验和（2B）：校验和字段校验的范围是首部和数据部分。TCP计算校验和只需要将伪首部的协议字段的17改为6，其他和UDP计算校验和的方式一样&lt;/li&gt;
&lt;li&gt;紧急指针（2B）：紧急指针只再URG = 1时有效，指出本报文段中紧急事件共有多少字节（从数据部分开头开始计算）&lt;/li&gt;
&lt;li&gt;选项（长度可变）：TCP最初只规定了一种选项，即最大报文段长度（Maximum Segment Size，MSS），MSS仅是TCP报文段中的数据部分的最大长度&lt;/li&gt;
&lt;li&gt;填充：使TCP首部长度是4B的整数倍&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;tcp连接管理&#34;&gt;TCP连接管理&lt;/h2&gt;
&lt;p&gt;TCP是面向连接的协议，每个TCP连接都有三个阶段：连接建立、数据传送和连接释放。TCP的连接管理就是使运输连接的建立和释放能正常运行。&lt;/p&gt;
&lt;h3 id=&#34;tcp连接建立要解决的问题&#34;&gt;TCP连接建立要解决的问题&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;要使每一方都能够知道对方的存在&lt;/li&gt;
&lt;li&gt;要允许双方协商一些参数（如最大窗口值、是否使用窗口扩大选项、时间戳选项及服务质量等）&lt;/li&gt;
&lt;li&gt;能够对运输实体资源（缓存大小、连接表中的项目）进行分配&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;tcp连接的建立&#34;&gt;TCP连接的建立&lt;/h3&gt;
&lt;p&gt;TCP连接的建立采用客户/服务器模式（C/S）。主动发送连接建立请求的应用进程称为客户（Client），被动等待接收的应用进程称为服务器（Server）。
TCP连接的建立需要经历3个步骤，俗称三次握手。
连接建立前，服务器处于LISTEN（收听）状态，等待客户的连接请求：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一步：客户机TCP向服务器TCP发送连接请求报文段。这个报文段中，首部的SYN设为1，选择一个初始序号seq = x。TCP规定，SYN报文段不能携带数据，但是需要消耗一个序号。这时TCP客户进入SYN-SENT（Sent，同步已发送）状态
&lt;ul&gt;
&lt;li&gt;连接请求报文段：同步位SYN = 1，初始序号seq = x&lt;/li&gt;
&lt;li&gt;客户进入SYN-SENT（Sent，同步已发送）状态&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第二步：服务器TCP收到连接请求报文段后，如同意建立连接，则向客户机发回确认，并为该TCP连接分配缓存和变量。再确认报文中，把SYN和ACK置为1，确认号是ack = x + 1，同时为自己选择一个初始序号seq = y。确认报文不能携带数据，也要消耗一个序号。这时TCP服务器进入SYN-RCVD（Received，同步收到）状态
&lt;ul&gt;
&lt;li&gt;同步确认报文段：同步位SYN = 1，确认位ACK = 1，初始序号seq = y，确认号ack = x + 1&lt;/li&gt;
&lt;li&gt;TCP服务器分配资源&lt;/li&gt;
&lt;li&gt;服务器进入SYN-RCVD（Received，同步收到）状态&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第三步：客户机收到确认报文段后，向服务器发送确认，并为该TCP连接分配缓存和变量。确认报文段确认位ACK置为1，确认号ack = y + 1，序号seq = x + 1。该报文段可以携带数据，若不携带数据则不消耗序号。这时TCP客户进程进入ESTABLISHED（Established，已建立连接）状态
&lt;ul&gt;
&lt;li&gt;确认段：确认位ACK = 1，确认号ack = y + 1，序号seq = x + 1&lt;/li&gt;
&lt;li&gt;TCP客户分配资源&lt;/li&gt;
&lt;li&gt;客户进入ESTABLISHED（Established，已建立连接）状态。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;tcp连接的释放&#34;&gt;TCP连接的释放&lt;/h3&gt;
&lt;p&gt;TCP连接的任何一方都可以终止连接请求。TCP连接释放的过程称为四次分手。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一步：主动关闭方向被动关闭方发送连接释放报文段，并停止发送数据。连接释放报文段的终止位FIN置1，序号seq = u（前面已传送的数据最后一个字节的序号加1），FIN报文段即使不携带数据，也消耗一个序号。TCP主动关闭方进入FIN-WAIT-1（终止等待1）状态。因为TCP是全双工，一方关闭数据通路，另一方仍可以继续发送数据
&lt;ul&gt;
&lt;li&gt;连接释放报文段：FIN = 1，seq = u&lt;/li&gt;
&lt;li&gt;主动关闭方进入FIN-WAIT-1（终止等待1）状态&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第二步：被动关闭方收到连接释放报文段后发送确认，确认号ack = u + 1，序号seq = v。此时被动关闭方进入CLOSE-WAIT（关闭等待）状态，此时主动关闭方到被动关闭方的连接就释放了，TCP连接处于半关闭状态，此时被动关闭方仍能向主动关闭方发送数据
&lt;ul&gt;
&lt;li&gt;被动确认报文段：ACK = 1，seq = v，ack = u + 1&lt;/li&gt;
&lt;li&gt;被动关闭方进入CLOSE-WAIT（关闭等待）状态&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第三步：若被动关闭方需要释放连接，就通知TCP释放连接。释放连接请求FIN和ACK置为1，ack = u + 1，seq = w（主动关闭方半关闭后，被动关闭方可能还继续发送数据）。这时被动关闭方进入LAST-ACK（最后确认状态）
&lt;ul&gt;
&lt;li&gt;被动释放报文段：FIN = 1，ACK = 1，seq = w，ack = u + 1&lt;/li&gt;
&lt;li&gt;被动关闭方进入LAST-ACK（最后确认状态）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;主动关闭方收到连接释放报文段后，发送确认。确认报文段ACK置为1，确认号ack = w + 1，seq = u + 1，经过时间等待计时器设置的时间2MSL（最长报文段寿命）后，主动关闭方才进入CLOSED（连接关闭）状态
&lt;ul&gt;
&lt;li&gt;主动确认报文段：ACK = 1，seq = u + 1，ack = w + 1&lt;/li&gt;
&lt;li&gt;等待2MSL（最长报文段寿命）后，主动关闭方进入CLOSED（连接关闭）状态&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;tcp建立和释放报文总结&#34;&gt;TCP建立和释放报文总结&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;TCP连接建立：
&lt;ul&gt;
&lt;li&gt;SYN = 1，seq = x&lt;/li&gt;
&lt;li&gt;SYN = 1，ACK = 1，ack = x + 1，seq = y&lt;/li&gt;
&lt;li&gt;ACK = 1，ack = y + 1，seq = x + 1&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;TCP连接释放：
&lt;ul&gt;
&lt;li&gt;FIN = 1，seq = u&lt;/li&gt;
&lt;li&gt;ACK = 1，ack = u + 1，seq = v&lt;/li&gt;
&lt;li&gt;FIN = 1，ACK = 1，ack = u + 1，seq = w&lt;/li&gt;
&lt;li&gt;ACK = 1，ack = u + 1，seq = w + 1&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;tcp-可靠传输&#34;&gt;TCP 可靠传输&lt;/h2&gt;
&lt;p&gt;TCP提供的可靠数据传输服务保证接收方进程从缓存中读出的字节流与发送方发出的字节流完全一致。TCP使用校验、序号、确认和重传的机制来实现TCP的可靠传输。TCP的校验机制和UDP的校验机制一样，除了伪首部的协议字段的17改为6&lt;/p&gt;
&lt;h3 id=&#34;序号&#34;&gt;序号&lt;/h3&gt;
&lt;p&gt;TCP首部的序号字段用来保证数据有序的提交给应用层，TCP把数据视为一个无结构但有序的字节流，序号建立再传送的字节流之上，不建立再报文段上。
TCP连接传送的数据流中的每个字节都编上序号。序号字段是本报文段发送的数据的第一个字节的序号。&lt;/p&gt;
&lt;h3 id=&#34;确认&#34;&gt;确认&lt;/h3&gt;
&lt;p&gt;TCP首部的确认号是期望下一个报文段的数据的第一个字节的序号。表示前面的字节流都已成功接收。
TCP默认使用累积确认，即TCP只确认数据流中至第一个丢失字节为止的字节。如TCP已收到序号为1~3，6~8的字节，那么TCP仍等待序号为4的字节，确认号设置为4。&lt;/p&gt;
&lt;h3 id=&#34;重传&#34;&gt;重传&lt;/h3&gt;
&lt;h4 id=&#34;超时&#34;&gt;超时&lt;/h4&gt;
&lt;p&gt;TCP每发送一个报文段，就对该报文段设置一个计时器。计时器设置到期后仍未收到确认时，就要重传这一报文。
TCP设置了一个自适应算法，记录报文段发出的时间，以及收到的确认时间，这两个时间差称为报文段的往返时间（Round-Trip Time，RTT）。TCP保留了RTT的一个加权平均往返时间$RTT_S$，它会随新策略的RTT的变化而变化。超时计时器设置的超时重传时间（Retransmission Time-Out，RTO）略大于$RTT_S$。&lt;/p&gt;
&lt;h4 id=&#34;冗余ack冗余确认&#34;&gt;冗余ACK（冗余确认）&lt;/h4&gt;
&lt;p&gt;超时触发重传存在的一个问题就是周期性往往很长。发送方通常再超时时间发生之前通过主要冗余ACK来较好的检测丢包情况。
冗余ACK就是再次确认某个报文段的ACK，发送方先前已经收到过该报文段的确认。TCP规定每当比期望值大的失序序号报文段到达时，就发送一个冗余ACK，指明下一个报文的序号。TCP规定当发送方收到同一个报文段的3个冗余ACK时，就认为这个被确认报文段之后的报文已经丢失。&lt;/p&gt;
&lt;h2 id=&#34;tcp-流量控制与拥塞控制&#34;&gt;TCP 流量控制与拥塞控制&lt;/h2&gt;
&lt;h3 id=&#34;tcp流量控制&#34;&gt;TCP流量控制&lt;/h3&gt;
&lt;p&gt;TCP流量控制用来消除发送方（发送速率太快）使接收方缓存区溢出的可能性。流量控制是一个速度匹配服务（匹配发送方的发送速率和接收方的读取速率）
TCP是基于滑动窗口机制来实现流量控制机制的。在通信过程中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;接收方根据根据接收缓存的大小，动态地调制发送方的发送窗口大小，称为&lt;strong&gt;接收窗口rwnd（Receiver Window）&lt;/strong&gt;，即通过调制TCP报文段首部的“窗口”字段值。来限制发送方向网络发送报文的速率。&lt;/li&gt;
&lt;li&gt;发送方根据当前网络的拥塞程度来确认窗口值，称为&lt;strong&gt;拥塞窗口cwnd（Congestion Window）&lt;/strong&gt;。拥塞窗口的大小与网络的带宽和时延有关&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;传输层的数据链路层流量控制的区别是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;传输层定义端到端的流量控制；数据链路层定义网络中相邻两个结点之间的流量控制&lt;/li&gt;
&lt;li&gt;传输层的滑动窗口动态变化；数据链路层的滑动窗口大小不能动态变化&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;tcp拥塞控制&#34;&gt;TCP拥塞控制&lt;/h3&gt;
&lt;p&gt;拥塞控制是防止过多的数据注入网络，保证网络中的路由器和链路不致于过载。出现拥塞时，端点不知道拥塞发生的细节，对通信连接的端点来说，拥塞往往表现为通信时延的增加。
因特网定义了拥塞控制的4种算法：慢开始、拥塞避免、快重传和快恢复。
拥塞控制和流量控制的区别：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;拥塞控制是让网络能够承载现有网络的负荷，是一个全局性的过程，涉及所有的主机、路由器，以及降低网络传输性能有关的所有因素&lt;/li&gt;
&lt;li&gt;流量控制指点到点的通信量的控制，是端到端的问题，所要做的是抑制发送端发送数据的速率，以便接收端来得及接收&lt;/li&gt;
&lt;li&gt;拥塞控制和流量控制都通过控制发送方发送速率来达到控制效果&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;因特网发送方在发送报文段时，既要考虑接收方的接受能力，又要全局考虑不要使网络发生拥塞情况。因此，TCP协议要求发送方维护两个窗口：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;接收窗口rwnd：接收方根据目前接收缓存大小所允诺 的最新窗口值，反映接收方的容量，由接收方根据其放在TCP报文段的首部窗口值通知发送方&lt;/li&gt;
&lt;li&gt;拥塞窗口cwnd：发送方根据自己估算的网络拥塞程度设置窗口值，反映网络当前的容量。只要网络未出现拥塞，窗口就增大一些，以便把更多的分组发送出去。但网络只要出现拥塞，窗口值就减小一些，减少注入网络的数据&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;发送窗口的上限值取决于接收窗口rwnd和拥塞窗口cwnd种较小的一个：$发送窗口上限值 = min[rwnd, cwnd]$&lt;/p&gt;
&lt;h4 id=&#34;慢开始和拥塞避免&#34;&gt;慢开始和拥塞避免&lt;/h4&gt;
&lt;h5 id=&#34;慢开始算法&#34;&gt;慢开始算法&lt;/h5&gt;
&lt;p&gt;在TCP刚建立好时，先令拥塞窗口cwnd = 1，没收到一个对新报文段的确认后，将cwnd加1，用这样的方法逐步增大发送方的cwnd，可使分组注入网络的速率更加合理。
慢开始的慢指TCP开始发送报文段时将cwnd = 1，使得发送方在开始时只发送一个报文段，然后再逐渐增大 cwnd。
慢开始算法每经过一个传输轮次（往返时延RTT），cwnd就会加倍，即cwnd的值随传输轮次线性增长。这样慢开始一直把cwnd增大到一个规定的慢开始门限ssthresh（阈值），然后改用拥塞避免算法。&lt;/p&gt;
&lt;h5 id=&#34;拥塞避免算法&#34;&gt;拥塞避免算法&lt;/h5&gt;
&lt;p&gt;拥塞避免算法的思路是让拥塞窗口cwnd缓慢增大，具体做法时，目的经过一个往返时延RTT就把发送方的拥塞窗口cwnd加1，使拥塞窗口cwnd按线性规律缓慢增长，这比慢开始算法的拥塞窗口增长速率要缓慢的多。
注意慢开始算法是每收到一个确认报文后将cwnd加1，而拥塞避免是每经过一个往返时延RTT时拥塞窗口加1，注意两者的区别。&lt;/p&gt;
&lt;h6 id=&#34;慢开始和拥塞避免的选择&#34;&gt;慢开始和拥塞避免的选择&lt;/h6&gt;
&lt;ul&gt;
&lt;li&gt;当cwnd &amp;lt; ssthresh时，使用慢开始算法&lt;/li&gt;
&lt;li&gt;当cwnd = ssthresh时，即可使用慢开始算法，也可使用拥塞避免算法&lt;/li&gt;
&lt;li&gt;当cwnd &amp;gt; ssthresh时，使用拥塞避免算法&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;网络拥塞的处理&#34;&gt;网络拥塞的处理&lt;/h5&gt;
&lt;p&gt;无论是慢开始还是拥塞避免，只要发送方判断网络出现拥塞（未收到确认），就把慢开始门限ssthresh设置为出现拥塞时发送方cwnd值的一半（不能小于2）。然后将拥塞窗口cwnd重新设置为1，执行慢开始算法。目的是迅速减少主机发送到网络中的分组数，使得发生拥塞的路由器有足够时间把队列中积压的分组处理完毕。
慢开始算法和拥塞避免都使用了“乘法减小”和“加法增大”方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;乘法减小：在拥塞避免阶段，只要出现超时，就把慢开始门限值ssthresh设置为当前拥塞窗口的一半&lt;/li&gt;
&lt;li&gt;加法增大：执行拥塞避免算法后，在收到对所有报文段的确认后，就把拥塞窗口cwnd加1，使拥塞窗口缓慢增大，防止网络过早出现拥塞&lt;/li&gt;
&lt;/ul&gt;
&lt;h6 id=&#34;拥塞处理示例&#34;&gt;拥塞处理示例&lt;/h6&gt;
&lt;ul&gt;
&lt;li&gt;初始时，拥塞窗口设置为1（cwnd = 1），慢开始门限设置为16（ssthresh = 16，根据题目条件）&lt;/li&gt;
&lt;li&gt;慢开始阶段，cwnd初始为1，发送方每收到一个确认ACK，cwnd加1，即经过每个传输轮次RTT，cwnd呈指数规律增长。&lt;/li&gt;
&lt;li&gt;当拥塞窗口cwnd增长到慢开始门限ssthresh时（即cwnd = 16），改用拥塞避免算法，cwnd按线性规律增长&lt;/li&gt;
&lt;li&gt;假如当cwnd = 24时出现超时，更新ssthresh = 12（超时时cwnd的一半），cwnd重置为1，并执行慢开始算法，当cwnd = 12时，改为执行拥塞避免算法。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;快重传和快恢复&#34;&gt;快重传和快恢复&lt;/h4&gt;
&lt;h5 id=&#34;快重传&#34;&gt;快重传&lt;/h5&gt;
&lt;p&gt;在TCP可靠传输机制中，快重传技术使用冗余ACK检测丢包的情况，冗余ACK同时也可以用于网络拥塞情况的检测（丢包意味着网络出现拥塞）。
当发送方连续收到3个重复的ACK报文时，重传对方尚未收到的报文段，不必等待报文段设置的重传计时器超时&lt;/p&gt;
&lt;h5 id=&#34;快恢复&#34;&gt;快恢复&lt;/h5&gt;
&lt;p&gt;快恢复的原理是：当发送方连续收到三个冗余ACK时，执行“乘法减小”算法，把慢开始门限ssthresh设置为此时发送方cwnd的一半，预防网络出现拥塞，但发送方认为网络并未发生严重拥塞（仍可以连续接收多个报文段）。因此快恢复将门限ssthresh设置为cwnd的一半后，将cwnd的值设置为慢开始门限ssthresh的值，然后开始执行拥塞避免算法，使拥塞窗口缓慢的线性增长。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>网络层</title>
        <link>/post/network/%E7%BD%91%E7%BB%9C%E5%B1%82/</link>
        <pubDate>Tue, 11 Oct 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/network/%E7%BD%91%E7%BB%9C%E5%B1%82/</guid>
        <description>&lt;h1 id=&#34;网络层的功能&#34;&gt;网络层的功能&lt;/h1&gt;
&lt;p&gt;网络层的设计思路：向上提供简单灵活的、无连接的、尽最大努力交付的数据报服务。即所传送的分组可能出错、丢失、重复、失序或超时。
这种设计思路的好处是：网络造价大大降低，运行方式灵活，能够适应各种应用。&lt;/p&gt;
&lt;h2 id=&#34;异构网络互联&#34;&gt;异构网络互联&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;异构网络&lt;/strong&gt;：是由不同制造商生产的计算机，网络设备和系统组成的，大部分情况下运行在不同的协议上支持不同的功能或应用。
&lt;strong&gt;网络互联&lt;/strong&gt;：指两个以上计算机网络，通过一定的方法，用中间设备（又称中继系统）相连连接起来，构成更大的网络系统。
在物理层或数据链路层的中继系统只是把一个网络扩大了，但仍是同一个网络，所以并不称为网络互联。网络互连指用路由器进行网络互连和路由选择。
路由器是一台专用计算机，用于在互联网中进行路由选择。&lt;/p&gt;
&lt;h3 id=&#34;中继系统层次&#34;&gt;中继系统层次&lt;/h3&gt;
&lt;p&gt;根据所在的层次，中继系统分为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理层：转发器、集线器&lt;/li&gt;
&lt;li&gt;数据链路层：网桥或交换机&lt;/li&gt;
&lt;li&gt;网络层：路由器&lt;/li&gt;
&lt;li&gt;网络层以上：网关&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;路由与转发&#34;&gt;路由与转发&lt;/h2&gt;
&lt;p&gt;路由器的主要功能：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;路由选择（选择哪一条路径）：按照复杂的分布式算法，根据从各相邻路由器所得到的关于整个网络拓扑的变化情况，动态的改变所选择的路由。
&lt;ul&gt;
&lt;li&gt;根据特定的路由协议构造路由表&lt;/li&gt;
&lt;li&gt;经常或定期的和相邻路由器交换路由信息不断更新和维护路由表&lt;/li&gt;
&lt;li&gt;路由表根据路由选择算法得出&lt;/li&gt;
&lt;li&gt;路由的结构应使网络拓扑结构的变化最优化&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;分组转发：路由器根据转发表将用户的IP数据报从合适的端口转发出去。
&lt;ul&gt;
&lt;li&gt;处理通过路由器的数据流&lt;/li&gt;
&lt;li&gt;主要操作是转发表查询、转发和相关的队列管理和任务调度&lt;/li&gt;
&lt;li&gt;转发表由路由表得出&lt;/li&gt;
&lt;li&gt;转发表的结构应使查找过程最优化&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;拥塞控制&#34;&gt;拥塞控制&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;拥塞&lt;/strong&gt;：在通信子网中，因出现过量的分组而引起网络性能下降的现象称为拥塞。&lt;/p&gt;
&lt;h3 id=&#34;判断拥塞&#34;&gt;判断拥塞&lt;/h3&gt;
&lt;p&gt;通过观察网络的吞吐量和网络负载的关系来判断网络是否进入拥塞状态：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;轻度拥塞：随着网络负载的增加，网络的吞吐量明显小于正常的吞吐量&lt;/li&gt;
&lt;li&gt;拥塞状态：随着网络负载的增加，网络的吞吐量下降&lt;/li&gt;
&lt;li&gt;死锁状态：随着网络负载的增加，网络的吞吐量下降到零&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;流量控制和拥塞控制的区别&#34;&gt;流量控制和拥塞控制的区别&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;流量控制：
&lt;ul&gt;
&lt;li&gt;流量控制指在发送端和接收端之间的点对点通信量的控制&lt;/li&gt;
&lt;li&gt;流量控制是抑制发送端发送数据的速率，以便接收端来得及接收&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;拥塞i控制：
&lt;ul&gt;
&lt;li&gt;拥塞控制必须确保通信子网能够传送待传送的数据&lt;/li&gt;
&lt;li&gt;拥塞控制是一个全局性问题，涉及网络中所有的主机、路由器及导致网络传输能力下降的所有因素&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;拥塞控制方法&#34;&gt;拥塞控制方法&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;开环控制（静态的预防方法）：设计网络时将有关发生拥塞的因素考虑周到，力求在工作时不发生拥塞。
&lt;ul&gt;
&lt;li&gt;一旦系统启动并运行，中途不再需要修改&lt;/li&gt;
&lt;li&gt;开环控制手段包括确定何时接收新流量、何时丢弃分组、丢弃哪些分组，确定何种调控策略&lt;/li&gt;
&lt;li&gt;做决定时不考虑当前网络的状态&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;闭环控制（动态的反馈方法）：事先不考虑有关发生拥塞的各种因素，采用监测网络系统去监视，及时检测哪里发生了拥塞，将拥塞信息传到合适的地方，以便调整网络系统的运行，解决问题
&lt;ul&gt;
&lt;li&gt;基于反馈环路的概念&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;路由算法&#34;&gt;路由算法&lt;/h1&gt;
&lt;p&gt;路由器转发分组是通过路由表转发的，路由表是通过各种算法得到的。&lt;/p&gt;
&lt;h2 id=&#34;静态路由与动态路由&#34;&gt;静态路由与动态路由&lt;/h2&gt;
&lt;p&gt;根据是否随网络的通信量或拓扑结构自适应地进行调制变化来划分，路由算法可以分为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;静态路由算法（非自适应路由算法）：由网络管理员手工配置路由信息。
&lt;ul&gt;
&lt;li&gt;当网络的拓扑结构或链路状态发生变化时，网络管理员需要手工修改路由表中的相关的静态路由信息。&lt;/li&gt;
&lt;li&gt;不能及时适应网络状态的变化。&lt;/li&gt;
&lt;li&gt;适用于简单的小型网络&lt;/li&gt;
&lt;li&gt;简便和开销较小&lt;/li&gt;
&lt;li&gt;在拓扑结构变化不大的网络中运行效果良好&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;动态路由算法（自适应路由算法）：路由器上的路由表项通过相互连接的路由器彼此交换信息，按照一定的算法优化出路由信息，这些路由信息会在一定时间间隙不断更新，以适应不断变化的网络，随时获得最优的寻路效果
&lt;ul&gt;
&lt;li&gt;能改善网络的性能并有助于流量控制&lt;/li&gt;
&lt;li&gt;算法复杂，会增加网络负担&lt;/li&gt;
&lt;li&gt;对路由的动态变化反应太快会引起网络振荡，反应太慢会影响网络路由的一致性&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;距离-向量路由算法&#34;&gt;距离-向量路由算法&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;距离-向量路由算法&lt;/strong&gt;：所有结点定期地将它们的整个路由选择表传送给所有与之直接相邻的结点。&lt;/p&gt;
&lt;h3 id=&#34;路由选择表&#34;&gt;路由选择表&lt;/h3&gt;
&lt;p&gt;这种路由选择表包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;每条路径的目的地（另一结点）&lt;/li&gt;
&lt;li&gt;路径的代价（也称距离）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;路由选择表的更新&#34;&gt;路由选择表的更新&lt;/h3&gt;
&lt;p&gt;在距离-向量路由算法中，所有结点都必须参与距离向量交换，保证路由的有效性和一致性，结点在以下情况下更新它们的路由选择表&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在相邻结点发送过来的信息中，包含一条新的路由，该路由在本结点的路由表中不存在，将该路由添加到路由表中&lt;/li&gt;
&lt;li&gt;在相邻结点发送过来的信息中有一条到达某个目的地的路由，该路由与当前使用的路由相比，距离（或代价）更小。用经过发送路由信息的结点的新路由替换路由表中到达那个目的地的现有路由&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;由于距离-向量路由算法交换路由信息报文的大小与通信子网的结点个数成正比，所有结点都需要参与路由信息交换，所以可能导致通信子网上传送的路由选择信息的数量很容易变得很大，
最常见的距离-向量路由算法是RIP算法，采用“跳数”作为距离的单位。&lt;/p&gt;
&lt;h2 id=&#34;链路状态路由算法&#34;&gt;链路状态路由算法&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;链路状态路由算法&lt;/strong&gt;：每个参与该算法的结点都具有完全的网络拓扑信息，它们执行下述任务：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主动测试所有邻接结点的状态&lt;/li&gt;
&lt;li&gt;定期地将链路状态传播给所有其他结点&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;链路状态路由算法的典型算法是：OSPF算法
链路状态路由算法一个结点检查其所有直接连接链路的状态，并将状态信息发送给网上所有其他结点。当链路状态到达时，路径==结点根据状态信息更新直接的网络拓扑结构和状态，一旦链路状态发生变化，结点利用更新的网络图利用迪杰斯特拉最短路径算法重新计算路由&lt;/p&gt;
&lt;h3 id=&#34;链路状态路由算法的特点&#34;&gt;链路状态路由算法的特点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;通过洪泛法向本系统的所有路由器发送信息：即路由器通过所有端口向所有相邻的路由器发送信息。每个相邻路由器又将此信息发送给其所有相邻的路由器（不再发送给刚发来信息的路由器）&lt;/li&gt;
&lt;li&gt;发送的信息是与路由器相邻的所有路由器的链路状态，只是路由器所知道的部分信息&lt;/li&gt;
&lt;li&gt;当链路状态发生变化时，路由器才向所有路由器发送此信息&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;链路状态路由算法的优点&#34;&gt;链路状态路由算法的优点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;每个路由结点使用相同的原始状态数据独立地计算路径，不依赖中间结点的计算&lt;/li&gt;
&lt;li&gt;链路状态报文不加改变地传播，易查找故障&lt;/li&gt;
&lt;li&gt;当一个结点从其他所有结点接收到报文时，可以在本地立即计算正确的通路，保证一步汇聚&lt;/li&gt;
&lt;li&gt;由于链路状态报文仅传输单个结点关于直接链路的信息，其大小与网络中的路由结点数目无关，因此比距离-向量路由算法具有更好的规模可扩展性&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;链路状态路由算法和距离-向量路由算法的比较&#34;&gt;链路状态路由算法和距离-向量路由算法的比较&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;距离-向量路由算法：
&lt;ul&gt;
&lt;li&gt;每个结点仅与其直接相邻结点交谈&lt;/li&gt;
&lt;li&gt;为它的相邻结点提供从自己到网络中所有其他结点的最低距离（代价）估计&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;链路状态路由算法：
&lt;ul&gt;
&lt;li&gt;每个结点通过广播的方式与所有其他结点交谈&lt;/li&gt;
&lt;li&gt;仅告诉其他结点与其直接相连的链路的状态&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;层次路由&#34;&gt;层次路由&lt;/h2&gt;
&lt;p&gt;当网络规模扩大时，路由器的路由表将成比例的增大，会浪费更多的网络系统资源，因此路由选择必须按照层次的方式进行划分。
因特网将整个互联网划分为许多较小的自治系统（一个自治系统包含多个局域网），每个自治系统自主地决定本系统内采用何种路由选择协议，两个自治的系统如果需要通信，需要在两个自治系统之间的协议屏蔽这些差异&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;内部网关协议（IGP，也称域内路由选择）：一个自治系统内部所使用的路由选择协议，包括RIP（距离-向量路由算法）和OSPF（链路状态路由算法）&lt;/li&gt;
&lt;li&gt;外部网关协议（EGP，也称域间路由选择）：用在不同自治系统的路由器之间交换路由信息，并负责为分组在不同自治系统之间选择最优的路径，包括BGP&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;ipv4&#34;&gt;IPv4&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;网际互连协议（IP协议）&lt;/strong&gt;：定义数据传送的基本单元为IP分组及其确切的数据格式。IP协议根据端到端的设计原则。为主机提供一种无连接、不可靠的、尽力而为的数据包传输服务。IP地址和MAC地址相比，IP地址是互联网的逻辑地址，是根据机构分配的可变化的；MAC地址是网卡的物理地址，是厂商出厂时就设置好了的。
&lt;strong&gt;IPv4&lt;/strong&gt;：IP协议第4版。&lt;/p&gt;
&lt;h2 id=&#34;ipv4-分组&#34;&gt;IPv4 分组&lt;/h2&gt;
&lt;h3 id=&#34;ipv4分组的格式&#34;&gt;IPv4分组的格式&lt;/h3&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./IP数据报.png&#34; title=&#34;&#34; alt=&#34;IP数据报&#34;&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;版本（4bit）：IP协议的版本，目前广泛使用的版本号为4。&lt;/li&gt;
&lt;li&gt;首部长度（4bit）：表示IP数据报首部的长度，表示的最大十进制数为15，以32（4B）为单位，最大值为60B（$15 \times 4$B）。&lt;/li&gt;
&lt;li&gt;总长度（16bit）：首部和数据之和（IP数据报）的长度，单位为字节，因此数据报的最大长度为$2^{16} - 1 = 65535$B。以太网帧的最大传送单元（MTU）为1500B，因此当一个IP数据报成帧时，数据报的总长度不能超过下面的数据链路层的MTU值。&lt;/li&gt;
&lt;li&gt;标识（16bit）：是一个计数器，每产生一个数据报就加1，并赋值给标识字段。当一个数据报长度超过网络的MTU时，必须分片，此时每个数据报片都会复制一次标识号，以便能正确的重装成原来的数据报&lt;/li&gt;
&lt;li&gt;标志（3bit）：标志字段的最低位为MF，MF = 1时表示后面还有分片，MF = 0表示是最后一个分片。标志字段的中间位位DF，只有当DF = 0 时才允许分片&lt;/li&gt;
&lt;li&gt;片偏移（13bit）：指出分组在分片后，某片在原分组中的相对位置。片偏移以8B为单位，除最后一个分片外，每个分片的长度一定是8B的整数倍&lt;/li&gt;
&lt;li&gt;生存时间（TTL，8bit）：数据报在网络中可通过路由数的最大值，标识分组在网络中的寿命，确保分组不会永远在网络中循环。路由器在转发分组时，会将TTL减1，当TTL为0时，丢弃分组。&lt;/li&gt;
&lt;li&gt;协议（8bit）：指出分组携带的数据使用何种协议。其中值为6表示TCP、值为17表示UDP。&lt;/li&gt;
&lt;li&gt;首部校验和（16bit）：只校验首部，不校验数据部分&lt;/li&gt;
&lt;li&gt;源地址（4B）：标识发送方IP地址&lt;/li&gt;
&lt;li&gt;目的地址（4B）：标识接收方IP地址&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ip数据报分片&#34;&gt;IP数据报分片&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;分片&lt;/strong&gt;：一个数据链路层帧能承载的最大数据量称为最大传送单元（MTU）。当一个数据报长度超过网络的MTU时，就需要将IP数据报的分组分装在较小的IP数据报中，这些较小的数据报称为分片。&lt;/p&gt;
&lt;p&gt;源主机创建一个数据报并为其加上标识号（每创建一个数据报，标识号加1），当路由器需要将一个数据报分组时，根据IP数据报的标识号，标志等信息将数据报分为较小的分组：若标志的中间位DF（Don&amp;rsquo;t Fragment） = 0，则可以对数据报进行分组，将原数据报分为较小的分组，每个IP数据报具有相同的标识号，设置各个分组的片偏移（片偏移以8B为单元，除最后一个分组外，其余分组的长度一定是8B的整数倍），其中标志的最低位MF（More Fragment） = 1，表示该分组还有分组，标志最低位MF = 0，表示为原分组的最后一片。
在所有分片到达目的主机后，目的主机根据标识号，标志和片偏移将分片组装成原数据报。&lt;/p&gt;
&lt;h2 id=&#34;ipv4-地址与-nat&#34;&gt;IPv4 地址与 NAT&lt;/h2&gt;
&lt;h3 id=&#34;ipv4地址&#34;&gt;IPv4地址&lt;/h3&gt;
&lt;p&gt;IP地址分为网络号和主机号：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;网络号：标识主机或路由器所连接的网络，一个网络号在互联网中是唯一的&lt;/li&gt;
&lt;li&gt;主机号：标识主机或路由器的逻辑地址，一台主机号在其所在的网络范围里是唯一的&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ipv4地址的分类&#34;&gt;IPv4地址的分类&lt;/h4&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./IPv4地址分类.png&#34; title=&#34;&#34; alt=&#34;IPv4地址分类&#34;&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;A：(1.0.0.0-126.0.0.0)（默认子网掩码：255.0.0.0）
&lt;ul&gt;
&lt;li&gt;该类IP地址的最前面为“0”&lt;/li&gt;
&lt;li&gt;网络号取值为1~126&lt;/li&gt;
&lt;li&gt;大型网络&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;B：(128.0.0.0-191.255.0.0)（默认子网掩码：255.255.0.0 ）
&lt;ul&gt;
&lt;li&gt;该类IP地址的最前面为“10”&lt;/li&gt;
&lt;li&gt;网络号取值为128.0~191.255&lt;/li&gt;
&lt;li&gt;中等规模&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;C：(192.0.0.0-223.255.255.0)（子网掩码：255.255.255.0
&lt;ul&gt;
&lt;li&gt;该类IP地址的最前面为“110”&lt;/li&gt;
&lt;li&gt;网络号取值为192.0.0~223.255.255&lt;/li&gt;
&lt;li&gt;小型网络。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;D：多播地址
&lt;ul&gt;
&lt;li&gt;该类IP地址的最前面为“1110”&lt;/li&gt;
&lt;li&gt;用于多路广播用户&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;E：保留地址
&lt;ul&gt;
&lt;li&gt;该类IP地址的最前面为“11110”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;常用三种类比IP地址的使用范围：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;网络类别&lt;/th&gt;
&lt;th&gt;最大可用网络数&lt;/th&gt;
&lt;th&gt;第一个可用网络号&lt;/th&gt;
&lt;th&gt;最后一个可用的网络号&lt;/th&gt;
&lt;th&gt;每个网络中的最大主机数&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;$2^7 - 2$&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;126&lt;/td&gt;
&lt;td&gt;$2^{24} - 2$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;$2^{14}$&lt;/td&gt;
&lt;td&gt;128.0&lt;/td&gt;
&lt;td&gt;191.255&lt;/td&gt;
&lt;td&gt;$2^{16} - 2$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;C&lt;/td&gt;
&lt;td&gt;$2^{21}$&lt;/td&gt;
&lt;td&gt;192.0.0&lt;/td&gt;
&lt;td&gt;223.255.255&lt;/td&gt;
&lt;td&gt;$2^{8} - 2$&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;特殊ip地址&#34;&gt;特殊IP地址&lt;/h4&gt;
&lt;p&gt;在各类IP地址中，有些IP地址具有特殊用途，不用做主机的IP地址：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主机号全为0：表示本网络本身&lt;/li&gt;
&lt;li&gt;主机号全为1：表示本网络的广播地址，又称直接广播地址&lt;/li&gt;
&lt;li&gt;127.x.x.x：表示为环回自检地址，又称本地回环地址，不属于任何一个有类别地址类。它代表设备的本地虚拟接口，所以默认被看作是永远不会宕掉的接口&lt;/li&gt;
&lt;li&gt;0.0.0.0：表示本网络上的本主机&lt;/li&gt;
&lt;li&gt;255.255.255.255：表示整个TCP/IP网络的广播地址，又称受限广播地址。实际使用时，由于路由器对广播域的隔离，255.255.255.255等效为本网络的广播地址&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ip地址的重要特点&#34;&gt;IP地址的重要特点&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;因为每个IP地址都由网络号和主机号组成，所以IP地址是一种分等级的地址结构
&lt;ul&gt;
&lt;li&gt;IP地址管理机构分配IP地址时只分配网络号，主机号由网络单位自行分配，方便IP的管理&lt;/li&gt;
&lt;li&gt;路由器仅根据目的主机所连接的网络号来转发分组，减小了路由表所占用的存储空间&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;IP地址是表示一台主机（或路由器）和一条链路的接口。当一台主机同时连接到两个网络时，该主机就必须分配两个相应的IP地址，每个IP地址的网络号必须与所在网络的网络号相同，因此IP网络上一个路由器必然至少有两个IP地址（和其他网络相连构成更大的网络）&lt;/li&gt;
&lt;li&gt;用转发器或桥接器（网桥）连接的若干LAN仍然是同一网络，因此该LAN中所有主机的IP地址必须相同&lt;/li&gt;
&lt;li&gt;在IP地址中，所有分配到网络号的网络都是平等的&lt;/li&gt;
&lt;li&gt;在同一个局域网上的主机或路由器的IP地址的网络号必须是一样的，路由器总是具有两个或两个以上的IP地址，路由器的每个端口都有一个不同网络号的IP地址&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;网络地址转换nat&#34;&gt;网络地址转换（NAT）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;网络地址转换&lt;/strong&gt;：指通过将专用网络地址转换为共用地址从而对外隐藏内部管理的IP地址。使得整个专用网只需要一个全球IP地址就可以和因特网连通，由于专用网本地IP地址可重用，所以NAT节省了IP地址的消耗。隐藏了内部网络结构，从而降低了内部网络受到攻击的风险。&lt;/p&gt;
&lt;h4 id=&#34;私有ip地址&#34;&gt;私有IP地址&lt;/h4&gt;
&lt;p&gt;未来网络安全，将部分IP地址划分为私有IP地址（可重用IP地址），私有IP地址只用于LAN，不用于WAN，并且允许私有IP地址被LAN重复使用，有效解决了IP地址不足的问题。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A类：1个私有网段：&lt;strong&gt;10&lt;/strong&gt;.0.0.0~&lt;strong&gt;10&lt;/strong&gt;.255.255.255&lt;/li&gt;
&lt;li&gt;B类：16个私有网段：&lt;strong&gt;172.16&lt;/strong&gt;.00~&lt;strong&gt;172.31&lt;/strong&gt;.255.255&lt;/li&gt;
&lt;li&gt;C类：256个私有网段：&lt;strong&gt;192.168.0&lt;/strong&gt;.0~&lt;strong&gt;192.168.255&lt;/strong&gt;.255&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;采用私有IP地址的互联网称为专用互联网或本地互联网。在因特网中，对于目的地址是私有地址的数据报一律不转发。
使用NAT时需要在专用网连接到因特网的路由器上安装NAT软件，NAT路由器至少有一个有效的外部全球IP地址，使用本地地址的主机和外界通信时，NAT路由器使用NAT转换表进行本地IP地址和全球IP地址的转换。NAT转换表中存放着 &lt;strong&gt;{本地IP地址：端口}&lt;/strong&gt; 到 &lt;strong&gt;{全球IP地址：端口}&lt;/strong&gt; 的映射。通过这种映射的方式，可让多个私有IP地址映射到一个全球IP地址上。&lt;/p&gt;
&lt;h2 id=&#34;子网划分与子网掩码cidr&#34;&gt;子网划分与子网掩码、CIDR&lt;/h2&gt;
&lt;h3 id=&#34;子网划分&#34;&gt;子网划分&lt;/h3&gt;
&lt;p&gt;两级IP地址的缺点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IP地址空间的利用率有时很低&lt;/li&gt;
&lt;li&gt;给每个物理网络分配一个网络号会使路由表变得太大而使网络性能变坏&lt;/li&gt;
&lt;li&gt;两级IP地址不够灵活&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;子网划分&lt;/strong&gt;：为了解决两级IP地址的缺点，在IP地址中增加一个”子网号字段“，使两级IP地址变成三级IP地址，这种做法称为子网划分。&lt;/p&gt;
&lt;h4 id=&#34;子网划分的基本思路&#34;&gt;子网划分的基本思路&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;子网划分是一个单位内部的事情，单位对外仍然表现为没有划分子网的网络&lt;/li&gt;
&lt;li&gt;从主机号借用若干比特作为子网号，三级IP地址结构如下：&lt;strong&gt;IP地址 = {&amp;lt;网络号&amp;gt;, &amp;lt;子网号&amp;gt;, &amp;lt;主机号&amp;gt;}&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;凡是从其他网络发给本单位某台主机的IP数据报，仍通过IP数据报的网络号，先发到本单位网络上的路由器，路由器在收到IP数据报后，根据目的网络号和子网号找到目的子网，把IP数据报直接交付给目的主机&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;子网掩码&#34;&gt;子网掩码&lt;/h4&gt;
&lt;p&gt;为了告诉主机或路由器对网络进行的子网划分，使用子网掩码表示对原网络主机号的借位。
子网掩码是一个与IP地址相对应的、长32bit的二进制串，其中”1“对应于IP地址中的网络号及子网号，而”0“对应主机号，计算机只需要将IP地址和其对应的子网掩码地址逐位”与“运算，就可以得到相应子网的网络地址
在使用子网掩码的情况下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一台主机在设置IP地址信息的同时，必须设置子网掩码&lt;/li&gt;
&lt;li&gt;同属于一个子网的所有主机及路由器的相应端口，必须设置相同的子网掩码&lt;/li&gt;
&lt;li&gt;路由器的路由表中，包含的主要内容有目的网络地址、子网掩码、下一跳地址&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;无分类编码cidr&#34;&gt;无分类编码CIDR&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;无分类域间路由选择CIDR&lt;/strong&gt;：在变长子网掩码的基础上提出的一种消除传统A、B、C类网络划分，并且可以在软件的支持下实现超网构造的一种IP地址的划分方法。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如一个单位需要2000个地址，那么就给它分配2048地址的块，即8个连续的C类网络，而不是一个完全的B类地址，这样就可以大幅度提高IP地址的利用率，减小路由器的路由表大小，提高路由转发能力&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;CIDR消除了传统A、B、C类地址和子网划分的概念，因此可以更有效的分配IP地址，CIDR使用”网络前缀“的概念代替子网络的概念，网络前缀的位数不固定，可以任意选取，CIDR的记法为：&lt;strong&gt;IP = {&amp;lt;网络前缀&amp;gt;, &amp;lt;主机号&amp;gt;}&lt;/strong&gt;
CIDR还使用”斜线记法“（或称CIDR记法）：IP地址/网络前缀所占比特数
CIDR地址块中的地址数一定是2的整数次幂，实际可指派的地址数是：$2^N - 2$，$N$表示主机号的位数，主机号全0表示网络号，全1表示广播地址。网络前缀越短，地址库所含地址数越多
&lt;strong&gt;最长前缀匹配（最佳匹配）&lt;/strong&gt;：使用CIDR时，路由表中的每个项目由”网络前缀”和“下一跳地址”组成。查找路由表时会得到不止一个匹配结果，应当从匹配结果中选择最长的网络前缀的路由，因为网络前缀越长，地址块越小，路由就越具体。
CIDR查找路由方法：为了更有效的查找最长前缀匹配，通常将CIDR路由表放在一种层次的数据结构中，自上而下的按层次查找，通常采用的数据结构是二叉线索树。&lt;/p&gt;
&lt;h3 id=&#34;网络层转发分组的过程&#34;&gt;网络层转发分组的过程&lt;/h3&gt;
&lt;p&gt;分组转发都是基于目的主机所在的网络。当分组到达路由器后，路由器根据目的IP地址的网络前缀来查找转发表，确认下一跳应当到那个路由器。因此，在转发表中，每条路由必须有下面的信息：（目的地址， 下一跳地址）&lt;/p&gt;
&lt;h4 id=&#34;特殊路由&#34;&gt;特殊路由&lt;/h4&gt;
&lt;p&gt;此外，转发表还可以增加两种特殊的路由：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主机路由：对特定目的主机的IP地址专门指明一个路由，以方便网络管理员控制和测试网络。&lt;/li&gt;
&lt;li&gt;默认路由：用特殊前缀0.0.0.0/0表示默认路由，任何目的地址进行按位与运算结果必然全是0，目的网络是其他网络（不在转发表中），就一律使用默认路由。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;路由器执行的分组转发算法&#34;&gt;路由器执行的分组转发算法&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;从收到的IP分组的首部提取目的主机的IP地址（目的地址）&lt;/li&gt;
&lt;li&gt;若查找到特点主机路由，就按照这条路由的下一跳转发分组；否则从转发表按前缀长度的顺序开始检查&lt;/li&gt;
&lt;li&gt;将查找的数据的子网掩码与目的地址进行按位与运算，若运算结果与本行的前缀匹配，则查找结束，将接收的分组通过指定接口交付到下一跳主机上；否则，对转发表下一行数据进行检查，重新执行本步骤，若无下一行，执行下一步&lt;/li&gt;
&lt;li&gt;若转发表有一个默认路由，把分组传送到默认路由；否则，报告转发分组错误&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;arp-协议dhcp-协议与-icmp-协议&#34;&gt;ARP 协议、DHCP 协议与 ICMP 协议&lt;/h2&gt;
&lt;h3 id=&#34;ip地址和硬件地址mac地址&#34;&gt;IP地址和硬件地址（MAC地址）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;IP地址&lt;/strong&gt;：网络层使用的地址，具有分层结构。是主机的逻辑地址。
&lt;strong&gt;硬件地址（MAC地址）&lt;/strong&gt;：数据链路层使用的地址，是平面式的地址。是主机的真实地址。&lt;/p&gt;
&lt;p&gt;IP数据报封装成帧后，在数据链路层是看不到IP地址的。因此，在网络中，使用IP地址来完成寻址。寻址时，每个路由器依据其路由表选择目标网络。IP分组到达目标网络后，改为在目标网络中通过数据链路层的MAC地址以广播的方式寻址，这样可以提高路由选择的利用率。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IP层抽象的互联网上只能看到IP数据报&lt;/li&gt;
&lt;li&gt;IP数据报首部有源IP地址，但是路由器只根据目的IP地址进行转发&lt;/li&gt;
&lt;li&gt;在局域网的数据链路层，只能看到MAC地址，IP数据报被封装在MAC帧中，通过路由器转发IP分组时，IP分组在每个路由器都会被解封装和重新封装，所以其MAC帧首部的源地址和目的地址会不断发生变化，所以MAC地址无法跨网络通信&lt;/li&gt;
&lt;li&gt;尽管互联在一起的网络的硬件地址体系各不相同，但IP曾抽象的互联网缺屏蔽了下层的复杂的细节，这样我们在网络层讨论问题，就得到了统一。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;地址解析协议arp&#34;&gt;地址解析协议（ARP）&lt;/h3&gt;
&lt;p&gt;无论网络层使用什么协议，在数据链路层上传送数据帧时，都需要使用硬件地址，所以需要一种方法完成IP地址和MAC地址的映射。
&lt;strong&gt;地址解析协议（Address Resolution Protocol，ARP）&lt;/strong&gt;：完成IP地址和MAC地址的映射。每台主机都存在一个ARP高速缓存，用来存放本局域网各主机和路由器的IP地址到MAC地址的映射，称为ARP表，通过ARP来动态维护ARP表。&lt;/p&gt;
&lt;h4 id=&#34;arp工作原理&#34;&gt;ARP工作原理&lt;/h4&gt;
&lt;p&gt;ARP工作在网络层，其工作原理为：主机如果欲向本局域网上的某台主机B发送IP数据报，先在其ARP高速缓存中查看有无主机B：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;有主机B：查看其对应的MAC地址，将MAC地址写入MAC帧，通过局域网将该MAC帧发往对应的主机&lt;/li&gt;
&lt;li&gt;无主机B：通过使用目的MAC地址为FF-FF-FF-FF-FF-FF的帧来封装并广播ARP请求分组，使同一个局域网的所有主机都收到此ARP请求。主机B收到该ARP请求后，单独向主机A发送ARP响应分组，分组中包含主机B的IP与MAC地址的映射关系，主机A收到响应分组后将其写入ARP缓存，然后按查询到的MAC地址发送MAC帧&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ARP由于“看到了”IP地址，所以其工作在网络层&lt;/p&gt;
&lt;h4 id=&#34;arp工作的四种情况&#34;&gt;ARP工作的四种情况&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;发送方是&lt;strong&gt;主机&lt;/strong&gt;，把IP数据报发送到&lt;strong&gt;本网络&lt;/strong&gt;上的另一台主机：这时主机在本网络通过ARP找到目的主机的硬件地址&lt;/li&gt;
&lt;li&gt;发送方是&lt;strong&gt;主机&lt;/strong&gt;，把IP数据报发送到&lt;strong&gt;另一个网络&lt;/strong&gt;上的另一台主机：主机在本网络通过ARP找到与本网络连接的路由器的硬件地址，剩下的工作由路由器完成&lt;/li&gt;
&lt;li&gt;发送方是&lt;strong&gt;路由器&lt;/strong&gt;，把IP数据报发送到&lt;strong&gt;与路由器直接连通的网络&lt;/strong&gt;上的一台主机：路由器在目标网络通过ARP找到目标主机的硬件地址&lt;/li&gt;
&lt;li&gt;发送方是&lt;strong&gt;路由器&lt;/strong&gt;，把IP数据报发送到&lt;strong&gt;不与路由器直接连通的网络&lt;/strong&gt;上的一台主机：路由器通过ARP找到间接连通的路由器的硬件地址，剩下的工作由间接路由器完成&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;动态主机配置协议dhcp&#34;&gt;动态主机配置协议（DHCP）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;动态主机配置协议（Dynamic Host Configuration Protocol，DHCP）&lt;/strong&gt;：常用于给主机动态地分配IP地址，提供了即插即用的联网机制，这种机制允许一台计算机加入新的网络和获取IP地址而不需要手工配置。DHCP是基于UDP的应用层协议。&lt;/p&gt;
&lt;h4 id=&#34;dhcp的工作原理&#34;&gt;DHCP的工作原理&lt;/h4&gt;
&lt;p&gt;DHCP使用客户/服务器（C/S）模式。需要IP地址的主机在启动时向DHCP服务器广播发送发现报文，这时主机就成为DHCP服务器的客户，DHCP服务器先在其数据库查找该计算机的配置信息，若找到，返回找到的信息；若找不到，从服务器的IP地址池中区一个地址分配给该计算机。DHCP服务器的回答报文称为提供报文。
DHCP允许网络配置多台服务器，当DHCP客户机发出“DHCP发现”报文时，可能会收到多个应答，这时，DHCP客户机以最先到达的为准。
DHCP服务器分配给DHCP客户的IP地址是临时的，因此DHCP客户只有在一段有限的时间内才能使用这个分配的IP地址。DHCP称这段时间为租用期，租用期的值由DHCP服务器自己决定，DHCP客户可可以在自己发送的报文中提出对租用期的要求。&lt;/p&gt;
&lt;h3 id=&#34;网际控制报文协议icmp&#34;&gt;网际控制报文协议（ICMP）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;网际控制报文协议（Internet Control Message Protocol，ICMP）&lt;/strong&gt;：为了提供IP数据报交付成功的机会，在网络层使用网际控制报文协议让主机或路由器报告差错和异常情况。ICMP是IP层协议，ICMP作为IP层数据报的数据，加上数据报的首部，组成IP数据报发送出去。
ICMP报文分为ICMP差错报文和ICMP询问报文&lt;/p&gt;
&lt;h4 id=&#34;icmp差错报文&#34;&gt;ICMP差错报文&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;ICMP差错报文&lt;/strong&gt;：用于目标主机或到目标主机路径上的路由器向源主机报告差错和异常情况。&lt;/p&gt;
&lt;h5 id=&#34;icmp差错情况&#34;&gt;ICMP差错情况&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;终点不可达：路由器或主机不能交付数据报时，向源点发送终点不可达报文&lt;/li&gt;
&lt;li&gt;源点抑制：当路由器或主机由于拥塞丢弃数据报时，向源点发送源点抑制报文，使源点把发送数据报速率放慢&lt;/li&gt;
&lt;li&gt;时间超过：
&lt;ul&gt;
&lt;li&gt;当路由器收到生存时间（TTL）为零的数据报时，丢弃数据报并向源点发送时间超过报文。&lt;/li&gt;
&lt;li&gt;当终点在预定时间不能收到一个数据报的全部数据报片时，把已收到的数据报片都丢弃，并向源点发送时间超过报文&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;参数问题：当路由器或目的主机收到的数据报的首部有字段的值不正确时，丢弃该数据报，并向源点发送参数问题报文&lt;/li&gt;
&lt;li&gt;改变路由（重定向）：路由器把改变路由报文发送给主机，让主机知道下次应将数据报发给另外的路由器&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;不应发送icmp差错报文的情况&#34;&gt;不应发送ICMP差错报文的情况&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;对ICMP差错报告报文不在发送ICMP差错报告报文&lt;/li&gt;
&lt;li&gt;对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文&lt;/li&gt;
&lt;li&gt;对具有组播地址的数据报都不发送ICMP差错报告报文&lt;/li&gt;
&lt;li&gt;对具有特殊地址的数据报不发生ICMP差错报告报文&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;icmp询问报文&#34;&gt;ICMP询问报文&lt;/h4&gt;
&lt;p&gt;ICMP常见的询问报文：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;回送请求和回答报文&lt;/li&gt;
&lt;li&gt;时间戳请求和回答报文&lt;/li&gt;
&lt;li&gt;地址掩码请求和回答报文&lt;/li&gt;
&lt;li&gt;路由器询问和通告报文&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;icmp的常见应用&#34;&gt;ICMP的常见应用&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;分组网间探测Ping（测试两条主机之间的连通性）：使用ICMP回送请求和回答报文&lt;/li&gt;
&lt;li&gt;路由跟踪（跟踪分组经过的路由）：使用ICMP时间超过报文&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;ipv6&#34;&gt;IPv6&lt;/h1&gt;
&lt;p&gt;随着互联网和物联网的发展，IPv4面临地址耗尽问题。
解决“IP地址耗尽”问题的措施：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用无类别编制CIDR，使IP地址的分配更加合理&lt;/li&gt;
&lt;li&gt;采用网络地址转换（NAT）以节省全球IP地址&lt;/li&gt;
&lt;li&gt;采用具有更大地址空间的新版本IPv6&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中，前两种都是在延长Ipv4地址分配完毕的时间，只有第三种方法才能从根源上解决IP地址耗尽的问题。&lt;/p&gt;
&lt;h2 id=&#34;ipv6-的主要特点&#34;&gt;IPv6 的主要特点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;更大的地址空间。IPv6将地址从IPv4的32位（4B）增大到128位（16B）&lt;/li&gt;
&lt;li&gt;扩展的地址层次结构&lt;/li&gt;
&lt;li&gt;灵活的首部格式&lt;/li&gt;
&lt;li&gt;改进的选项&lt;/li&gt;
&lt;li&gt;允许协议继续扩充&lt;/li&gt;
&lt;li&gt;支持即插即用（即自动配置）&lt;/li&gt;
&lt;li&gt;支持资源的预分配&lt;/li&gt;
&lt;li&gt;IPv6只有在包的源结点才能分片，是端到端的，传输路径中的路由器不能分片。&lt;/li&gt;
&lt;li&gt;IPv6的首部长度必须是8B的整数倍，而IPv4首部是4B的整数倍&lt;/li&gt;
&lt;li&gt;增大了安全性。身份验证和保密功能是IPv6的关键特性&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;IPv6和IPv4是不兼容的，但与其他的因特网协议兼容，只是在少数地方做必要修改（为了处理长的地址）&lt;/p&gt;
&lt;h3 id=&#34;ipv6满足预定目标体现在&#34;&gt;IPv6满足预定目标体现在&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;IPv6有比IPv4更长的地址。IPv6的地址用16个字节表示，地址空间是IPv4的$2^{128 - 21} = 2^{96}$倍&lt;/li&gt;
&lt;li&gt;IPv6简化了IP分组头，包含8个域（IPv4包含12个域）。使路由器可以更快地处理分组，改善吞吐量。&lt;/li&gt;
&lt;li&gt;更好地支持选项，之前的一些必要段现在变成了可选段，加快分组的处理速度&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ipv6-地址&#34;&gt;IPv6 地址&lt;/h2&gt;
&lt;h3 id=&#34;ipv6的目的地址类型&#34;&gt;IPv6的目的地址类型&lt;/h3&gt;
&lt;p&gt;IPv6的目的地址可以是下面三种基本类型地址之一：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;单播：传统的点对点通信&lt;/li&gt;
&lt;li&gt;多播：一对多点通信，分组被交付给一个分组的每台计算机&lt;/li&gt;
&lt;li&gt;任播：IPv6新增类型。任播的目的站是一组计算机，但数据报在交付时只交给一台计算机，通常是距离或跳数最近的一台计算机&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ipv6的表示&#34;&gt;IPv6的表示&lt;/h3&gt;
&lt;p&gt;若是IPv6仍使用IPv4的点分十进制表示法，那么地址写起来将会特别长。IPv6标准中指定了一种比较紧凑的表示法：把地址中的每4位用一个十六进制数表示，并用冒号分割每16位。如：ABCD:AA12:0216:0010:BBAE:0394:BADA:9527
通常IPv6还可以进一步缩写，每16位域的开头有一些0时，可以省略多余的0，但是每个域内至少有一个数字。如：4BF5:0000:0000:0000:ABCE:0527:000B:9527可以缩写为：4BF5:0:0:0:ABCE:527:B:9527
当IPv6中出现连续的0值域时，可以进一步缩写，这些域可以使用双冒号（::）缩写。双冒号在一个地址中只能出现一次。如：4BF5:0:0:0:ABCE:527:B:9527可以进一步缩写为：4BF5::ABCE:527:B:9527&lt;/p&gt;
&lt;h3 id=&#34;ipv6的分级结构&#34;&gt;IPv6的分级结构&lt;/h3&gt;
&lt;p&gt;IPv6扩展了IPv4的分级结构，IPv6使用3个等级：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;顶级：全球都知道的公告拓扑&lt;/li&gt;
&lt;li&gt;场点级：指明单个场点&lt;/li&gt;
&lt;li&gt;第三级：指明单个网络接口&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ipv4向ipv6的过渡&#34;&gt;IPv4向IPv6的过渡&lt;/h3&gt;
&lt;p&gt;IPv4向IPv6的过渡使用逐步演进的办法，使新安装的IPv6系统能够向后兼容。IPv6系统必须能够接收和转发IPv4分组，能够为IPv4分组进行分组路由选择。
IPv4向IPv6的过渡可以使用双协议栈和隧道技术两种策略&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;双协议栈：一台设备同时装有IPv4和IPv6协议栈
&lt;ul&gt;
&lt;li&gt;路由器：不同接口分别配置IPv4地址和IPv6地址&lt;/li&gt;
&lt;li&gt;计算机：同时拥有IPv4和IPv6地址&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;隧道技术：将整个IPv6数据报封装到IPv4数据报的数据部分，使得IPv6数据报可以在IPv4网络的隧道中传输&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;路由协议&#34;&gt;路由协议&lt;/h1&gt;
&lt;h2 id=&#34;自治系统as&#34;&gt;自治系统（AS）&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;自治系统（Autonomous System，AS）&lt;/strong&gt;：单一技术管理下的一组路由器，这些路由器使用一种AS内部的路由选择协议和共同的度量来确定分组在该AS内的路由，同时使用一种AS之间的路由选择协议来确定分组在AS之间的路由。
一个自治系统的所有网络都由一个行政单位管辖，一个自治系统的所有路由器在本自治系统内都必须是连通的。&lt;/p&gt;
&lt;h2 id=&#34;域内路由与域间路由&#34;&gt;域内路由与域间路由&lt;/h2&gt;
&lt;p&gt;自治系统内部的路由选择称为域内路由选择，自治系统之间的路由选择称为域间路由选择。&lt;/p&gt;
&lt;h3 id=&#34;内部网关协议igp&#34;&gt;内部网关协议（IGP）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;内部网关协议（Interior Gateway Protocol，IGP）&lt;/strong&gt;：内部网关协议是在一个自治系统内部使用的路由选择协议，它与互联网中其他自治系统选用什么路由选择协议无关。主要有RIP、OSPF协议等&lt;/p&gt;
&lt;h3 id=&#34;外部网关协议egp&#34;&gt;外部网关协议（EGP）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;外部网关协议（External Gateway Protocol，EGP）&lt;/strong&gt;：源站和目的站处于不同的自治系统中，当数据报传到一个自治系统的边界时（两个自治系统可能使用不同的IGP），就需要使用一种协议将路由选择信息传递到另一个自治系统中。这样的协议技术外部网关协议（EGP）。主要由BGP协议等&lt;/p&gt;
&lt;h2 id=&#34;路由信息协议rip-in-igp&#34;&gt;路由信息协议（RIP $\in$ IGP）&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;路由信息协议（Routing Information Protocol，RIP）&lt;/strong&gt;：内部网关协议中最先得到广泛应用的协议。RIP是一种分布式的基于&lt;strong&gt;距离向量的路由选择协议&lt;/strong&gt;，最大的优点是简单。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;优点：
&lt;ul&gt;
&lt;li&gt;实现简单&lt;/li&gt;
&lt;li&gt;开销小&lt;/li&gt;
&lt;li&gt;收敛速度块&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;缺点：
&lt;ul&gt;
&lt;li&gt;RIP限制了网络的规模，能使用的最大距离为15跳&lt;/li&gt;
&lt;li&gt;路由器之间交换的是路由器的完整路由表，当网络规模越大，开销越大&lt;/li&gt;
&lt;li&gt;网络出现故障时，会出现慢收敛现象（需要较长时间才能将此信息传送到所有路由器），即“坏消息传得慢”，使更新过程的收敛时间长&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;rip规定&#34;&gt;RIP规定&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;网络中的每个路由器都要维护从它自身到其他每个目的网络的距离记录&lt;/li&gt;
&lt;li&gt;距离也称跳数，规定从一个路由器到之间连接的网络的距离为1，每经过一个路由器，距离加1&lt;/li&gt;
&lt;li&gt;RIP认为好的路由就是它通过的路由器的数目少，即优先选择跳数少的路径&lt;/li&gt;
&lt;li&gt;RIP允许一条路径最多包含15个路由器（即最多允许15跳）。因此距离大于15时表示网络不可达。因此RIP只适用于小型互联网。限制跳数是为了防止数据报不断在环路上循环，减少网络拥塞的可能性&lt;/li&gt;
&lt;li&gt;RIP默认在任意两个使用RIP的路由器之间每30秒广播一次RIP路由更新信息，以便自动建立并维护路由表&lt;/li&gt;
&lt;li&gt;在RIP中不支持子网掩码的RIP广播，所以RIP的每个网络的子网掩码必须相同。在RIP2中支持变长子网掩码和CIDR&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;rip的特点&#34;&gt;RIP的特点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;仅和相邻的路由器交换信息&lt;/li&gt;
&lt;li&gt;路由器交换的信息是当前路由器所知道的全部信息，即自己的路由表&lt;/li&gt;
&lt;li&gt;按固定的时间间隔交换路由信息&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;距离向量算法&#34;&gt;距离向量算法&lt;/h3&gt;
&lt;p&gt;RIP基于距离向量路由选择算法。每个路由表项目都由三个关键数据：&lt;strong&gt;&amp;lt;目的网络N， 距离d， 下一跳路由器地址X&amp;gt;&lt;/strong&gt;，对于每一个相邻路由器发送的RIP报文，执行以下步骤：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;对地址为X的相邻路由发来的RIP报文，先修改此报文的所有项目：把“下一跳”字段中的地址都改为X，并把所有“字段”的值加1&lt;/li&gt;
&lt;li&gt;对修改后的RIP报文的每个项目，执行如下步骤：
&lt;ul&gt;
&lt;li&gt;当原来的路由表中没有目的网络N时，把该项目添加到路由表中&lt;/li&gt;
&lt;li&gt;当原来的路由表中有目的网络N时，且下一跳路由器的地址是X时，用收到的项目替换原路由表中的项目&lt;/li&gt;
&lt;li&gt;当原来的路由表中有目的网络N时，且下一跳路由器的地址不是X时，如果收到的项目中的距离d小于路由表中的距离，那么就用收到的项目替换原路由表中的项目。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;如果180秒（RIP默认超时时间为180秒）还没有收到相邻路由器的更新路由表，那么将此相邻路由器记为不可达路由器，距离设置为16&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;开放最短路径优先协议ospf-in-igp&#34;&gt;开放最短路径优先协议（OSPF $\in$ IGP）&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;开放最短路径优先协议（OSPF）&lt;/strong&gt;：是使用分布式链路状态路由算法的典型代表，是内部网关协议的一种。&lt;/p&gt;
&lt;h3 id=&#34;ospf和rip的主要区别&#34;&gt;OSPF和RIP的主要区别&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;OSPF向本自治系统中的所有路由器使用洪泛法发送信息，RIP只向直接相邻的路由器发送信息&lt;/li&gt;
&lt;li&gt;OSPF发送与本路由器相邻的所有路由器的链路状态，RIP发送整个路由表&lt;/li&gt;
&lt;li&gt;OSPF只有当链路状态发生变化时，才会发生信息，并且更新收敛快，RIP不管网络拓扑是否发生变化，都会定期交换路由表信息&lt;/li&gt;
&lt;li&gt;OSPF是网络层协议，不使用UDP或TCP，直接用IP数据报传送（IP数据报首部的协议字段为89），RIP是应用层协议，在传输时使用UDP&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ospf的特点&#34;&gt;OSPF的特点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;OSPF对不同的链路可根据IP分组的不同服务类型（TOS）设置成不同的代价。因此，OSPF对不同类型的业务可计算出不同类型的路由，十分灵活&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;多路径间的负载均衡&lt;/strong&gt;：如果同一目的网络有多条相同代价的路径，那么可以将通信量分配给这几条路径&lt;/li&gt;
&lt;li&gt;所有在OSPF路由器之间交换的分组都具有可鉴别的功能，因而保证了仅在可信赖的路由器之间交换链路状态信息&lt;/li&gt;
&lt;li&gt;支持可变长度的子网划分和无分类编址CIDR&lt;/li&gt;
&lt;li&gt;每个链路状态都带有一个32位的序号，序号越大，状态就越新&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ospf的基本工作原理&#34;&gt;OSPF的基本工作原理&lt;/h3&gt;
&lt;p&gt;所有路由器最终都建立了一个链路状态数据库，这个数据库实际上是全网的拓扑结构图，它在全网范围是一致的（称为链路状态数据库的同步）。每个路由器根据这个全网的拓扑结构图使用迪杰斯特拉最短路径算法计算从自己到各目的网络的最优路径，构造路由表。
为使OSPF算法适用于规模很大的网络，OSPF算法将一个自治系统划分为若干更小的范围，称为区域。
划分区域的好处是，为利用洪泛法交换链路状态信息的范围局限于每个区域而非整个自治系统，减少网络上的通信量。在一个区域内部的路由器只知道本区域的完整网络拓扑，不知道其他区域的网络拓扑情况。区域也有层次之分，处于上层的区域称为主干区域，负责连通下层的区域和连接其他自治域&lt;/p&gt;
&lt;h3 id=&#34;ospf的五种分组类型&#34;&gt;OSPF的五种分组类型&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;问候分组：用来发现和维持邻站的可达性
&lt;ul&gt;
&lt;li&gt;通常每10秒，每两个相邻的路由器就要交换一次问候分组，以便知道那些站可达&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;数据库描述分组：向邻站给出之间的链路状态数据库中的所有摘要信息&lt;/li&gt;
&lt;li&gt;链路状态请求分组：向对方请求发送某些链路状态项目的详细信息&lt;/li&gt;
&lt;li&gt;链路状态更新分组：用洪泛法对全网更新链路状态&lt;/li&gt;
&lt;li&gt;链路状态确认分组：对链路更新分组的确认&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OSPF为了确保链路状态数据库与全网的状态保持一致，规定每隔一段时间（如30分钟）都会刷新一次数据库中的链路状态&lt;/p&gt;
&lt;h2 id=&#34;边界网关协议bgp-in-egp&#34;&gt;边界网关协议（BGP $\in$ EGP）&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;边界网关协议（Border Gateway Protocol，BGP）&lt;/strong&gt;：是不同自治系统的路由器之间交换路由信息的协议，是一种外部网关协议。
内部网关协议主要使AS中尽可能有效地从源站到达目的站，不需要考虑其他方面的策略。但是在外部网关协议中环境有很大的不同，主要原因：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;因特网的规模太大，使得自治系统之间路由选择非常困难&lt;/li&gt;
&lt;li&gt;对于自治系统之间的路由选择，要寻找最佳路由是很不现实的&lt;/li&gt;
&lt;li&gt;自治系统之间的路由选择必须考虑有关策略&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;bgp的原理&#34;&gt;BGP的原理&lt;/h3&gt;
&lt;p&gt;边界网关协议力求寻找一种能够到达目的网络且比较好的路由，而并非寻找一条最佳路由。BGP采用距离-向量路由选择协议。BGP是应用层协议，基于TCP。
BGP的工作原理：每个自治系统的管理员选择至少一个路由作为该自治系统的”BGP发言人“。一个BGP发言人与其他自治系统中的BGP发言人交换路由信息，需要先建立TCP连接（BGP报文是TCP报文的数据部分），然后在此连接上交换BGP报文以建立BGP会话，再利用BGP会话交换路由信息。当所有BGP发言人都相互交换网络可达性信息后，各BGP发言人就可找出到达各个自治系统的较好路由。&lt;/p&gt;
&lt;h3 id=&#34;bgp的特点&#34;&gt;BGP的特点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;BGP交换路由信息的结点数量级是自治系统的数量级，要比这些自治系统中的网络数少很多&lt;/li&gt;
&lt;li&gt;每个自治系统的BGP发言人的数目是很少的，这样就使得自治系统之间的路由选择不致于过分复杂&lt;/li&gt;
&lt;li&gt;BGP支持CIDR，因此BGP的路由表应当包括目的网络前缀，下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列&lt;/li&gt;
&lt;li&gt;再BGP刚运行时，BGP的邻站交换整个BGP路由表，但以后只需要在发生变化时更新有变化的部分。这样做对节省网络带宽和减少路由器的处理开销都有好处&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;bgp-4报文&#34;&gt;BGP-4报文&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;打开报文：用来与相邻的另一个BGP发言人建立联系&lt;/li&gt;
&lt;li&gt;更新报文：用来发送某一路由的消息，以及列出要撤销的多条路由&lt;/li&gt;
&lt;li&gt;保活报文：用来确认打开报文并周期性地证实邻站关系&lt;/li&gt;
&lt;li&gt;通知报文：用来发送检测到的错误&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ripospfbgp的比较&#34;&gt;RIP、OSPF、BGP的比较&lt;/h2&gt;
&lt;table border=&#34;1&#34;&gt;
	&lt;tr&gt;
		&lt;th&gt;协议&lt;/th&gt;
		&lt;th&gt;RIP&lt;/th&gt;
		&lt;th&gt;OSPF&lt;/th&gt;
		&lt;th colspan=&#34;2&#34;&gt;BGP&lt;/th&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;类型&lt;/td&gt;
		&lt;td&gt;内部（IGP）&lt;/td&gt;
		&lt;td&gt;内部（IGP）&lt;/td&gt;
		&lt;td colspan=&#34;2&#34;&gt;外部（EGP）&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;路由算法&lt;/td&gt;
		&lt;td&gt;距离-向量&lt;/td&gt;
		&lt;td&gt;链路状态&lt;/td&gt;
		&lt;td colspan=&#34;2&#34;&gt;距离-向量&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;传递协议&lt;/td&gt;
		&lt;td&gt;UDP&lt;/td&gt;
		&lt;td&gt;IP&lt;/td&gt;
		&lt;td colspan=&#34;2&#34;&gt;TCP&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;路径选择&lt;/td&gt;
		&lt;td&gt;跳数最少&lt;/td&gt;
		&lt;td&gt;代价最低&lt;/td&gt;
		&lt;td colspan=&#34;2&#34;&gt;较好，非最佳&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;交换结点&lt;/td&gt;
		&lt;td&gt;和本结点相邻的路由器&lt;/td&gt;
		&lt;td&gt;网络中的所有路由器&lt;/td&gt;
		&lt;td colspan=&#34;2&#34;&gt;和本结点相邻的路由器&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td rowspan=&#34;2&#34;&gt;交换内容&lt;/td&gt;
		&lt;td rowspan=&#34;2&#34;&gt;当前路由器知道的全部信息，即自己的路由表&lt;/td&gt;
		&lt;td rowspan=&#34;2&#34;&gt;与本路由器相邻的所有路由器的链路状态&lt;/td&gt;
		&lt;td&gt;首次&lt;/td&gt;
		&lt;td&gt;整个路由表&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;非首次&lt;/td&gt;
		&lt;td&gt;有变化的部分&lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;h1 id=&#34;ip-组播&#34;&gt;IP 组播&lt;/h1&gt;
&lt;h2 id=&#34;组播的概念&#34;&gt;组播的概念&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;组播&lt;/strong&gt;组播机制是让源站发送的单个分组可以抵达一个组地址标识的若干目标主机，并被它们正确接收。组播仅应用于UDP。
使用组播的原因：优点应用程序要把一个分组发送给多个目的地主机。不是让源主机给每个目的主机都发送单独的分组，而是让源主机把单个分组发送给一个组播地址，该组播地址标识一组地址。网络把这个分组的副本投递给该组中的每台主机，主机可以选择加入或离开一个组，因此一台主机可以同时属于多个组。
主机使用因特网组管理协议（IGMP）加入组播组。它们使用该协议通知本地网络上的路由器关于要接收发送给某个组播组的分组的愿望。通过扩展路由器的路由选择和转发功能，可以在许多路由器互联的支持硬件组播网络上面实现因特网组播。
主机组播时只发生一份数据，只有在数据传送路径出现分岔时才将分组复制后继续转发。对于发送者而言，数据只需要发送一次就可以发送到所有接收者，减轻了网络的负载和发送者的负担。组播需要路由器的支持，所以运行组播协议的路由器称为组播路由器。&lt;/p&gt;
&lt;h2 id=&#34;ip-组播地址&#34;&gt;IP 组播地址&lt;/h2&gt;
&lt;p&gt;IP组播使用D类地址格式，D类地址的前四位是1110，D类地址的范围是224.0.0.0~239.255.255.255，每个D类IP地址标志一个组播组。&lt;/p&gt;
&lt;h3 id=&#34;ip组播地址的特点&#34;&gt;IP组播地址的特点&lt;/h3&gt;
&lt;p&gt;组播使用D类IP地址作为目的地址，IP数据报首部的协议字段值为2，使用IGMP。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;组播数据报“尽最大努力交付“，不提供可靠交付&lt;/li&gt;
&lt;li&gt;组播地址只能用于目的地址，不能用于源地址&lt;/li&gt;
&lt;li&gt;对组播数据报不产生ICMP差错报文。因此，若在PING命令后键入组播地址，永远不会得到响应&lt;/li&gt;
&lt;li&gt;并非所有的D类地址都可以作为组播地址&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ip组播地址的分类&#34;&gt;IP组播地址的分类&lt;/h3&gt;
&lt;p&gt;IP组播可以分为两种：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;只在本局域网上进行硬件组播&lt;/li&gt;
&lt;li&gt;在因特网的范围内进行组播：因特网组播的最后阶段还是需要在局域网上用硬件组播交付给组播的所有成员&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;igmp与组播路由算法&#34;&gt;IGMP与组播路由算法&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;因特网组管理协议（Internet Group Management Protocol，IGMP）&lt;/strong&gt;：要使路由器知道组播组成员的信息，需要利用IGMP协议，IGMP协议让连接到本地局域网上的组播路由器知道本局域网上是否有主机参加或退出某个组播组。
连接到局域网上的组播路由器还需要和因特网上的其他组播路由器协同工作，所以需要组播路由选择协议。&lt;/p&gt;
&lt;h3 id=&#34;igmp的工作阶段&#34;&gt;IGMP的工作阶段&lt;/h3&gt;
&lt;p&gt;IGMP是网际协议IP的一个部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一阶段：当某台主机加入新的组播组时，该主机向组播组的组播地址发送一个IGMP报文，声明自己要成为组播组的成员。本地的组播路由器在收到IGMP报文后，将组成员关系转发给因特网上的其他组播路由器。&lt;/li&gt;
&lt;li&gt;第二阶段：因为组成员关系是动态的，本地组播路由器周期性地探询本局域网上的主机，以便知道这些主机是否仍是组的成员，只要对某个组有一台主机响应，那么组播路由器就认为这个组是活跃的。但一个组在经过多次的探询后仍然没有一台主机响应，那不再将该组的成员关系转发给其他的组播路由器&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;组播路由选择实际上接收找出以源主机位根结点的组播转发树，其中每个分组在每条链路上只传送一次。&lt;/p&gt;
&lt;h3 id=&#34;组播路由算法分类&#34;&gt;组播路由算法分类&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;基于距离-向量的路由选择&lt;/li&gt;
&lt;li&gt;基于链路状态的路由选择&lt;/li&gt;
&lt;li&gt;协议无关的组播（PIM）：可以建立在任何路由器协议之上&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;移动-ip&#34;&gt;移动 IP&lt;/h1&gt;
&lt;h2 id=&#34;移动-ip-的概念&#34;&gt;移动 IP 的概念&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;移动IP&lt;/strong&gt;：支持移动性的因特网系统结构与协议成为移动IP。为了满足移动结点在移动中保持其连接性而设计的。移动IP技术指移动结点以固定的网络IP地址实现跨越不同网段的漫游功能，并保证基于网络IP的网络权限在漫游过程中不发生任何改变。
移动IP的目标是把分组自动地投递给移动结点。一个移动结点是把其连接点从一个网络或子网改变到另一个网络或子网的主机。在使用移动IP时，一个移动结点可以在不改变其IP地址的情况下改变其驻留地址。&lt;/p&gt;
&lt;h3 id=&#34;移动ip功能实体&#34;&gt;移动IP功能实体&lt;/h3&gt;
&lt;p&gt;基于IPv4的移动IP定义了三种功能实体：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;移动结点：具有永久IP地址的移动结点&lt;/li&gt;
&lt;li&gt;移动代理：归属代理和外部代理的总称
&lt;ul&gt;
&lt;li&gt;归属代理（本地代理）：在一个网络环境中，移动结点的永久”居所“被称为归属网络，在归属网络中代表移动结点执行移动管理功能的实体称为归属代理（本地代理），它根据移动用户的转交地址，采用隧道技术转交移动结点的数据包&lt;/li&gt;
&lt;li&gt;外部代理：在外部网络中帮助移动结点完成移动管理功能的实体&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;移动ip的通信过程&#34;&gt;移动IP的通信过程&lt;/h2&gt;
&lt;p&gt;在移动IP中，每个移动结点都有唯一的本地地址，当移动结点移动时，本地地址是不变的，在本地网络链路上每个移动结点还必须有一个本地代理来维护当前的位置信息。还需要引入转交地址，当移动结点连接到外地网络链路上时，转交地址就用来标识移动结点现在所在的位置，以便进行路由选择。移动结点的本地地址与当前转交地址的联合称为移动绑定。当移动结点得到一个新的转交地址时，通过绑定向本地代理进行注册，以便让本地代理即时了解移动结点的当前位置。&lt;/p&gt;
&lt;h3 id=&#34;移动ip技术的基本通信流程&#34;&gt;移动IP技术的基本通信流程&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;移动结点在本地网时，按传统的TCP/IP方式进行通信&lt;/li&gt;
&lt;li&gt;移动结点漫游到一个外地网络时，仍使用固定的IP地址进行通信，为了能够收到通信对端发送给它的IP分组，移动结点需要向本地代理注册当前的位置地址，这个位置地址就是转交地址&lt;/li&gt;
&lt;li&gt;本地代理收到来自转交地址的注册后，会构建一条通往转交地址的隧道，将截获的发给移动结点的IP分组通过隧道送到转交地址处&lt;/li&gt;
&lt;li&gt;在转交地址处解除隧道封装，恢复原始IP分组，最后送到移动结点，这样移动结点在外网也就能收到这些发送给它的IP分组&lt;/li&gt;
&lt;li&gt;移动结点在外网通过外网的路由器或外部代理向通信对端发送IP数据包&lt;/li&gt;
&lt;li&gt;移动结点来到另一个外网时，只需向本地代理更新注册的转交地址，就可以继续通信&lt;/li&gt;
&lt;li&gt;移动结点回到本地网时，移动结点向本地代理注销转交地址，这时移动结点又将使用传统的TCP/IP通信&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;移动IP为主机设置了两个IP地址，即主地址和辅地址（转交地址）。移动IP在本地网时使用主地址，在外网时，使用临时的辅地址。&lt;/p&gt;
&lt;h1 id=&#34;网络层设备&#34;&gt;网络层设备&lt;/h1&gt;
&lt;h2 id=&#34;冲突域和广播域&#34;&gt;冲突域和广播域&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;域&lt;/strong&gt;：冲突或广播时在其中发生并传播的区域。&lt;/p&gt;
&lt;h3 id=&#34;冲突域&#34;&gt;冲突域&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;冲突域&lt;/strong&gt;：连接到同一物理介质上的所有结点的集合，这些结点之间存在介质争用的现象。
在OSI参考模型中，冲突域被认为是第1层概念，第一层（集线器、中继器）所连接的结点都属于同一个冲突域。&lt;/p&gt;
&lt;h3 id=&#34;广播域&#34;&gt;广播域&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;广播域&lt;/strong&gt;：接收同样广播信息的结点集合。该集合中的任何一个结点发送一个广播帧，其他能收到这个帧的结点都被认为是该广播域的一部分。
在OSI参考模型中，广播域被认为是第2层概念，第一层（集线器等）、第二层（交换机）所连接的结点都属于同一个广播域。&lt;/p&gt;
&lt;h2 id=&#34;路由器的组成和功能&#34;&gt;路由器的组成和功能&lt;/h2&gt;
&lt;p&gt;路由器是一个具有多个输入/输出端口的专用计算机，其任务是连接不同的网络并完成路由转发。在多个逻辑网络互联时必须使用路由器。
当源主机向目的主机发送数据报时，路由器先检测源主机与目的主机是否连接在同一个网络上。如果源主机和目的主机在同一个网络，那么直接交付无须经过路由器；如果源主机和目的主机不在同一个网络，那么路由器按照路由转发表支持路由将数据报转发给下一个路由器，称为间接交付。因此，在同一个网络中传递数据无须路由器的参与，跨网络通信需要通过路由器进行转发。&lt;/p&gt;
&lt;h3 id=&#34;路由器的组成&#34;&gt;路由器的组成&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;从结构上看，路由器是由路由选择和分组转发两部分构成。
&lt;ul&gt;
&lt;li&gt;路由选择部分也称控制部分，核心构件是路由选择处理机。路由选择处理机的任务是根据所选定的路由选择协议构造出路由表，同时经常或定期地和相邻路由器交换路由信息而不断更新和维护路由表&lt;/li&gt;
&lt;li&gt;分组转发部分由三部分组成：交换结构，一组输入端，一组输出端
&lt;ul&gt;
&lt;li&gt;输入端口：从物理层接收到的比特流中提取出数据链路层的帧，进而从帧中提取出网络层数据报&lt;/li&gt;
&lt;li&gt;输出端口：把数据报封装成帧，然后转化为比特流输出&lt;/li&gt;
&lt;li&gt;交换结构：路由器的关键部件，根据转发表对分组进行处理，对某个输入端口进入的分组从一个合适的输出端口转发出去
&lt;ul&gt;
&lt;li&gt;通过存储器进行交换&lt;/li&gt;
&lt;li&gt;通过总线进行交换&lt;/li&gt;
&lt;li&gt;通过互联网络进行交换&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;从模型上看，路由器是网络层设备，实现了网络模型的下三层：物理层、数据链路层、网络层。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;路由器的功能&#34;&gt;路由器的功能&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;分组转发：处理通过路由器的数据率，关键操作是转发表查询、转发及相关的队列管理和任务调度&lt;/li&gt;
&lt;li&gt;路由计算：通过和其他路由器进行基于路由协议的交互，完成路由表的计算&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;路由表与路由转发&#34;&gt;路由表与路由转发&lt;/h2&gt;
&lt;p&gt;路由表是根据路由选择算法得出的，主要用途是路由选择。
标准的路由表有：&lt;strong&gt;目的网络IP地址、子网掩码、下一跳IP地址、接口&lt;/strong&gt;
转发表是根据路由表得出的，其表项与路由表项有直接的对应关系。转发表的格式和路由表的格式不同，其结构应使查找过程最优化（路由表需对网络拓扑结构变化的计算最优化）。转发表中含有一个分组将要发往的目的地址，以及分组的下一跳。为了减少转发表的重复项目，可以使用默认路由代替所有具有相同下一跳的项目。
路由表总是由软件来实现；转发表既可以用软件实现，也可由硬件实现。
转发：是路由器根据转发表把收到的IP数据报从合适的端口转发出去，仅涉及一个路由器；路由选择是许多路由器协同工作的结果，这些路由器按照复杂的的路由算法，根据各相邻的路由器得到网络图片的变化情况，动态的改变所选择的路由，构造整个路由表，涉及许多路由器。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>数据链路层</title>
        <link>/post/network/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/</link>
        <pubDate>Sun, 09 Oct 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/network/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/</guid>
        <description>&lt;h1 id=&#34;数据链路层的功能&#34;&gt;数据链路层的功能&lt;/h1&gt;
&lt;p&gt;数据链路层的主要作用将物理层提供的可能出错的物理连接改造成逻辑上无差错的数据链路，使之对网络层变现为一条无差错的链路。&lt;/p&gt;
&lt;h2 id=&#34;为网络层提供服务&#34;&gt;为网络层提供服务&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;无确定的无连接服务：发送数据帧是不需建立链路连接，目的机器收到数据帧是不须发送返回确定。
&lt;ul&gt;
&lt;li&gt;对丢失帧，由上层处理&lt;/li&gt;
&lt;li&gt;适用于实时通信或误码率较低的通信信道，如以太网&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;有确定的无连接服务：发送数据帧是不需建立链路连接，目的机器收到数据帧是必须发送返回确定。
&lt;ul&gt;
&lt;li&gt;规定时间内，未收到确定信号，就重传丢失帧&lt;/li&gt;
&lt;li&gt;适用于误码率较高的通信信道，如无线通信&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;有确定的面向连接服务：目的机器每一帧都要给出确定，源机器收到确定后才能发送下一帧。
&lt;ul&gt;
&lt;li&gt;帧传输阶段：建立数据链路、帧传输、释放数据链路&lt;/li&gt;
&lt;li&gt;适用于通信要求较高的场所&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;链路管理&#34;&gt;链路管理&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;链路管理&lt;/strong&gt;：数据链路层连接的建立、维持和释放的过程为链路管理，主要面向于有确定的面向连接服务。结点在通信前，需要确定双方都处于就绪状态，并交换必要信息对帧序号初始化才能建立连接。&lt;/p&gt;
&lt;h2 id=&#34;帧定界帧同步与透明传输&#34;&gt;帧定界、帧同步与透明传输&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;组帧&lt;/strong&gt;：两台主机之间传输信息时，必须将网络层的分组封装成帧，以帧的格式进行传输。将一端数据的前后分别添加首部和尾部就构成了帧。
&lt;strong&gt;帧定界&lt;/strong&gt;：在帧的首部和尾部中含有许多控制信息，它们的一个重要作用就是确定帧的界限
&lt;strong&gt;帧同步&lt;/strong&gt;：接收方应能从接收到的二进制比特流中区分帧的起始和终止。
&lt;strong&gt;透明传输&lt;/strong&gt;：如果数据中出现了与帧定界符相同的比特组合，那么就要采取有效的措施解决这个问题。即不管所传送的数据是什么样的比特组合，都应当能在链路上传送。
&lt;strong&gt;最大传送单元（MTU）&lt;/strong&gt;：每种数据链路层协议规定的帧的数据部分的长度上限。为了提高帧传输效率，应尽可能的使数据部分的长度大于首部和尾部的长度。&lt;/p&gt;
&lt;h2 id=&#34;流量控制&#34;&gt;流量控制&lt;/h2&gt;
&lt;p&gt;在数据传输时，由于发送方和接收方工作速率和存储空间的差异，可能出现发送方的发送能力大于接收方的接收能力的情况，如果不限制发送方的发送速率，将导致帧的丢失和出错。
&lt;strong&gt;流量控制&lt;/strong&gt;：限制发送方的发送数据流量，使其发送速率不超过接收方的接收能力。
流量控制的过程需要通过某种反馈机制使发送方知道接收方的接收能力情况。&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;OSI参考模型：数据链路层具有流量控制功能：控制相邻两结点之间数据链路上的流量&lt;/li&gt;
&lt;li&gt;TPC/IP模型：传输层具有流量控制功能：控制从源端到目的端之间的流量&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;差错控制&#34;&gt;差错控制&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;差错控制&lt;/strong&gt;：由于信道噪声等影响，帧在传输中可能会出现错误，使发送方确定接收方是否正确收到由其发送方发送的数据称为差错控制
&lt;ul&gt;
&lt;li&gt;位错：帧中某些位出现错误
&lt;ul&gt;
&lt;li&gt;采用循环冗余校验（CRC）发现位错&lt;/li&gt;
&lt;li&gt;通过自动重传请求（Automatic Repeat reQuest，ARQ）重传出错的帧&lt;/li&gt;
&lt;li&gt;具体做法（ARQ法）：将数据帧和附加的CRC冗余校验码一起发送，接收方根据校验码检查错误，若发现错误则丢弃，发送方超时重传该数据帧。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;帧错：帧的丢失、重复或失序等错误
&lt;ul&gt;
&lt;li&gt;引入定时器和编号机制，保证每一帧正确的交付给目的端。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;组帧&#34;&gt;组帧&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;组帧&lt;/strong&gt;：两台主机之间传输信息时，必须将网络层的分组封装成帧，以帧的格式进行传输。将一端数据的前后分别添加首部和尾部就构成了帧。组帧主要解决的问题：帧定界、帧同步、透明传输等问题。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在计算机网络各层传输单位中，唯有数据链路层层是既要添加首部，又要添加尾部。其他层都是只添加首部。
数据链路层既要添加首部，又要添加尾部的原因是，在网络中信息以帧位最小单位进行传输，所以接收端要正确接收帧，必须确定该帧在比特流中的起始位置和结束位置。（没有首部和尾部就不能正确的区分帧）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;字符计数法&#34;&gt;字符计数法&lt;/h2&gt;
&lt;p&gt;字符计数法指在帧头部使用一个计数字段表示帧内字符。目的结点根据计数值，就可以确定帧结束的位置。
缺点：如果计数字段出错，失去帧定界划分依据，无法正确判断下一帧的起始位，收发双方将失去同步。&lt;/p&gt;
&lt;h2 id=&#34;字符填充的首位定界符法&#34;&gt;字符填充的首位定界符法&lt;/h2&gt;
&lt;p&gt;字符填充法指使用特定字符来定界一帧的开始和结束。
如控制字符SOH在帧最前面表示帧的开始，控制字符EOT在帧最后面表示帧的结束。在数据中出现特殊字符，在前面添加转义字符ESC加以区分。&lt;/p&gt;
&lt;h2 id=&#34;零比特填充的首尾标志法&#34;&gt;零比特填充的首尾标志法&lt;/h2&gt;
&lt;p&gt;零比特字符填充法指用一个特定的比特模式如01111110来标志一阵的开始和结束。为了不使数据位中的01111110被误判，在数据位中遇到5个连续的1，则在其后面加一个0，接收方则做其逆过程。
零比特字符填充法容易由硬件来实现，性能优于字符填充法。&lt;/p&gt;
&lt;h2 id=&#34;违规编码法&#34;&gt;违规编码法&lt;/h2&gt;
&lt;p&gt;违规编码法：在物理层进行比特编码时，通常采用与编码法违规的表示方法来表示开始和结束。
如，曼彻斯特编码方法将1编码位“高-低”，0编码位“低-高”。而“高-高”和“低-低”电平在曼彻斯特编码中是违规的，可以借用这些违规编码序列定界帧的起始和终止。
违规编码适用于冗余编码的特殊编码环境。&lt;/p&gt;
&lt;h1 id=&#34;差错控制-1&#34;&gt;差错控制&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;比特差错&lt;/strong&gt;：数据在链路通信时，受噪声等因素的影响，比特在传输过程中可能会产生差错，如1可能变成0，0变成1。
通常采用编码技术进行差错控制：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;检错编码：能发现数据是否出错
&lt;ul&gt;
&lt;li&gt;采用技术：冗余编码技术&lt;/li&gt;
&lt;li&gt;核心思想：在有效数据发送前，按照某种关系附加一定的冗余位，构成一个符合某一规则的码字在发送。接收端根据接收到的码字是否仍符合原规则判断是否出错。&lt;/li&gt;
&lt;li&gt;常用编码技术：奇偶校验码和循环冗余码&lt;/li&gt;
&lt;li&gt;自动重传请求（ARQ）：接收端检测到差错后，设法通知发送端重发。直到接收到正确的数据为止。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;纠错编码：能发现并判断数据出错位数，并进行纠正
&lt;ul&gt;
&lt;li&gt;核心思想：在每个要发送的数据块上附加足够的冗余信息，使接收方能够推导出发送方实际发送的应该是什么样的比特串&lt;/li&gt;
&lt;li&gt;常用编码技术：海明码&lt;/li&gt;
&lt;li&gt;前向纠错（FEC）：接收端不但能发现差错，而且能确定比特串的错误位置，并加以纠正&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;检错编码&#34;&gt;检错编码&lt;/h2&gt;
&lt;h3 id=&#34;奇偶校验码&#34;&gt;奇偶校验码&lt;/h3&gt;
&lt;p&gt;奇偶校验码是奇校验码和偶校验码的统称，是一种最基本的检错码。
奇偶校验码由$n - 1$位信息位和$1$位校验位组成，如果是奇校验码，那么在附加一个校验位后，码长为$n$的码字中$1$的个数为奇数；如果是偶校验码，那么在附加一个校验位后，码长为$n$的码字中$1$的个数为偶数。
奇偶校验码只能发现出现奇数个错误，不能发现出现偶数个错误，不知道是那个位出错。&lt;/p&gt;
&lt;h3 id=&#34;循环冗余码多项式码crc&#34;&gt;循环冗余码（多项式码，CRC）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;循环冗余码（多项式码，CRC）&lt;/strong&gt;：任何一个二进制数位串组成的代码都可以与一个只含有0和1两个系数的多项式建立一一对应关系。一个$k$位帧可以视为从$X^{k - 1}$到$X^0$的k次多项式的序数序列，这个多项式的阶数为$k - 1$。如：10010101表示的多项式是$X^7 + X^4 + X^2 + X^0$。
给定一个$m$位的帧或报文，发送器生成一个$r$位的序列，称为&lt;strong&gt;帧检验序列（FCS）&lt;/strong&gt;，形成一个$m + r$位的帧。发送方和接收方事先商定一个多项式$G(x)$（最高位和最低位必须为1），使这个带检验码的帧刚好能被预先确定的多项式$G(x)$整除。接收方用相同的多项式去除收到的帧，如果无余数，就认为无差错。&lt;/p&gt;
&lt;p&gt;假设一个帧有$m$位，对应的多项式位$G(x)$，其阶位$r$，计算冗余码的步骤如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;加0：在帧的低位端加上$r$个0。&lt;/li&gt;
&lt;li&gt;模2除：利用模2除法，用$G(x)$对应数据串除1中计算出的数据串，得到的余数即为冗余码。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;循环冗余码示例&#34;&gt;循环冗余码示例&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;在数据传输中，若接收方收到的二进制比特序列位10110011010，双方采用的生成多项式$G(x) = x^4 + x^3 + 1$，则该二进制比特序列在传输中是否出错？若未出错，则发送数据的比特序列和CRC校验码的比特序列分别是什么？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;根据题意，生成多项式$G(x)$对应的二进制比特序列位（最高位和最低位都为1），阶数为4。
进行如下二进制模2除法：
$$
\begin{array}{lr}
&amp;amp; 1101010 \
11010 !!!!!! &amp;amp; \sqrt{10110011010} \
&amp;amp; \underline{11001}\ \ \ \ \ \ \ \ \ \ \ \ \
&amp;amp; 11110\ \ \ \ \ \ \ \ \ \ \
&amp;amp; \underline{11001}\ \ \ \ \ \ \ \ \ \ \
&amp;amp; 11111\ \ \ \ \ \ \
&amp;amp; \underline{11001}\ \ \ \ \ \ \
&amp;amp; 11001\ \ \
&amp;amp; \underline{11001}\ \ \
&amp;amp; 00
\end{array}
$$
所得余数为0，因此该二进制位在传输过程中未出现差错。
发送比特序列为1011001，CRC检验码的比特序列是1010（$G(x)$的阶数位4，最低4位为校验位）。&lt;/p&gt;
&lt;h2 id=&#34;纠错编码&#34;&gt;纠错编码&lt;/h2&gt;
&lt;h3 id=&#34;海明码&#34;&gt;海明码&lt;/h3&gt;
&lt;p&gt;海明码实现原理：在有效信息位中加入几个校验位形成海明码，并把海明码每个二进制位分配到几个奇偶校验组中。当某一位出错后，就会引起有关的几个校验位的值发生变化，这样不但可以发现错位，还能指出错位位置，为自动纠错提供依据。
&lt;strong&gt;海明码的编码原理和过程&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;确定海明码位数
&lt;ul&gt;
&lt;li&gt;设$n$为有效位的位数，$k$为校验位的位数，则信息位$n$和校验位$k$应满足：$n + k \le 2^k - 1$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;确定校验位的分布
&lt;ul&gt;
&lt;li&gt;规定校验位$P_i$在海明码$2^{i - 1}$的位置上，其余各位为信息位&lt;/li&gt;
&lt;li&gt;以4位数据位举例，其对应海明码各位分布如下：
$$
\begin{matrix}
H_7 &amp;amp; H_6 &amp;amp; H_5 &amp;amp; H_4 &amp;amp; H_3 &amp;amp; H_2 &amp;amp; H_1 &amp;amp; \
D_4 &amp;amp; D_3 &amp;amp; D_2 &amp;amp; P_3 &amp;amp; D_1 &amp;amp; P_2 &amp;amp; P_1 &amp;amp;
\end{matrix}
$$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;分组以形成校验关系
&lt;ul&gt;
&lt;li&gt;每个数据位用多个校验位进行校验。应满足条件：被校验数据位的海明码位号等于校验该数据位的各校验位海明码位号之好。
&lt;ul&gt;
&lt;li&gt;如：当数据位$D_2$在海明码中为$H_5$时，其校验位应该是$P_1(H_1)$和$P_3(H_4)$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./海明码分组校验关系.png&#34; title=&#34;&#34; alt=&#34;海明码分组校验关系&#34;&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;校验位取值
&lt;ul&gt;
&lt;li&gt;检验位的值为第$i$组（该校验位校验的数据位）所有位异或。
&lt;ul&gt;
&lt;li&gt;如上图所示：$P_1 = D_1 \oplus D_2 \oplus D_4$，$P_2 = D_1 \oplus D_3 \oplus D_4$，$P_3 = D_2 \oplus D_3 \oplus D_4$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;海明码的校验原理
&lt;ul&gt;
&lt;li&gt;每个检验组利用校验位和参与形成该校验位的信息位进行奇偶校验检查：
$$
S_1 = P_1 \oplus D_1 \oplus D_2 \oplus D_4 \
S_2 = P_2 \oplus D_1 \oplus D_3 \oplus D_4 \
S_3 = P_3 \oplus D_2 \oplus D_3 \oplus D_4
$$&lt;/li&gt;
&lt;li&gt;若$S_3S_2S_1$的值为&amp;quot;000&amp;quot;则无错，反之则为对应错误位的位号。如$S_3S_2S_1 = 001$，则说明第1位即$H_1$出错，该位直接取反就达到了纠错的目的。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;流量控制与可靠传输机制&#34;&gt;流量控制与可靠传输机制&lt;/h1&gt;
&lt;h2 id=&#34;流量控制可靠传输与滑动窗口机制&#34;&gt;流量控制、可靠传输与滑动窗口机制&lt;/h2&gt;
&lt;h3 id=&#34;流量控制-1&#34;&gt;流量控制&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;流量控制&lt;/strong&gt;：通过对链路上帧的发送速率的控制，使接收方有足够的缓冲空间接收每个帧。
流量控制的基本方法是又接收方控制发送方发送数据的速率，常见方式有&lt;strong&gt;停止-等待协议&lt;/strong&gt;和&lt;strong&gt;滑动窗口协议&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;可靠传输机制&#34;&gt;可靠传输机制&lt;/h3&gt;
&lt;p&gt;数据链路层的可靠传输是通过使用&lt;strong&gt;确认&lt;/strong&gt;和&lt;strong&gt;超时重传&lt;/strong&gt;两种机制来完成的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;确认：一种无数据的控制帧，这种控制帧使得接收方可以让发送方知道那些内容被正确接收。
&lt;ul&gt;
&lt;li&gt;捎带确认：有些情况下，为了提高传输效率，将确认捎带在一个回复帧中。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;超时重传：发送方在发送某个数据帧后就开启一个计时器，在一定时间内没有收到确定帧，就重新发生该数据帧，知道发送成功为止。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;自动重传请求arq&#34;&gt;自动重传请求（ARQ）&lt;/h4&gt;
&lt;p&gt;自动重传请求（ARQ）：通过接收方请求发送方重传出错的数据帧来恢复出错的帧。
传统自动重传请求分为三种：停止-等待ARQ、后退$N$帧ARQ和选择重传ARQ。后两种协议与滑动窗口机制结合，当窗口尺寸足够大时，帧在线路上可以连续地流动，因此又称为连续ARQ协议。&lt;/p&gt;
&lt;h3 id=&#34;滑动窗口机制&#34;&gt;滑动窗口机制&lt;/h3&gt;
&lt;h4 id=&#34;滑动窗口的基本原理&#34;&gt;滑动窗口的基本原理&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;发送窗口：任意时刻，发送方都维持一组连续的允许发送的帧的序号。
&lt;ul&gt;
&lt;li&gt;发送窗口用来对发送方进行流量控制&lt;/li&gt;
&lt;li&gt;发送窗口的大小$W_T$代表还未收到对方确定信息的情况下发送方最多还可以发送多少个数据帧&lt;/li&gt;
&lt;li&gt;发送方没收到一个确认帧，发送窗口向后滑动一个帧的位置，当发送方无可发送数据帧时（窗口帧全部已发送但未收到确定帧时）停止发送，直到收到接收方的确认帧后才能继续操作&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;接收窗口：同时接收方也维持一组连续的允许接收帧的序号。
&lt;ul&gt;
&lt;li&gt;接收窗口控制可以接收哪些数据帧和不可以接收那些数据帧&lt;/li&gt;
&lt;li&gt;在接收方，只有收到在接收窗口内的数据帧序号时，才允许将该数据帧接收，否则一律丢弃&lt;/li&gt;
&lt;li&gt;接收端收到数据帧时，将窗口向后移动一个位置，并返回确认帧，若收到的数据帧在接收窗口之外，则一律丢弃&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;滑动窗口的重要特性&#34;&gt;滑动窗口的重要特性&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;只有接收窗口向后移动时，发送窗口才有可能向后移动&lt;/li&gt;
&lt;li&gt;各协议接收窗口和发送窗口的大小差别：
&lt;ul&gt;
&lt;li&gt;停止-等待协议：发送窗口大小$W_T$ = 1，接收窗口大小$W_R$ = 1&lt;/li&gt;
&lt;li&gt;后退$N$帧协议：发送窗口大小$W_T$ &amp;gt; 1，接收窗口大小$W_R$ = 1&lt;/li&gt;
&lt;li&gt;选择重传协议：发送窗口大小$W_T$ &amp;gt; 1，接收窗口大小$W_R$ &amp;gt; 1，$W_T = W_R$，$W_{Tmax} = W_{Rmax} = 2^{n - 1}$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;接收窗口的大小为1时，可保证帧的有序接收&lt;/li&gt;
&lt;li&gt;数据链路层的滑动窗口协议中，窗口的大小在传输过程是固定的&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;停止-等待协议&#34;&gt;停止-等待协议&lt;/h2&gt;
&lt;p&gt;发送方每发送一帧，都要等待接收方的应答信号，收到确认信号后才能发送下一帧；接收方没接收一帧，就要反馈一个应答信号。每次只允许发送一帧，传输效率低下。
从滑动窗口机制来看，停止-等待协议就是发送窗口和接收窗口大小都是1的滑动窗口协议。&lt;/p&gt;
&lt;h2 id=&#34;后退n帧协议gbn&#34;&gt;后退$N$帧协议（GBN）&lt;/h2&gt;
&lt;p&gt;在后退$N$帧协议中，发送方可以连续发送多个帧。当接收方检测出失序的数据帧时，要求发送方重发最后一个正确接收的数据帧之后的所有未被确认的帧；或发送方发送$N$个帧后，若发现$N$个帧的前一个帧在计时器超时后仍未返回确认信息，则发送方重传出错帧和随后的$N$个帧。即发送窗口可以连续发送，接收窗口只允许按序接收帧。
从滑动窗口机制来看，后退$N$帧协议就是发送窗口大小 &amp;gt; 1，接收窗口大小 = 1。
后退$N$帧协议的接收窗口为1，可以保证按序接收数据帧。若采用$n$比特对帧编号，则其发送窗口的尺寸$W_T$应满足$1 \le W_T \le 2^n - 1$。若窗口尺寸$W_T &amp;gt; 2^n - 1$，接收方将无法区分新帧和旧帧。
后退$N$帧协议因为连续发送数据帧提高了信道的利用率，但是在重传时又可能把已传送正确的帧重传，导致传送效率降低。所以当信道的传输质量很差导致误码率较大时，后退$N$帧协议不一定优于停止-等待协议。&lt;/p&gt;
&lt;h2 id=&#34;选择重传协议sr&#34;&gt;选择重传协议（SR）&lt;/h2&gt;
&lt;p&gt;为进一步提高信道利用率，可设法只重传出错的数据帧和计时器超时的数据帧，因此必须加大接收窗口。以便发送序号不连续时仍能接收数据帧。
在选择重传协议中，发送窗口大小$W_T &amp;gt; 1$，接收窗口大小$W_R &amp;gt; 1$，发送窗口大小和接收窗口大小应一致，且最大值都为$n$比特编码的序号的一半，即$W_{Tmax} = W_{Rmax} = 2^{n - 1}$&lt;/p&gt;
&lt;h1 id=&#34;典型数据链路层协议&#34;&gt;典型数据链路层协议&lt;/h1&gt;
&lt;h2 id=&#34;hdlc高级数据链路控制协议&#34;&gt;HDLC（高级数据链路控制）协议&lt;/h2&gt;
&lt;p&gt;高级数据链路控制协议（HDLC）是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;面向比特的数据链路层协议&lt;/li&gt;
&lt;li&gt;该协议不依赖于任何一种字符编码集&lt;/li&gt;
&lt;li&gt;数据报文和透明传输，用于实现透明传输的“0比特填充法”&lt;/li&gt;
&lt;li&gt;全双工通信，有较高的数据链路传输效率&lt;/li&gt;
&lt;li&gt;所有帧采用CRC校验，对数据帧进行顺序编号，防止漏发或重发，传输可靠性高&lt;/li&gt;
&lt;li&gt;传输控制功能与处理功能分离，具有较大的灵活性
高级数据链路控制协议采用“0比特填充法”进行编码。在标志字段用01111110确认帧的起始和终止位置。在发送端遇到5个连续的1时，在其后填入一个0。在接收端遇到5个连续的1时，将其后面紧跟着的0删除，还原为原来的比特流。&lt;/li&gt;
&lt;/ul&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./HDLC帧格式.png&#34; title=&#34;&#34; alt=&#34;HDLC帧格式&#34;&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;HDLC帧格式由标志、地址、控制、数据和FCS等字段构成&lt;/li&gt;
&lt;li&gt;标志字段F（8位）：01111110（0x7E，0比特填充）&lt;/li&gt;
&lt;li&gt;地址字段A（8位）：根据不同的传送方式，表示从站或应答站的地址&lt;/li&gt;
&lt;li&gt;控制字段C（8位）：HDLC的许多功能依赖控制字段来实现&lt;/li&gt;
&lt;li&gt;帧校验序列FCS（16位）：采用RCR校验&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ppp点对点协议&#34;&gt;PPP（点对点）协议&lt;/h2&gt;
&lt;p&gt;PPP（Point-to-Point Protocol）协议是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用串行线路通信的面向字节的协议&lt;/li&gt;
&lt;li&gt;该协议应用在直接连接两个结点的链路上&lt;/li&gt;
&lt;li&gt;设计的目的：通过拨号或专线方式建立点对点连接发送数据，使其成为各种主机、网桥和路由器之间简单连接的一种共同的解决方案&lt;/li&gt;
&lt;li&gt;数据报文和透明传输，用于实现透明传输的“0比特填充法”&lt;/li&gt;
&lt;li&gt;所有帧采用CRC校验&lt;/li&gt;
&lt;/ul&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./PPP协议帧格式.png&#34; title=&#34;&#34; alt=&#34;PPP协议帧格式&#34;&gt;
&lt;/div&gt;
&lt;p&gt;PPP协议有三个组成部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;链路控制协议（LCP）：用于建立、配置、测试和管理数据链路&lt;/li&gt;
&lt;li&gt;网络控制协议（NCP）：PPP协议允许同时采用多种网络层协议，每个不同的网络层协议用一个相应的NCP来配置，为网络层协议建立和配置逻辑连接&lt;/li&gt;
&lt;li&gt;将IP数据报封装到串行链路的方法：IP数据报在PPP协议中就是其数据部分，这个数据部分的长度受最大传送单元（MTU）限制&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;PPP协议的数据帧格式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PPP帧格式由标志、地址、控制、协议、数据和FCS等字段构成&lt;/li&gt;
&lt;li&gt;标志字段F（8位）：01111110（0x7E，0比特填充）&lt;/li&gt;
&lt;li&gt;地址字段A（8位）：11111111（0xFF，默认规定）&lt;/li&gt;
&lt;li&gt;控制字段C（8位）：0000011（0x03，默认规定）&lt;/li&gt;
&lt;li&gt;协议字段（16位）：说明数据中运载的是什么种类的分组&lt;/li&gt;
&lt;li&gt;数据部分：0~1500B，是点对点形，没有最短帧，数据部分出现标志字段一样的比特组合时，采用0比特填充法实现透明传输&lt;/li&gt;
&lt;li&gt;帧校验序列FCS（16位）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;hdlc协议和ppp协议区别&#34;&gt;HDLC协议和PPP协议区别&lt;/h3&gt;
&lt;p&gt;HDLC帧和PPP帧在格式是很相似，但两者有以下不同：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HDLC协议是面向比特的，PPP协议是面向字节的&lt;/li&gt;
&lt;li&gt;PPP协议比HDLC协议多一个2字节的协议字段。当协议字段值位0x0021时，表示数据部分为IP数据报&lt;/li&gt;
&lt;li&gt;HDLC协议的数据帧使用编号和确认机制，提供可靠传输；PPP协议不使用序号和确认机制，只保证无差错接收（CRC校验），端到端差错检测由高层协议负责&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;介质访问控制&#34;&gt;介质访问控制&lt;/h1&gt;
&lt;p&gt;介质访问控制的主要任务是：为使用介质的每个结点隔离来自同一信道上其他结点所传送的信号，协调结点的传输。
&lt;strong&gt;介质访问控制子层（Medium Access Control，MAC）&lt;/strong&gt;：用来决定信道分配的协议的数据链路层的子层。&lt;/p&gt;
&lt;h2 id=&#34;信道划分介质访问控制静态划分信道&#34;&gt;信道划分介质访问控制（静态划分信道）&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;信道划分介质访问控制&lt;/strong&gt;：将使用介质的每个设备与来自同一通信信道上的其他设备的通信隔离，把时域和频域资源合理地分配给网络上的设备。&lt;/p&gt;
&lt;h3 id=&#34;多路复用&#34;&gt;多路复用&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;多路复用&lt;/strong&gt;：当传输介质的带宽超过传输单个信号所需的带宽时，通过在一条介质上同时携带多个传输信号的方法来提高传输系统的利用率。多路复用技术就是把多个信号组合在一条物理信道上进行传输，使多个计算机或终端设备共享信道资源，提高信道利用率。&lt;/p&gt;
&lt;h4 id=&#34;频分多路复用fdm&#34;&gt;频分多路复用（FDM）&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;频分多路复用&lt;/strong&gt;：按频谱划分信道，多路基带信号被调制在不同的频谱上。因此它们在频谱上不会重叠，即在频率上正交，但在时间上是重叠的，可以同时在一个信道内传输。频分通信也叫载波通信，是模拟通信的主要手段。&lt;/p&gt;
&lt;p&gt;频分多路复用的优点在于：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;充分利用了传输介质的带宽，系统效率较高&lt;/li&gt;
&lt;li&gt;技术成熟，实现容易&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;时分多路复用tdm&#34;&gt;时分多路复用（TDM）&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;时分多路复用&lt;/strong&gt;：将一条物理信道按时间分成若干个时间片轮流地分配给多个信号使用。每一时间片由复用的一个信号占有信道。是数字信号通信的常用手段。
&lt;strong&gt;统计时分多路复用（STDM，又称异步时分多路复用）&lt;/strong&gt;：TDM的改进，采用STDM帧，STDM帧并不固定分配时隙，而是按需动态地分配时隙，当终端有数据需要传送时，才会分配到时间片，提高线路的利用率。&lt;/p&gt;
&lt;h4 id=&#34;波分多路复用wdm&#34;&gt;波分多路复用（WDM）&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;波分多路复用&lt;/strong&gt;：波分多路复用即光的频分多路复用，在一根光纤冲传输多种不同波长的光信号，由于波长不同，各种光信号互不干扰，最后再用波长分解复用器将各路波长分解出来。&lt;/p&gt;
&lt;h4 id=&#34;码分多路复用cdm&#34;&gt;码分多路复用（CDM）&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;码分多路复用&lt;/strong&gt;：用户传输信息所用的信号不是靠频率或时隙的不同来区分，而是用各自不同的编码序列来区分，或者说，靠信号的不同波形来区分。码分多路复用即共享信道的频率，也共享信道的时间，&lt;/p&gt;
&lt;h5 id=&#34;码分多址cdma&#34;&gt;码分多址（CDMA）&lt;/h5&gt;
&lt;p&gt;&lt;strong&gt;码分多址&lt;/strong&gt;：每个比特时间划分为$m$个短的时间槽，称为码片（Chip），每个站点被指派一个唯一的$m$位码片序列。当发送1时，站点发送它的码片序列；当发送0时，站点发送该码片序列的反码。当两个或多个站点同时发送时，各路数据在信道中线性相加。为从信道中分离出各路信号，要求各个站点的序列相互正交。&lt;/p&gt;
&lt;h2 id=&#34;随机访问介质访问控制动态划分信道&#34;&gt;随机访问介质访问控制（动态划分信道）&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;随机访问介质访问控制（争用性介质访问控制）&lt;/strong&gt;：胜利者通过争用活动信道，从而获得信道的发送权。因此，随机访问控制协议又称争用性协议。
在随机访问协议中，不采用集中控制方式解决发送信息的次序问题，所有用户都根据自己的意愿随机地发送信息，占用信道全部速率。&lt;/p&gt;
&lt;h3 id=&#34;aloha协议&#34;&gt;ALOHA协议&lt;/h3&gt;
&lt;h4 id=&#34;纯aloha协议&#34;&gt;纯ALOHA协议&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;纯ALOHA协议&lt;/strong&gt;：当网络中的任何一个站点需要发送数据时，可以不进行任何检测就发送数据。如果在一段时间内未收到确认，该站点就认为传输过程中发生冲突。发送站点等待一段时间后再发送数据，直至发送成功。&lt;/p&gt;
&lt;h4 id=&#34;时隙aloha协议&#34;&gt;时隙ALOHA协议&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;时隙ALOHA协议&lt;/strong&gt;：把所有站点在时间上同步起来，并把时间划分为一段段等长的时隙（Slot），规定只能在每个时隙开始时发送一个帧。避免了用户发送数据的随意性，减少了数据产生冲突的可能性，提高了信道利用率。&lt;/p&gt;
&lt;h3 id=&#34;载波侦听多路访问协议csma&#34;&gt;载波侦听多路访问协议（CSMA）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;载波侦听多路访问协议（CSMA）&lt;/strong&gt;：在发送前先侦听以下共有信道，发现信道空闲后再发送，则会大大降低冲突的可能，提高信道的利用率。CSMA协议是在ALOHA协议基础上提出的一种改进协议，与ALOHA协议的主要区别是多路一个载波侦听装置。&lt;/p&gt;
&lt;h4 id=&#34;1-坚持csma&#34;&gt;1-坚持CSMA&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;1-坚持CSMA&lt;/strong&gt;：当一个结点要发送数据时，首先侦听信道；如果信道空闲，立即发送数据；如果信道忙，等待，同时继续侦听直至信道空闲；如果发生冲突，随机等待一段时间后，再重新开始侦听信道。&lt;/p&gt;
&lt;h4 id=&#34;非坚持csma&#34;&gt;非坚持CSMA&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;非坚持CSMA&lt;/strong&gt;：一个结点要发送数据时，首先侦听信道，如果信道空闲，立即发送数据；如果信道忙，那么放弃侦听，等待一个随机的时间后再重复上述过程。&lt;/p&gt;
&lt;h4 id=&#34;p-坚持csma&#34;&gt;$p$-坚持CSMA&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;$p$-坚持CSMA&lt;/strong&gt;：一个结点要发送数据时，首先侦听信道，如果信道忙，就继续侦听；如果信道空闲，就以概率$p$发送数据，以概率$1 - p$推迟到下一个时隙，重复上述过程。
$p$-坚持CSMA用于时分信道。&lt;/p&gt;
&lt;h4 id=&#34;三种不同类型的csma协议比较&#34;&gt;三种不同类型的CSMA协议比较&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;信道状态&lt;/th&gt;
&lt;th&gt;1-坚持&lt;/th&gt;
&lt;th&gt;非坚持&lt;/th&gt;
&lt;th&gt;$p$-坚持&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;空闲&lt;/td&gt;
&lt;td&gt;立即发送数据&lt;/td&gt;
&lt;td&gt;立即发送数据&lt;/td&gt;
&lt;td&gt;以概率$p$发送数据，以概率$1 - p$推迟到下一个时隙&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;忙&lt;/td&gt;
&lt;td&gt;继续坚持侦听&lt;/td&gt;
&lt;td&gt;放弃侦听，等待一个随机的时间后侦听&lt;/td&gt;
&lt;td&gt;继续坚持侦听，直到信道空闲&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;载波侦听多路访问碰撞检测csmacd&#34;&gt;载波侦听多路访问/碰撞检测（CSMA/CD）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;碰撞检测&lt;/strong&gt;：就是边听边发，即适配器边发送数据边检测信道上信号电压的变化情况，以便判断自己在发送数据时其他站点是否也在发送数据。
载波侦听多路访问/碰撞检测（CSMA/CD）是CSMA协议的改进方案，适用于总线形网络和半双工网络。&lt;/p&gt;
&lt;p&gt;CSMA/CD的工作流程可以概况为：“先听后发，边听边发，冲突停发，随机重发”：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;适配器从网络层获得一个分组，封装成以太网帧，放入适配器的缓存，准备发送&lt;/li&gt;
&lt;li&gt;如果适配器侦听到信道空闲，那么它就开始发送该帧。如果适配器侦听到信道忙，那么它持续侦听直至信道空闲，然后开始发送该帧&lt;/li&gt;
&lt;li&gt;在发送过程中，适配器持续检测信道。若一直未检测到碰撞，则顺利的将该帧发送完毕；若检测到碰撞，则中止数据发送，并发送一个拥塞信号，让所有用户都知道&lt;/li&gt;
&lt;li&gt;中止发送后，适配器执行指数退避算法，等待一段随机时间后返回步骤2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;为了确保发送数据的同时还能检测到可能出现的碰撞，需要在发送完帧之前就能收到自己发送出去的数据，即帧的传输时延至少要两倍于信号在总线中的传播时延，所以CSMA/CD总线网中的所有数据帧都必须岛屿一个最小帧长。
$$
最小帧长 = 总线传播时延 \times 数据传输速率 \times 2
$$
载波侦听多路访问/碰撞检测（CSMA/CD）只能用于有线连接的局域网和半双工通信中，不能用于无线局域网中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;接收信号的强度往往会远小于发送信号的强度，且无线介质上信号强度的动态变化范围很大，因此若要实现碰撞检测，则硬件上的花费会很大&lt;/li&gt;
&lt;li&gt;无线通信中，并非所有的站点都能听见对方，存在“隐蔽站”问题&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;载波侦听多路访问碰撞避免csmaca&#34;&gt;载波侦听多路访问/碰撞避免（CSMA/CA）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;碰撞避免&lt;/strong&gt;：协议的设计要尽量降低碰撞发生的概率。所有站完成发送后，必须等待一段很短的时间才能发送下一帧。这段时间称为&lt;strong&gt;帧间间隔（InterFrame SPace，IFS）&lt;/strong&gt;。帧间间隔的长短取决于该站要发送的帧的类型：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SIFS（短IFS）：最短的IFS，用来分隔属于一次对话的各帧，使用SIFS的帧类型有ACK帧、CTS帧、分片后的数据帧，以及所有回答AP探询的帧等。&lt;/li&gt;
&lt;li&gt;PIFS（点协调IFS）：中等长度的IFS，在PCF操作中使用。&lt;/li&gt;
&lt;li&gt;DIFS（分布式协调IFS）：最长的IFS，用于异步帧竞争访问的时延。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;CSMA/CA协议主要用于无线局域网中。
CSMA/CA的工作流程为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;若站点最初有数据要发送（不是发送不成功再进行重传），且检测到信道空闲，在等待时间DIFS后，就发送整个数据帧。&lt;/li&gt;
&lt;li&gt;否则，站点执行CSMA/CA退避算法，选取一个随机回退值。一旦检测到信道忙，退避计时器就保持不变。只要信道空闲，退避计时器就进行倒计时。&lt;/li&gt;
&lt;li&gt;当退避计时器减到0时（这时信道只可能是空闲的），站点就发送整个帧并等待确认。&lt;/li&gt;
&lt;li&gt;发送站若收到确认，就知道已发送的帧被目的站正确接收。这时如果要发送第二帧，就从步骤2开始&lt;/li&gt;
&lt;li&gt;若发送在规定时间内未收到确认帧ACK，就必须重传该帧，再次使用CSMA/CA协议争用该信道，直到收到确认帧。若经过若干次重传失败后就放弃发送。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;处理隐蔽站问题rts和cts&#34;&gt;处理隐蔽站问题：RTS和CTS&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;RTS（请求发送控制帧）&lt;/strong&gt;：源站在发送数据之前必须广播一个很短的RTS帧，它包括源地址、目的地址和这次通信所需的持续时间。
&lt;strong&gt;CTS（允许发送控制帧）&lt;/strong&gt;：在收到RTS帧后，若信道空闲，则AP（Access Point，无线接入点）广播一个CTS帧，它包括这次通信所需的持续时间（从RTS帧复制）。其他站在收到CTS帧后在指明的时间内将抑制发送。CTS由两个目的：给源站明确的发送许可；指示其他站点在预约期内不要发送。&lt;/p&gt;
&lt;h4 id=&#34;csmacd和csmaca的比较&#34;&gt;CSMA/CD和CSMA/CA的比较&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;CSMA/CD可以检测冲突，但无法避免；CSMA/CA发送数据时不能检测信道上有无冲突，在发送数据是只能尽量避免冲突&lt;/li&gt;
&lt;li&gt;CSMA/CD用于总线形以太网；CSMA/CA用于无线局域网&lt;/li&gt;
&lt;li&gt;CSMA/CD通过电缆中的电压变化检测信道状态；CSMA/CA采用能量检测、载波检测和能量载波混合检测三种方式检测信道状态&lt;/li&gt;
&lt;li&gt;CSMA/CD：发送前侦听，边发送边侦听，一旦出现碰撞马上停止发送&lt;/li&gt;
&lt;li&gt;CSMA/CA：发送数据时广播告知其他站点，让其他站点在某段时间内不要发送数据，避免出现碰撞&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;局域网&#34;&gt;局域网&lt;/h1&gt;
&lt;h2 id=&#34;局域网的基本概念与体系结构&#34;&gt;局域网的基本概念与体系结构&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;局域网（Local Area Network，LAN）&lt;/strong&gt;：指一个较小的地理范围内，将各种计算机、外部设备和数据库系统通过连接介质互相连接起来，组成资源和信息共享的计算机互连网络。
IEEE 802标准将数据链路层拆分为两个子层：逻辑链路控制子层（LLC）和介质访问控制子层（MAC）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;逻辑链路控制子层（LLC）：LLC子层与传输媒介无关，它向网络层提供4种不同的连接服务类型：
&lt;ul&gt;
&lt;li&gt;无确认无连接&lt;/li&gt;
&lt;li&gt;面向连接&lt;/li&gt;
&lt;li&gt;带确认无连接&lt;/li&gt;
&lt;li&gt;高速传输&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;介质访问控制子层（MAC）：与接入传输媒介有关的内容都放在MAC子层中，它向上层屏蔽了对物理层的各种差异，提供对物理层的统一访问控制接口，主要功能包括：
&lt;ul&gt;
&lt;li&gt;组帧和拆帧&lt;/li&gt;
&lt;li&gt;比特传输差错检测&lt;/li&gt;
&lt;li&gt;透明传输&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;局域网的主要特点&#34;&gt;局域网的主要特点：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;为一个单位所拥有，且地理范围和站点数目均有限&lt;/li&gt;
&lt;li&gt;所有站点共享较高的总带宽（即较高的数据传输速率）&lt;/li&gt;
&lt;li&gt;较低的时延和较低的误码率&lt;/li&gt;
&lt;li&gt;各站为平等关系而非主从关系&lt;/li&gt;
&lt;li&gt;能进行广播和组播&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;局域网的特性三要素&#34;&gt;局域网的特性三要素&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;拓扑结构：
&lt;ul&gt;
&lt;li&gt;星形结构&lt;/li&gt;
&lt;li&gt;环形结构&lt;/li&gt;
&lt;li&gt;总线形结构&lt;/li&gt;
&lt;li&gt;星形和总线形结合的复合形结构&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;传输介质：
&lt;ul&gt;
&lt;li&gt;双绞线（主流）&lt;/li&gt;
&lt;li&gt;铜缆&lt;/li&gt;
&lt;li&gt;光纤&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;介质访问控制方式：最重要的特性，决定局域网的技术特性：
&lt;ul&gt;
&lt;li&gt;CSMA/CD（局域网）&lt;/li&gt;
&lt;li&gt;令牌总线&lt;/li&gt;
&lt;li&gt;令牌环&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;以太网与-ieee-8023&#34;&gt;以太网与 IEEE 802.3&lt;/h2&gt;
&lt;p&gt;IEEE 802.3标准是一种基带总线形的局域网标准，描述了物理层和数据链路层的MAC子层的实现方式。&lt;/p&gt;
&lt;p&gt;以太网采用两项措施简化通信：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;采用无连接的工作方式，不对发送的数据帧编号，不要求接收方发送确认，即以太网尽最大努力交付数据，提供不可靠服务，对于差错纠正由高层完成。&lt;/li&gt;
&lt;li&gt;发送的数据都使用曼彻斯特编码，每个码元的中间出现一次电压转换，接收端利用电压转换把位同步信号提前出来。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;以太网传输介质与网卡&#34;&gt;以太网传输介质与网卡&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;th&gt;10BASE5&lt;/th&gt;
&lt;th&gt;10BASE2&lt;/th&gt;
&lt;th&gt;10BASE-T&lt;/th&gt;
&lt;th&gt;10BASE-FL&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;传输媒介&lt;/td&gt;
&lt;td&gt;基带同轴电缆（粗缆）&lt;/td&gt;
&lt;td&gt;基带同轴电缆（细缆）&lt;/td&gt;
&lt;td&gt;非屏蔽双绞线&lt;/td&gt;
&lt;td&gt;光线对（850nm）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;编码&lt;/td&gt;
&lt;td&gt;曼彻斯特编码&lt;/td&gt;
&lt;td&gt;曼彻斯特编码&lt;/td&gt;
&lt;td&gt;曼彻斯特编码&lt;/td&gt;
&lt;td&gt;曼彻斯特编码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;拓扑结构&lt;/td&gt;
&lt;td&gt;总线形&lt;/td&gt;
&lt;td&gt;总线形&lt;/td&gt;
&lt;td&gt;星形&lt;/td&gt;
&lt;td&gt;点对点&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;最大段长&lt;/td&gt;
&lt;td&gt;500m&lt;/td&gt;
&lt;td&gt;185m&lt;/td&gt;
&lt;td&gt;100m&lt;/td&gt;
&lt;td&gt;2000m&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;最多结点数目&lt;/td&gt;
&lt;td&gt;100&lt;/td&gt;
&lt;td&gt;30&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;计算机与外界局域网通信是通过网路接口板[又称网络适配器（Adapter）或网络接口卡（Network Interface Card，NIC]实现的。网卡和计算机通信是通过计算机主板上的I/O总线以并行方式进行的。网卡的主要功能是进行数据的串并转换。网卡的具体概念有：实现局域网传输介质之间的物理连接和电信号匹配，帧的发送与接收，帧的封装与拆封，介质访问控制，数据的编码与解码及数据缓存功能等。网卡主要工作在物理层和数据链路层，只关注比特，不关注任何地址信息和高层协议信息。&lt;/p&gt;
&lt;h3 id=&#34;以太网的mac帧&#34;&gt;以太网的MAC帧&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;介质访问控制（MAC）地址&lt;/strong&gt;：每块网卡在出厂时都有一个唯一的代码，称为介质访问控制（MAC）地址，也称物理地址；MAC地址长6字节，一般由连字符（或冒号）分割的12个十六进制数表示，如10-54-C8-37-C8-CD，高24位位厂商代码，低24位为网卡序列号。
由于总线是广播通信，因此网卡没收到一个MAC帧，首先检查MAC帧的MAC地址。如果是发往本站的帧，就接收，反之则丢弃。&lt;/p&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./以太网MAC帧格式.png&#34; title=&#34;&#34; alt=&#34;以太网MAC帧格式&#34;&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;前导码（8B）：使接收端和发送端时钟同步
&lt;ul&gt;
&lt;li&gt;前同步码（7B）：快速实现MAC帧的比特同步&lt;/li&gt;
&lt;li&gt;帧开始定界符（1B）：表示后面的信息就是MAC帧&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;地址（6B）：通常使用6字节表示MAC地址&lt;/li&gt;
&lt;li&gt;类型（2B）：指出数据域中携带的数据应交给那个协议实体处理&lt;/li&gt;
&lt;li&gt;数据（46~1500B）：包含高层协议信息。CSMA/CD算法的以太网帧最短帧长64B，MAC帧的首部和尾部的长度为18B，所以数据字段最短为64 - 18 = 46B&lt;/li&gt;
&lt;li&gt;FCS校验码（4B）：校验范围为目的地址到数据段末尾，算法采用32位循环冗余码，不校验前导码。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;高速以太网&#34;&gt;高速以太网&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;高速以太网&lt;/strong&gt;：速度达到或超过100Mb/s的以太网&lt;/p&gt;
&lt;h4 id=&#34;100base-t以太网&#34;&gt;100BASE-T以太网&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;在双绞线上传送100Mb/s基带信号的星形拓扑结构以太网&lt;/li&gt;
&lt;li&gt;支持半双工模式，使用CSMA/CD协议&lt;/li&gt;
&lt;li&gt;支持全双工模式，全双工模式下不使用CSMA/CD协议&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;吉比特以太网千兆以太网&#34;&gt;吉比特以太网（千兆以太网）&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;允许在1Gb/s速率下用全双工和半双工两种工作方式&lt;/li&gt;
&lt;li&gt;支持半双工模式，使用CSMA/CD协议&lt;/li&gt;
&lt;li&gt;支持全双工模式，全双工模式下不使用CSMA/CD协议&lt;/li&gt;
&lt;li&gt;与10BASE-T和100BASE-T向后兼容&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;10吉比特以太网&#34;&gt;10吉比特以太网&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;不再使用铜线而使用光纤作为传输媒介&lt;/li&gt;
&lt;li&gt;只工作在全双工方式，没有争用问题，不使用CSMA/CD协议&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;无线局域网-ieee-80211&#34;&gt;无线局域网 IEEE 802.11&lt;/h2&gt;
&lt;h3 id=&#34;无线局域网的组成&#34;&gt;无线局域网的组成&lt;/h3&gt;
&lt;h4 id=&#34;有固定基础设施无线局域网&#34;&gt;有固定基础设施无线局域网&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;固定基础设施&lt;/strong&gt;：预先建立的，能覆盖一定地理范围的固定基站。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;对于有固定基础设施无线局域网，IEEE制定了无线局域网的802.11系列协议（又称Wi-Fi）标准，包括802.11a/b/g/n等。
&lt;ul&gt;
&lt;li&gt;802.11采用星形拓扑&lt;/li&gt;
&lt;li&gt;中心称为接入点（Access Point，AP）&lt;/li&gt;
&lt;li&gt;在MAC层使用CSMA/CA协议&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;基本服务集BBS（Basic Service Set，BBS）：802.11标准规定无线局域网的最小构件
&lt;ul&gt;
&lt;li&gt;一个基本服务集BBS包括一个接入点（AP）和若干移动站&lt;/li&gt;
&lt;li&gt;各站在本基本服务集BBS中通信或与外部站通信，都必须通过基本服务集BBS的接入点AP&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;扩展服务集（Extended Service Set，ESS&lt;/strong&gt;）：一个基本服务集BBS可以是孤立的，也可以通过接入点AP连接到一个分配系统，再连接到另一个基本服务集BBS，这样就构成了扩展服务集ESS
&lt;ul&gt;
&lt;li&gt;扩展服务集ESS可以通过称为门户（Portal）的设备位无线用户提供到有线连接的以太网的接入&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;一个基本服务集BSS的地理范围称为一个基本服务区（Basic Service Area，BSA）
&lt;ul&gt;
&lt;li&gt;无线局域网的基本服务区的范围直径一般不超过100m&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;接入点AP：就是基本服务集BSS中的基站
&lt;ul&gt;
&lt;li&gt;安装AP时，必须为该AP分配一个不超过32字节的服务集标识符（Service Set IDentifier，SSID）和信道&lt;/li&gt;
&lt;li&gt;SSID是指该AP的无线局域网名字&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;无固定基础设施移动自组织网络&#34;&gt;无固定基础设施移动自组织网络&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;自组织网络（ad hoc network）&lt;/strong&gt;：一种无固定基础设施的无线局域网。自组织网络没有基本服务集BSS中的AP，而是由一些平等状态的移动站相互通信组成的临时网络。各结点之间地位平等，中间结点都为转发结点
自组织网络的构成：可移动设备在发现它们附近其他的可移动设备，并且要求和其他移动设备进行通信。自组网络中的每个移动站都要参与网络中其他移动站的路由的发现和维护，自组织网络由移动站构成的网络拓扑结构可能随时间变化的很快。&lt;/p&gt;
&lt;h3 id=&#34;80211局域网的mac帧&#34;&gt;802.11局域网的MAC帧&lt;/h3&gt;
&lt;p&gt;802.11局域网帧有三种类型：数据帧、控制帧和管理帧。数据帧主要由MAC首部、帧主体（数据部分）、MAC尾部（FCS帧校验）组成&lt;/p&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./802.11局域网MAC帧格式.png&#34; title=&#34;&#34; alt=&#34;802.11局域网MAC帧格式&#34;&gt;
&lt;/div&gt;
&lt;p&gt;802.11局域网MAC帧格式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MAC首部（30B）&lt;/li&gt;
&lt;li&gt;帧主体（0~2312B）：帧的数据部分&lt;/li&gt;
&lt;li&gt;MAC尾部（4B）：FCS帧校验序列&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MAC首部的地址字段的具体含义由帧控制中的去往AP和来自AP确定&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;去往AP&lt;/th&gt;
&lt;th&gt;来自AP&lt;/th&gt;
&lt;th&gt;地址1&lt;/th&gt;
&lt;th&gt;地址2&lt;/th&gt;
&lt;th&gt;地址3&lt;/th&gt;
&lt;th&gt;地址4&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;接收地址 = 目的地址&lt;/td&gt;
&lt;td&gt;发送地址 = AP地址&lt;/td&gt;
&lt;td&gt;源地址&lt;/td&gt;
&lt;td&gt;&amp;ndash;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;接收地址 = AP地址&lt;/td&gt;
&lt;td&gt;发送地址 = 源地址&lt;/td&gt;
&lt;td&gt;目的地址&lt;/td&gt;
&lt;td&gt;&amp;ndash;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;虚拟局域网-vlan&#34;&gt;虚拟局域网 VLAN&lt;/h2&gt;
&lt;p&gt;一个以太网是一个广播域，当一个以太网包含的计算机过多时，会导致：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;以太网出现大量的广播帧，特别是经常使用的ARP和DHCP协议&lt;/li&gt;
&lt;li&gt;一个单位的不同部门共享一个局域网，对信息保密和安全不利&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;虚拟局域网（Virtual LAN）&lt;/strong&gt;：提供VLAN可以把一个较大的局域网分割成一些较小的与地理位置无关的逻辑上的VLAN，每个VLAN是一个较小的广播域。
802.3ac标准定义了支持VLAN的以太网帧格式的扩展。在以太网帧中插入一个4字节的标识符（称为VLAN标签），用来指明发送该帧的计算机属于那个虚拟局域网。插入VLAN标签的帧称为802.1Q帧&lt;/p&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./802.1Q帧格式.png&#34; title=&#34;&#34; alt=&#34;802.1Q帧格式&#34;&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;802.1Q标签类型（2B）：规定为0x8100，表示是一个802.1Q帧&lt;/li&gt;
&lt;li&gt;标签控制信息（2B）：
&lt;ul&gt;
&lt;li&gt;前4bit：预留无用&lt;/li&gt;
&lt;li&gt;VID：VLAN标识符，唯一标识该802.1Q帧属于那个VLAN。12位的VID可识别4096个不同的VLAN&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;802.1Q帧因为添加了一个4B的VLAN标签，所以相比以太网的最大帧长1518B，其最大帧长为1522B&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;广域网&#34;&gt;广域网&lt;/h1&gt;
&lt;h2 id=&#34;广域网的基本概念&#34;&gt;广域网的基本概念&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;广域网&lt;/strong&gt;：指覆盖范围广的长距离网络。是因特网的核心部分，其任务是长距离运送主机所发送的数据。连接广域网各结点交换机的链路都是高速链路。广域网首要考虑的问题是通信容量必须足够大，以便支持日益增长的通信量。
广域网由一些结点交换机及连接交换机的链路组成。结点交换机的功能是分组存储并转发。结点之间是点到点连接，为了提高网络的可靠性，通常一个结点交换机往往与多个节点交换机相连。
广域网使用的协议主要在网络层&lt;/p&gt;
&lt;h3 id=&#34;广域网和局域网的区别与联系&#34;&gt;广域网和局域网的区别与联系&lt;/h3&gt;
&lt;table border=&#34;1&#34;&gt;
	&lt;tr&gt;
		&lt;th&gt;&lt;/th&gt;
		&lt;th&gt;广域网&lt;/th&gt;
		&lt;th&gt;局域网&lt;/th&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;覆盖范围&lt;/td&gt;
		&lt;td&gt;广，通常是跨区域&lt;/td&gt;
		&lt;td&gt;通常在一个区域内&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;连接方式&lt;/td&gt;
		&lt;td&gt; 结点之间都是点到点连接，为了提高网络的可靠性，一个结点交换机通常与多个结点交换机相连&lt;/td&gt;
		&lt;td&gt;通常采用多点接入技术&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;OSI参考模型层次&lt;/td&gt;
		&lt;td&gt;三层：网络层、数据链路层、物理层&lt;/td&gt;
		&lt;td&gt;两层：数据链路层、物理层&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;联系与相似点&lt;/td&gt;
		&lt;td colspan=&#34;2&#34;&gt;
			&lt;ol&gt;
				&lt;li&gt;广域网和局域网都是互联网的重要组成部分，从互联网的角度看，二者是平等关系&lt;/li&gt;
				&lt;li&gt;连接到一个广域网或一个局域网上的主机在该网内通信时，只需要使用其网络的物理地址&lt;/li&gt;
			&lt;/ol&gt;
		&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;着重点&lt;/td&gt;
		&lt;td&gt;强调资源共享&lt;/td&gt;
		&lt;td&gt;强度数据传输&lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;h2 id=&#34;帧中继&#34;&gt;帧中继&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;帧中继（Frame Relay）&lt;/strong&gt;：是一种用于连接计算机系统的面向分组的通信方法。它主要用在公共或专用网上的局域网互联以及广域网连接。大多数公共电信局都提供帧中继服务，把它作为建立高性能的虚拟广域连接的一种途径。帧中继是进入带宽范围从56Kbps到1．544Mbps的广域分组交换网的用户接口。&lt;/p&gt;
&lt;h3 id=&#34;帧中继的特点&#34;&gt;帧中继的特点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;使用光纤作为传输介质，因此误码率极低，能实现近似无差错传输，减少了进行差错校验的开销，提高了网络的吞吐量，它的数据传输速率和传输时延比X.25网络要分别高或低至少一个数量级。&lt;/li&gt;
&lt;li&gt;采用基于变长帧的异步多路复用技术，帧中继主要用于数据传输，而不适合语音、视频或其他对时延时间敏感的信息传输。&lt;/li&gt;
&lt;li&gt;仅提供面向连接的虚电路服务。&lt;/li&gt;
&lt;li&gt;仅能检测到传输错误，而不试图纠正错误，而只是简单地将错误帧丢弃。&lt;/li&gt;
&lt;li&gt;帧长度可变，允许最大帧长度在1600B以上。&lt;/li&gt;
&lt;li&gt;帧中继是一种宽带分组交换，使用复用技术时，其传输速率可高达44.6Mbps。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;异步传输模式atm&#34;&gt;异步传输模式（ATM）&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;异步传输模式(Asynchronous Transfer Mode，ATM)&lt;/strong&gt;：又称信息元中继：是一种信元交换和多路复用技术。是每一个字符独立形成一个帧进行传输，一个连续的字符串同样被封装成连续的独立帧进行传输，各个字符间的间隔可以是任意的，所以这种传输方式称为异步传输。
ATM采用信元（Cell）作为传输单位，信元具有固定长度，总共53字节，前5字节是信头，其余48字节是数据段。信头中有信元去向的逻辑地址、优先级、信头差错控制、流量控制等信息。ATM常被应用在光通信中。
ATM是一种面向连接的技术，采用虚连接技术，是一种为支持宽带综合业务网而专门开发的新技术，它与现在的电路交换无任何衔接。当发送端想要和接收端通信时、它通过UNI发送一个要求建立连接的控制信号。接收端通过网络收到该控制信号并同意建立连接后，一个虚拟线路就会被建立。&lt;/p&gt;
&lt;h3 id=&#34;异步传输模式特点&#34;&gt;异步传输模式特点：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ATM的基本单位是信元。&lt;/li&gt;
&lt;li&gt;ATM的信元的长度为53个字节。&lt;/li&gt;
&lt;li&gt;ATM常被应用在光通信中。&lt;/li&gt;
&lt;li&gt;ATM是面向连接的技术，采用虚连接技术。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;同步光纤网络-sonetsdh&#34;&gt;同步光纤网络 SONET/SDH&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;SONET/SDH&lt;/strong&gt;：定义了一组在光纤上传输光信号的速率和格式，通常统称为光同步数字传输网，是宽带综合数字网的基础之一。SONET/SDH采用TDM（时分复用）技术，是同步系统，由主时钟控制。&lt;/p&gt;
&lt;h1 id=&#34;数据链路层设备&#34;&gt;数据链路层设备&lt;/h1&gt;
&lt;h2 id=&#34;网桥bridge的概念和基本原理&#34;&gt;网桥（Bridge）的概念和基本原理&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;网桥&lt;/strong&gt;：早期的两端口二层网络设备。网桥的两个端口分别有一条独立的交换信道，不是共享一条背板总线，可隔离冲突域。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;两个或多个以太网通过网桥连接后，可以组成范围更大的以太网&lt;/li&gt;
&lt;li&gt;网桥工作在数据链路层的MAC子层&lt;/li&gt;
&lt;li&gt;网桥可以使各网段成为隔离的冲突域&lt;/li&gt;
&lt;li&gt;网桥各网段相对独立，一个网段的故障不会影响到另一个网段的运行&lt;/li&gt;
&lt;li&gt;网桥必须具有路径选择的功能&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;局域网交换机及其工作原理&#34;&gt;局域网交换机及其工作原理&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;局域网交换机（又称以太网交换机）&lt;/strong&gt;：本质上，以太网交换机是一个多端口的网桥。工作在数据链路层。交换机能将网络划分成更小的冲突域，为每个冲突域提高更高的带宽。&lt;/p&gt;
&lt;h3 id=&#34;交换机的原理和特点&#34;&gt;交换机的原理和特点&lt;/h3&gt;
&lt;h4 id=&#34;局域网交换机的原理&#34;&gt;局域网交换机的原理&lt;/h4&gt;
&lt;p&gt;交换机检测出从以太网端口来的数据帧的源和目的的MAC地址，从系统内部动态查找表进行比较，若数据帧源MAC地址不在查找表中，将改地址加入查找表，并将数据帧发送给对应目的端口&lt;/p&gt;
&lt;h4 id=&#34;局域网交换机的特点&#34;&gt;局域网交换机的特点&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;交换机的每个端口都直接与单台主机相连（网桥的端口往往连接到一个网段），并且一般都工作在全双工方式&lt;/li&gt;
&lt;li&gt;交换机能同时连通多个端口，使每对相互通信的主机都能像独占通信媒介那样，无碰撞传输数据&lt;/li&gt;
&lt;li&gt;交换机是一种即插即用设备，内部的帧的转发表是通过自学习算法自动建立起来的&lt;/li&gt;
&lt;li&gt;交换机使用专用的交换结构芯片，交换速率高&lt;/li&gt;
&lt;li&gt;交换机独占传输媒介的带宽&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;交换机交换模式&#34;&gt;交换机交换模式&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;直通式交换机：只检查帧的目的地址，使得帧在接收后能马上被转发出去
&lt;ul&gt;
&lt;li&gt;优点：
&lt;ul&gt;
&lt;li&gt;速度快&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;缺点：
&lt;ul&gt;
&lt;li&gt;缺乏智能性和安全性&lt;/li&gt;
&lt;li&gt;无法支持具有不同速率的端口的交换&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;存储转发式交换机：先将接收到的帧缓存到高速缓存器中，检查数据是否正确，确认无误后通过查找表将该帧发出；如果帧出错，则将其丢弃
&lt;ul&gt;
&lt;li&gt;优点：
&lt;ul&gt;
&lt;li&gt;可靠性高&lt;/li&gt;
&lt;li&gt;能支持不同速率端口间的转换&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;缺点：
&lt;ul&gt;
&lt;li&gt;延迟较大&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;交换机的自学习功能&#34;&gt;交换机的自学习功能&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;过滤&lt;/strong&gt;：决定一个帧是应该转发到某个接口还是应该将其丢弃称为过滤。
&lt;strong&gt;转发&lt;/strong&gt;：决定一个帧应该被移动到哪个接口称为转发。
交换机的过滤和转发借助于交换表完成。&lt;/p&gt;
&lt;h4 id=&#34;交换表switch-table项&#34;&gt;交换表（Switch Table）项&lt;/h4&gt;
&lt;p&gt;一个交换表表项至少包含：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个MAC地址&lt;/li&gt;
&lt;li&gt;连通该MAC地址的交换机接口&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;交换机的自学习原理&#34;&gt;交换机的自学习原理&lt;/h4&gt;
&lt;p&gt;交换机是即插即用性设备，当设备A和设备B插入交换机后。设备A向设备B发送数据，交换机从接口1获得设备A的发送数据帧。交换机A收到帧后，查找交换表，若在交换表中找不到设备A对应的MAC地址，则将（A，1）写入交换表中，查找交换表，找不到目的设备B对应的MAC地址，从除接口1外的所有接口广播该帧；若找到目的设备B对应的MAC地址，从对应接口转发出去。这样就完成了设备A的自学习功能，交换表写入（A，1）后，以后从任何接口收到目的地址为A的帧，都从接口1转发出去。
交换机所连主机会随时变化，所以需要更新交换表中的表项，因此交换表中的每个表项都设有一定的有效时间，过期表项会自动删除。保证交换机中的数据符合网络的实际情况。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>物理层</title>
        <link>/post/network/%E7%89%A9%E7%90%86%E5%B1%82/</link>
        <pubDate>Fri, 07 Oct 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/network/%E7%89%A9%E7%90%86%E5%B1%82/</guid>
        <description>&lt;h1 id=&#34;通信基础&#34;&gt;通信基础&lt;/h1&gt;
&lt;h2 id=&#34;信道信号宽带码元波特速率信道容量等基本概念&#34;&gt;信道、信号、宽带、码元、波特、速率、信道容量等基本概念&lt;/h2&gt;
&lt;h3 id=&#34;数据信号与码元&#34;&gt;数据、信号与码元&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;数据&lt;/strong&gt;：数据是指传送信息的实体。
&lt;strong&gt;信号&lt;/strong&gt;：数据的电气或电磁表现，是数据在传输过程中的存在形式。
&lt;strong&gt;码元&lt;/strong&gt;：用一个固定时长的信号波形（数字脉冲）表示一位 &lt;strong&gt;$k$进制数字&lt;/strong&gt;，代表不同离散数值的基本波形。例如：在使用二进制编码时，存在两种码元，一种代表0状态，一种代表1状态。&lt;/p&gt;
&lt;h4 id=&#34;数据和信号的类型&#34;&gt;数据和信号的类型&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;数字数据（信号）：&lt;em&gt;离散变化&lt;/em&gt;的数据（或信号）&lt;/li&gt;
&lt;li&gt;模拟数据（信号）：&lt;em&gt;连续变化&lt;/em&gt;的数据（或信号）&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;数据传输方式&#34;&gt;数据传输方式&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;串行传输：比特流按照时间顺序在一条信道上传输。&lt;/li&gt;
&lt;li&gt;并行传输：若干比特通过多条通信信道同时传输。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;信源信道与信宿通信系统模型&#34;&gt;信源、信道与信宿（通信系统模型）&lt;/h3&gt;
&lt;p&gt;一个通信系统主要划分为信源、信道和信宿三个部分。&lt;strong&gt;信源&lt;/strong&gt;是产生和发送数据的源头；&lt;strong&gt;信宿&lt;/strong&gt;是接收数据的终点，它们都是计算机或其他数字终端装置。&lt;strong&gt;信道&lt;/strong&gt;是信号的传输媒介。
发送端信源发送信息需要经过变换器转换成适合于信道上传输的信号，通过信道传送到接收端，经过反变换器转换成原始信息，发送给信宿。&lt;/p&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./通信系统模型.png&#34; title=&#34;&#34; alt=&#34;通信系统模型&#34;&gt;
&lt;/div&gt;
&lt;h4 id=&#34;信道分类&#34;&gt;信道分类&lt;/h4&gt;
&lt;h5 id=&#34;传输信号形式&#34;&gt;传输信号形式&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;数字信道：传输数字信号&lt;/li&gt;
&lt;li&gt;模拟信道：传输模型信号&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;传输介质&#34;&gt;传输介质&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;有线信道&lt;/li&gt;
&lt;li&gt;无线信道&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;传输信号&#34;&gt;传输信号&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;基带传输：将数字信号之间用两种不同的电压表示，送到数字信道上传输&lt;/li&gt;
&lt;li&gt;宽带传输：将基带信号进行调制后形成频分复用模拟信号，送到模拟信道上传输&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;通信交互方式&#34;&gt;通信交互方式&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;单向通信：只有一个方向的信道没有反方向的交互
&lt;ul&gt;
&lt;li&gt;仅需一条信道&lt;/li&gt;
&lt;li&gt;示例：无线广播、电视广播&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;半双工通信：通信双方都可以发送和接收信息，但是同一时间只允许一方进行发送数据操作
&lt;ul&gt;
&lt;li&gt;需要两条信道&lt;/li&gt;
&lt;li&gt;示例：对讲机&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;全双工通信：通信双方可以同时发送和接收信息
&lt;ul&gt;
&lt;li&gt;需要两条信道&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;速率波特与带宽&#34;&gt;速率、波特与带宽&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;速率（数据率）&lt;/strong&gt;：数据传输速率，表示单位时间内传输的数据量。可以用码元传输速率和信息传输速率表示。
&lt;strong&gt;波特（Baud）&lt;/strong&gt;：表示数字通信系统每秒传输一个码元。码元速率和进制数无关。
&lt;strong&gt;带宽&lt;/strong&gt;：原指信号具有的频带宽度，单位是赫兹（Hz）。由于带宽数据率存在数值上的互换关系，因此在网络的通信线路中表示传输数据的能力。带宽表示单位时间内网络从某一点到另一点所能通过的“最高数据率”，单位是b/s。&lt;/p&gt;
&lt;h4 id=&#34;码元传输速率与信息传输速率&#34;&gt;码元传输速率与信息传输速率&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;码元传输速率（波特率）：表示单位时间内数字通信系统所传输的码元个数（脉冲个数或信号变化的次数），单位是波特（Baud）。&lt;/li&gt;
&lt;li&gt;信息传输速率（信息速率、比特率）：单位时间内数字通信系统传输的二进制码元个数（即比特数），单位是比特/秒（b/s）。
&lt;ul&gt;
&lt;li&gt;若一个码元携带$n$比特的信息量，则$M$波特率的码元传输速率所对应的信息传输速率为$Mn$比特/秒。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;奈奎斯特定理与香农定理&#34;&gt;奈奎斯特定理与香农定理&lt;/h2&gt;
&lt;h3 id=&#34;奈奎斯特定理奈式准则无噪声信道传输能力&#34;&gt;奈奎斯特定理（奈式准则，无噪声信道传输能力）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;码间串扰&lt;/strong&gt;：信道所通过的频率范围是有限的。信号中许多高频分量往往不能通过信道，否则会在传输中衰减，导致接收端收到的信号波形失去码元之间的清晰界限。
&lt;strong&gt;奈奎斯特定理&lt;/strong&gt;：规定在理想低通（没有噪声、带宽有限）的信道中，为了避免码间串扰，极限码元传输速率为$2W$波特，其中$W$是理想低通信道的带宽。
若用$W$表示带宽，$V$表示每个码元离散电平的数目（如16种不同的码元，需要4个二进制位），则奈奎斯特定理可表示为：
$$
理想低通信道极限码元传输速率 = 2W \qquad (单位为Baud) \
理想低通信道极限信息传输速率 = 2Wlog_2V \qquad (单位为b/s)
$$&lt;/p&gt;
&lt;h4 id=&#34;奈奎斯特定理结论&#34;&gt;奈奎斯特定理结论&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;在任何信道种，码元传输速率存在上限。若传输速率超过此上限，会出现码间串扰问题，使接收端不能正确识别码元。&lt;/li&gt;
&lt;li&gt;信道的带宽越大，通过的信号高频分量越多，可用更高的速率进行码元的有效传输。&lt;/li&gt;
&lt;li&gt;奈奎斯特定理给出了码元传输速率的限制，但并未对信息传输速率做出限制，即未对一个码元对应多少个二进制位给出限制。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;香农定理带噪声信道传输能力&#34;&gt;香农定理（带噪声信道传输能力）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;香农定理&lt;/strong&gt;：给出了带宽受限且有噪声干扰的信道的极限传输速率。香农定理定义为：
$$
带噪声信道的极限数据传输速率 = Wlog_2(1 + \frac{S}{N}) \qquad (单位为b/s)
$$
其中，$W$为信道的带宽，$S$为信道所传输信号的平均功率，$N$为信道内部的噪声功率。$\frac{S}{N}$为信噪比，即信号的平均功率与噪声的平均功率之比。
$$
信噪比 = 10log_{10}(\frac{S}{N}) \qquad (单位为dB)
$$
例如，当$\frac{S}{N}) = 10$时，信噪比为$10dB$；当$\frac{S}{N}) = 1000$时，信噪比为$30dB$&lt;/p&gt;
&lt;h4 id=&#34;香农定理结论&#34;&gt;香农定理结论&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;信道的带宽或信道的信噪比越大，信息的极限传输速率越高。即噪声越小，信道的极限传输速率就越高。&lt;/li&gt;
&lt;li&gt;对一定的传输带宽和一定的信噪比，信息传输速率上限是确定的。&lt;/li&gt;
&lt;li&gt;只要信息传输速率低于信道的极限传输速率，就能找到某种方法实现无差错传输。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;编码与调制多路复用与扩频&#34;&gt;编码与调制、多路复用与扩频&lt;/h2&gt;
&lt;h3 id=&#34;编码与调制&#34;&gt;编码与调制&lt;/h3&gt;
&lt;p&gt;无论是数字信号还是模拟信号，为了在信道上传输都必须转换为对应信号。
&lt;strong&gt;编码&lt;/strong&gt;：把数据变换为数字信号的过程称为编码。
&lt;strong&gt;调制&lt;/strong&gt;：把数据变换为模拟信号的过程称为调制。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;数字数据：
&lt;ul&gt;
&lt;li&gt;通过数字发送器转换为数字信号传输&lt;/li&gt;
&lt;li&gt;通过调制器转换为模拟信号传输&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;模拟信号：
&lt;ul&gt;
&lt;li&gt;通过PCM编码器转换为数字信号传输&lt;/li&gt;
&lt;li&gt;通过放大器调制器转换为模型信号传输&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;数字数据编码为数字信号数字发送器&#34;&gt;数字数据编码为数字信号（数字发送器）&lt;/h4&gt;
&lt;p&gt;数字数据通过数字发送器编码为数字信号，用于基带传输，在基本不改变数字数据信号频率的情况下，直接传输数字信号。&lt;/p&gt;
&lt;h5 id=&#34;归零编码rz&#34;&gt;归零编码（RZ）&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;归零编码（RZ）&lt;/strong&gt;：用高电平表示1，低电平表示0，每个时钟周期中间均跳变到低电平（归零）。
&lt;ul&gt;
&lt;li&gt;接收方根据跳变调整本方的时钟基准&lt;/li&gt;
&lt;li&gt;为传输双方提供了自同步机制（归零）&lt;/li&gt;
&lt;li&gt;归零需要占用一部分带宽，传输速率受到一定的影响&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;非归零编码nrz&#34;&gt;非归零编码（NRZ）&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;非归零编码（NRZ）&lt;/strong&gt;：用高电平表示1，低电平表示0。
&lt;ul&gt;
&lt;li&gt;与RZ编码的区别是不用归零，一个周期全部用来传输数据&lt;/li&gt;
&lt;li&gt;无法传递时钟信号，难以同步&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;反向非归零编码nrzi&#34;&gt;反向非归零编码（NRZI）&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;反向非归零编码（NRZI）&lt;/strong&gt;：信号保持不变代表1，信号翻转代表0。
&lt;ul&gt;
&lt;li&gt;翻转信号本身可以作为通知机制&lt;/li&gt;
&lt;li&gt;既能传输时钟信号，又能尽量不损失系统带宽&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;曼彻斯特编码&#34;&gt;曼彻斯特编码&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;曼彻斯特编码&lt;/strong&gt;：将一个码元分为两个相等的间隔，前一个间隔为高电平而后一个间隔为低电平代表1，前一个间隔为低电平而后一个间隔为高电平代表0.
&lt;ul&gt;
&lt;li&gt;码元中间出现电平信号，即作为时钟信号（用于同步），也作为数据信号&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;差分曼彻斯特编码&#34;&gt;差分曼彻斯特编码&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;差分曼彻斯特编码&lt;/strong&gt;：将一个码元分为两个相等的间隔，前半个码元的电平与上一个码元后半个码元的电平相同表示1，前半个码元的电平与上一个码元后半个码元的电平相反表示0.
&lt;ul&gt;
&lt;li&gt;每个码元中间都有依次电平跳转，可以实现自同步，抗干扰性较好&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;数字数据调制为模型信号调制器&#34;&gt;数字数据调制为模型信号（调制器）&lt;/h4&gt;
&lt;p&gt;数字数据调制技术在发送端将数字信号转换为模拟信号，而在接收端将模拟信号还原为数字信号。&lt;/p&gt;
&lt;h5 id=&#34;幅移键控ask振幅&#34;&gt;幅移键控（ASK，振幅）&lt;/h5&gt;
&lt;p&gt;幅移键控：通过改变载波信号的振幅来表示数字1和0，抗干扰能力差。&lt;/p&gt;
&lt;h5 id=&#34;频移键控fsk频率&#34;&gt;频移键控（FSK，频率）&lt;/h5&gt;
&lt;p&gt;频移键控：通过改变载波信号的频率来表示数字1和0，抗干扰能力强，应用广泛。&lt;/p&gt;
&lt;h5 id=&#34;相移键控psk相位&#34;&gt;相移键控（PSK，相位）&lt;/h5&gt;
&lt;p&gt;相移键控：通过改变载波信号的相位来表示数字1和0。&lt;/p&gt;
&lt;h5 id=&#34;正交振幅调制qam叠加振幅与相位&#34;&gt;正交振幅调制（QAM，叠加振幅与相位）&lt;/h5&gt;
&lt;p&gt;正交振幅调制：通过叠加改变载波信号的振幅和相位来表示数字1和0。
设码元传输速率为$B$，采用$m$个相位，每个相位有$n$种振幅，则该QAM技术的信息传输速率$R$为：
$$
R = Blog_2(mn) \qquad (单位为b/s)
$$&lt;/p&gt;
&lt;h4 id=&#34;模拟信号编码为数字信号pcm编码器&#34;&gt;模拟信号编码为数字信号（PCM编码器）&lt;/h4&gt;
&lt;p&gt;将模拟信号转换为数字信号主要包括三个步骤：采样、量化和编码。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;采样：对模型信号进行周期性扫描，把时间上连续的信号变成时间上离散的信号。&lt;/li&gt;
&lt;li&gt;量化：把采样取得的电平幅值按照一定的分级标度转化为对应的数字值并采取整数，这样就把连续的电平幅值转换为离散的数字量。&lt;/li&gt;
&lt;li&gt;编码：把量化的结果转换为与之对应的二进制编码。&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;采样定理&#34;&gt;采样定理&lt;/h5&gt;
&lt;p&gt;假设原始信号中的最大频率为$f_{max}$，那么采样频率$f_{采样}$必须大于等于最大频率$f_{max}$的两倍，才能保证采样后的数字信号保留原始模拟信号的信息。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$f_{采样} \ge 2f_{max}$&lt;/li&gt;
&lt;li&gt;采样定理又称奈奎斯特定理&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;模拟信号调制为模拟信号放大器调制器&#34;&gt;模拟信号调制为模拟信号（放大器调制器）&lt;/h4&gt;
&lt;p&gt;为了实现传输的有效性，可能需要较高的频率。这种调制方式就是改变模拟信号的频率，以充分利用带宽资源。&lt;/p&gt;
&lt;h3 id=&#34;多路复用&#34;&gt;多路复用&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;多路复用&lt;/strong&gt;：指两个及其以上用户共享公用信道的一种机制。通过多路复用技术，多个终端能共享一条高速信道，从而达到节省信道资源的目的。&lt;/p&gt;
&lt;h4 id=&#34;频分多路复用fdm&#34;&gt;频分多路复用（FDM）&lt;/h4&gt;
&lt;p&gt;频分多路复用：按频谱划分信道，多路基带信号被调制在不同的频谱上。因此它们在频谱上不会重叠，即在频率上正交，但在时间上是重叠的，可以同时在一个信道内传输。频分通信也叫载波通信，是模拟通信的主要手段。&lt;/p&gt;
&lt;h4 id=&#34;时分多路复用tdm&#34;&gt;时分多路复用（TDM）&lt;/h4&gt;
&lt;p&gt;时分多路复用：将一条物理信道按时间分成若干个时间片轮流地分配给多个信号使用。每一时间片由复用的一个信号占有信道。是数字信号通信的常用手段。&lt;/p&gt;
&lt;h4 id=&#34;码分多路复用cdm&#34;&gt;码分多路复用（CDM）&lt;/h4&gt;
&lt;p&gt;码分多路复用：用户传输信息所用的信号不是靠频率或时隙的不同来区分，而是用各自不同的编码序列来区分，或者说，靠信号的不同波形来区分。&lt;/p&gt;
&lt;h2 id=&#34;电路交换报文交换与分组交换&#34;&gt;电路交换、报文交换与分组交换&lt;/h2&gt;
&lt;h3 id=&#34;电路交换&#34;&gt;电路交换&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;电路交换&lt;/strong&gt;：在进行数据传输前，两个结点之间必须先建立一条专用的物理通信路径，该路径可能经过许多中间结点。这一路径在整个数据传输期间一直被独占，在通信结束后才被释放。因此，电路交换分为三个阶段：连接建立、数据传输金额连接释放。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;优点：
&lt;ul&gt;
&lt;li&gt;通信时延小：由于通信线路为通信双方用户专用，数据直达，因此传输数据的时延非常小。&lt;/li&gt;
&lt;li&gt;有序传输：双方通信时按发送顺序传送数据，不存在失序问题。&lt;/li&gt;
&lt;li&gt;没有冲突：不同通信的双方拥有不同的信道，不会出现争用物理信道的问题。&lt;/li&gt;
&lt;li&gt;适用范围广：电路交换即适用于传输模拟信号，又适用于传输数字信号。&lt;/li&gt;
&lt;li&gt;实时性强：通信双方之间的物理通路一旦建立，双方就可以随时通信。&lt;/li&gt;
&lt;li&gt;控制简单：电路交换的交换设备（交换机）控制简单。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;缺点：
&lt;ul&gt;
&lt;li&gt;建立连接时间长&lt;/li&gt;
&lt;li&gt;线路独占：使用效率低，即使通信线路空闲，也不能供其他用户使用。&lt;/li&gt;
&lt;li&gt;灵活性差：只要双方建立的通路中的任何一点出了故障，就必须重新拨号建立新的连接。&lt;/li&gt;
&lt;li&gt;难以规格化：电路交换时，数据直达，不同类型、不同规格、不同速率的终端很难相互进行通信，也难以在通信过程中进行差错控制。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;报文交换&#34;&gt;报文交换&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;报文交换&lt;/strong&gt;：数据交换的单位是报文，报文携带又目的地址、源地址等信息。报文交换在交换结点采样的存储转发的传输方式。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;优点：
&lt;ul&gt;
&lt;li&gt;无须建立连接：报文交换不需要预先建立一条专用的通信线路，不存在建立连接时延，可随时发送报文。&lt;/li&gt;
&lt;li&gt;动态分配线路：当发送方把报文交给交换设备时，交换设备先存储整个报文，然后选择一条合适的空闲线路，将报文发送出去。&lt;/li&gt;
&lt;li&gt;提高线路可靠性：某条传输路径发送故障，可重新选择另一条路径传输数据。&lt;/li&gt;
&lt;li&gt;提高线路利用率：通信双方不是固定占有一条通信线路，因而大大提高了通信线路的利用率。&lt;/li&gt;
&lt;li&gt;提高多目的服务：一个报文可以同时发送给多目的地址。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;缺点：
&lt;ul&gt;
&lt;li&gt;由于数据进入交换结点后要经历存储转发这一过程，因而会引起转发时延。&lt;/li&gt;
&lt;li&gt;报文交换对报文的大小没有限制，这就要求网络结点需要较大的缓存空间。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;分组交换&#34;&gt;分组交换&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;分组交换&lt;/strong&gt;：将数据分为较短的固定长度的数据块，在每个数据块上加上目的地址、源地址等辅助信息组成分组（包），以存储-转发方式传输。同报文交换一样，分组交换也采用存储转发方式，但解决了报文交换中大报文传输的问题。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;优点：
&lt;ul&gt;
&lt;li&gt;无建立时延：不需要为通信双方先建立一条专用的通信线路，不存在连接建立时延，用户可随时发送分组。&lt;/li&gt;
&lt;li&gt;线路利用率高：通信双方不是固定占用一条通信线路，而是在不同的时间部分占用这条物理通路，因而大大提高了通信线路的利用率。&lt;/li&gt;
&lt;li&gt;简化了存储管理：分组的长度固定，相应的缓冲区大小也固定。&lt;/li&gt;
&lt;li&gt;加速传输：分组逐个传输，可以多个分组同时并行传输，流水线方式减少了报文的传输时间。&lt;/li&gt;
&lt;li&gt;减少了出错概率和重发数据量：因为分组较短，出错概率也相应减小。即使减小，每次重发的数据量也就大大减少了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;缺点：
&lt;ul&gt;
&lt;li&gt;存在传输时延：仍然存在存储转发时延，其结点交换机必须具有更强的处理能力。&lt;/li&gt;
&lt;li&gt;需要传输额外的信息量：每个分组都要加上源地址、目的地址和分组编号等信息，因此使得传送的信息量增大了5%~10%，降低了通信效率，增加了处理时间，使控制复杂，时延增加。&lt;/li&gt;
&lt;li&gt;当分组交换采用数据报服务时，可能会出现失序、丢失或重复分组：分组到达目的结点时，需要对分组按编号进行排序等工作；若采用虚电路服务，虽无失序问题，担忧呼叫建立、数据传输和虚电路释放三个过程。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;数据报与虚电路&#34;&gt;数据报与虚电路&lt;/h2&gt;
&lt;p&gt;分组交换根据其通信子网向端点系统提供的服务，还可分为无连接的数据报方式和面向连接的虚电路，这两种服务方式都由网络层提供。&lt;/p&gt;
&lt;h3 id=&#34;数据报&#34;&gt;数据报&lt;/h3&gt;
&lt;p&gt;用户发送一个报文时，在端系统中实现的高层协议先把报文拆分若干带有序号的数据单元，并在网络层加上地址等控制信息后形成数据报分组。不同分组可以找不同的路径，也可以按照不同的顺序到达目的地点。&lt;/p&gt;
&lt;h4 id=&#34;数据报的特点&#34;&gt;数据报的特点&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;发送分组不需要建立连接。发送方可随时发送分组。&lt;/li&gt;
&lt;li&gt;网络尽最大努力交付，传输不保证可靠性，所以可能丢失：每个分组独立选择路由，转发的路径可能不同，分组不一定按序到达目的地点。&lt;/li&gt;
&lt;li&gt;发送的分组中要包括发送端和接收端的完整地址，以便可以独立传输。&lt;/li&gt;
&lt;li&gt;分组在交换结点存储转发时，需要排队等候处理，这会带来一定的时延。通过交换结点的通信量较大或网络发送拥塞时，这种时延会大大增加，交换结点还可根据情况丢弃部分分组。&lt;/li&gt;
&lt;li&gt;网络具有冗余路径，当某个结点或一条链路出现故障时，可相应地更新转发表，寻找另一条路径转发分组，对故障的适应能力强。&lt;/li&gt;
&lt;li&gt;存储转发的延时一般较小，提高了网络的吞吐量。&lt;/li&gt;
&lt;li&gt;收发双方不独占某条链路，资源利用率高。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;虚电路&#34;&gt;虚电路&lt;/h3&gt;
&lt;p&gt;虚电路方式将数据报方式与电路交换方式结合起来，以达到最佳的数据交换效果。在分组发送之前，要求发送方和接收方建立一条逻辑上相连的虚电路，并且连接一旦建立，就固定了虚电路所对应的物理路径。与电路交换类似，整个通信过程分为三个阶段：虚电路建立、数据传输和虚电路释放。
虚电路中，端系统每次建立虚电路时，选择一个未用过的虚电路号分配给该虚电路。在传送数据时，每个数据分组不仅要有分组号、校验和等信息，还需要有其虚电路号，以区别其他虚电路上的分组。&lt;/p&gt;
&lt;h4 id=&#34;虚电路的特点&#34;&gt;虚电路的特点&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;虚电路通信链路的建立和拆除需要时间开销。&lt;/li&gt;
&lt;li&gt;虚电路的路由选择体现在连接建立阶段，连接建立后，就确定了传输路径。&lt;/li&gt;
&lt;li&gt;虚电路提供了可靠的通信功能，保证每个分组正确有序的到达，此外虚电路还提供了两个数据端点的流量控制。&lt;/li&gt;
&lt;li&gt;虚电路有一个致命的弱点。&lt;/li&gt;
&lt;li&gt;分组首部不包含目的地址，包含虚电路标识符，相对于数据报方式，其开销小。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;数据报和虚电路的比较&#34;&gt;数据报和虚电路的比较&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;数据报服务&lt;/th&gt;
&lt;th&gt;虚电路服务&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;连接的建立&lt;/td&gt;
&lt;td&gt;不需要&lt;/td&gt;
&lt;td&gt;必须要有&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;目的地址&lt;/td&gt;
&lt;td&gt;每个分组都有完整的目的地址&lt;/td&gt;
&lt;td&gt;建在连接阶段使用，之后每个分组使用虚电路号&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;路由选择&lt;/td&gt;
&lt;td&gt;每个分组独立地进行路由选择和转发&lt;/td&gt;
&lt;td&gt;同一条虚电路分组按照同一路由转发&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;分组顺序&lt;/td&gt;
&lt;td&gt;不保证有序到达&lt;/td&gt;
&lt;td&gt;保证分组有序到达&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;可靠性&lt;/td&gt;
&lt;td&gt;不保证可靠传输，可靠传输由用户主机来保证&lt;/td&gt;
&lt;td&gt;可靠性由网络保证&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;对网络故障的适应性&lt;/td&gt;
&lt;td&gt;出故障结点丢失分组，其他分组正常传输&lt;/td&gt;
&lt;td&gt;所有经过故障结点的电路均不能正常工作&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;差错处理和流量控制&lt;/td&gt;
&lt;td&gt;由用户主机进行流量控制&lt;/td&gt;
&lt;td&gt;可由分组交换网复杂，也可由用户主机负责&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;传输介质-1&#34;&gt;传输介质&lt;/h1&gt;
&lt;h2 id=&#34;双绞线同轴电缆光纤与无线传输介质&#34;&gt;双绞线、同轴电缆、光纤与无线传输介质&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;传输介质（传输媒体）&lt;/strong&gt;：是数据传输系统中发送设备和接收设置之间的物理通路&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;导向传输介质：电磁波沿着导向固体媒介（铜线、光纤）传播&lt;/li&gt;
&lt;li&gt;非导向传输介质：电磁波传播方向不固定或发散传播，传输介质可以是空气、真空或海水等。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;双绞线&#34;&gt;双绞线&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;双绞线：由采用一定规则并排绞合的、相互绝缘的铜导线组成。
&lt;ul&gt;
&lt;li&gt;绞合：减少相邻导线的电磁干扰，提高抗电磁干扰能力&lt;/li&gt;
&lt;li&gt;分类：
&lt;ul&gt;
&lt;li&gt;屏蔽双绞线（STP）：在双绞线外面加一层由金属丝编织的屏蔽层。&lt;/li&gt;
&lt;li&gt;非屏蔽双绞线（UTP）：双绞线外无屏蔽层的双绞线。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;特点：
&lt;ul&gt;
&lt;li&gt;价格便宜&lt;/li&gt;
&lt;li&gt;在局域网和传统电话网中普遍使用&lt;/li&gt;
&lt;li&gt;带宽取决于铜线的粗细和传输距离&lt;/li&gt;
&lt;li&gt;模拟信号和数据信号都可以使用双绞线&lt;/li&gt;
&lt;li&gt;通信距离一般在几千米到数十千米&lt;/li&gt;
&lt;li&gt;距离太远时，模拟信号要用放大器放大衰减的信号&lt;/li&gt;
&lt;li&gt;距离太远时，数字传输要用中继器将失真的信号整形&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;同轴电缆&#34;&gt;同轴电缆&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;同轴电缆：由内导体、绝缘层、网状编织屏蔽层和塑料外层构成。
&lt;ul&gt;
&lt;li&gt;分类：
&lt;ul&gt;
&lt;li&gt;基带同轴电缆：$50 \Omega$同轴电缆，主要用于传输基带数字信号。在局域网中应用广泛&lt;/li&gt;
&lt;li&gt;宽带同轴电缆：$75 \Omega$同轴电缆，主要用于传输宽带信号。主要用于有线电视系统。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;特点：
&lt;ul&gt;
&lt;li&gt;具有良好的抗干扰性（外导体屏蔽层作用）&lt;/li&gt;
&lt;li&gt;广泛用于较高速率的数据传输，传输距离更远&lt;/li&gt;
&lt;li&gt;价格比双绞线贵&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;光纤&#34;&gt;光纤&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;光纤：主要利用光导纤维传递光脉冲来进行通信。
&lt;ul&gt;
&lt;li&gt;有光脉冲表示1，无关脉冲表示0，可见光频率约为$10^8MHz$，带宽范围大&lt;/li&gt;
&lt;li&gt;构成：光纤主要由纤芯和包层构成。
&lt;ul&gt;
&lt;li&gt;纤芯：纤芯很细，其直径只有$8$至$10 \mu m$，光波通过纤芯传导&lt;/li&gt;
&lt;li&gt;包层：包层有较低的折射率，当光波通过包层时就会折射回纤芯，这个过程不断重复，光就沿着光纤传输下去。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;分类：
&lt;ul&gt;
&lt;li&gt;多模光纤：利用光的全反射特性，可以将不同角度入射的多条光线在一条光纤中传输
&lt;ul&gt;
&lt;li&gt;光源：发光二极管&lt;/li&gt;
&lt;li&gt;只适合于近距离传输，光波在多模光纤中传输会逐渐失真&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;单模光纤：光纤的直径减小到只有一个光的波长时，可使光线一直向前传输，不会产生多次反射
&lt;ul&gt;
&lt;li&gt;光源：定向性很好的半导体激光器&lt;/li&gt;
&lt;li&gt;纤芯很细，只有几微米，成本高&lt;/li&gt;
&lt;li&gt;光纤衰减小，适合远距离传输&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;特点：
&lt;ul&gt;
&lt;li&gt;传输损耗小，远距离传输特别经济。&lt;/li&gt;
&lt;li&gt;抗雷电和电磁干扰性能好。&lt;/li&gt;
&lt;li&gt;无串音干扰，保密性好，不易被窃听或截取数据。&lt;/li&gt;
&lt;li&gt;体积小，重量轻。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;无线传输介质&#34;&gt;无线传输介质&lt;/h3&gt;
&lt;h4 id=&#34;无线电波&#34;&gt;无线电波&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;无线电波：
&lt;ul&gt;
&lt;li&gt;穿透能力强，传输距离长&lt;/li&gt;
&lt;li&gt;广泛应用于通信领域，如手机通信、无线局域网等&lt;/li&gt;
&lt;li&gt;信号向所有方向散播，简化了通信连接&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;微波红外线和激光视线介质&#34;&gt;微波、红外线和激光（视线介质）&lt;/h4&gt;
&lt;p&gt;高带宽的无线通信主要使用三种技术：微波、红外线和激光。它们需要发送方和接收方之间存在一条视线通路，有很强的方向性，沿直线传播，统称为视线介质。
微波通信频率高、频段范围宽，载波频率通常为2~40GHz，通信容量大。
微波通信沿直线传播，在地面的传播距离有限，超过一定距离需要中继站接力。&lt;/p&gt;
&lt;h4 id=&#34;卫星通信&#34;&gt;卫星通信&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;卫星通信：通过利用地球同步卫星作为中继来转发微波信号，克服了地面微波通信距离限制。
&lt;ul&gt;
&lt;li&gt;优点：通信容量大，距离远，覆盖广&lt;/li&gt;
&lt;li&gt;缺点：保密性差、端到端传播时延长&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;物理层接口的特性&#34;&gt;物理层接口的特性&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;物理层的主要任务&lt;/strong&gt;可以描述为确定与传输媒体的接口有关的一些特性：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;机械特性：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置&lt;/li&gt;
&lt;li&gt;电气特性：指明接口电缆各条线上出现的电压范围&lt;/li&gt;
&lt;li&gt;功能特性：指明某条线上某一电平的电压表示何意义&lt;/li&gt;
&lt;li&gt;过程特性（规程特性）：指明对于不同功能的各种可能事件的出现顺序&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;物理层设备&#34;&gt;物理层设备&lt;/h1&gt;
&lt;h2 id=&#34;中继器&#34;&gt;中继器&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;中继器&lt;/strong&gt;：主要功能是将信号整形并放大再转发出去，以消除信号在传输中产生的失真和衰减，使信号的波形和强度达到要求，扩大网络的传输距离。&lt;/p&gt;
&lt;h2 id=&#34;集线器hub多端口中继器&#34;&gt;集线器（Hub，多端口中继器）&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;集线器（Hub）&lt;/strong&gt;：主要功能是对接收到的信号进行再生整形放大，以扩大网络的传输距离，同时把所有节点集中在以它为中心的节点上。其实质是一个多端口的中继器。
集线器在处理完信号后，将其转发给除输入端的所有其他段，因此其不具备定向传输能力。同一时间只能有一个端口输入，如果同时有多个端口输入，那么输出时会产生冲突。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>计算机网络体系结构</title>
        <link>/post/network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/</link>
        <pubDate>Tue, 27 Sep 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/</guid>
        <description>&lt;h1 id=&#34;计算机网络的概念组成与功能&#34;&gt;计算机网络的概念、组成与功能&lt;/h1&gt;
&lt;h2 id=&#34;计算机网络的概念&#34;&gt;计算机网络的概念&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;计算机网络&lt;/strong&gt;：计算机网络是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的网络软件（即网络通信协议、信息交换方式、网络操作系统等）实现网络中资源共享和信息传递的系统。
简而言之：计算机网络就是一些互联的、自治的计算机系统的集合。&lt;/p&gt;
&lt;h2 id=&#34;计算机网络的组成&#34;&gt;计算机网络的组成&lt;/h2&gt;
&lt;h3 id=&#34;组成部分&#34;&gt;组成部分&lt;/h3&gt;
&lt;p&gt;一个完整的计算机网络主要由硬件、软件、协议三大部分组成&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;硬件：
&lt;ul&gt;
&lt;li&gt;主机（也称端系统）&lt;/li&gt;
&lt;li&gt;通信链路（如双绞线、光纤等）&lt;/li&gt;
&lt;li&gt;交换设备（如路由器、交换机等）&lt;/li&gt;
&lt;li&gt;通信处理机（如网卡等）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;软件：
&lt;ul&gt;
&lt;li&gt;实现&lt;em&gt;资源共享&lt;/em&gt;的软件&lt;/li&gt;
&lt;li&gt;方便用户使用的&lt;em&gt;工具软件&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;软件在计算机网络中多属于应用层&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;协议：
&lt;ul&gt;
&lt;li&gt;计算机网络的核心&lt;/li&gt;
&lt;li&gt;规定了网络传输数据时所遵循的规范&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;工作方式&#34;&gt;工作方式&lt;/h3&gt;
&lt;p&gt;从工作方式来看，计算机网络（这里主要指因特网，Internet）可分为边缘部分和核心部分。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;边缘部分：由所有连接到因特网上、供用户直接使用的主机组成
&lt;ul&gt;
&lt;li&gt;用来进行通信（传输数据、音频或视频）&lt;/li&gt;
&lt;li&gt;进行资源共享&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;核心部分：由大量的网络和连接这些网络的路由器组成
&lt;ul&gt;
&lt;li&gt;为边缘部分提供连通性和交换服务&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;功能组成&#34;&gt;功能组成&lt;/h3&gt;
&lt;p&gt;从功能组成上看，计算机网络主要由通信子网和资源子网组成。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;通信子网：由各种传输介质、通信设备和相应的网络协议组成
&lt;ul&gt;
&lt;li&gt;使网络具有数据传输、交换、控制和存储能力&lt;/li&gt;
&lt;li&gt;实现联网计算机的数据通信&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;资源子网：实现资源共享功能的设备及其软件的集合
&lt;ul&gt;
&lt;li&gt;向网络用户提供共享在其他计算机上的硬件资源、软件资源和数据资源服务&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;计算机网络的功能&#34;&gt;计算机网络的功能&lt;/h2&gt;
&lt;p&gt;计算机网络主要有以下五大功能：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;数据通信&lt;/strong&gt;：用来实现联网计算机之间各种信息的传输，并将分散在不同地理位置的计算机联系起来，进行统一的调配、控制和管理。
&lt;ul&gt;
&lt;li&gt;计算机网络最基本和最重要的功能。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;资源共享&lt;/strong&gt;：使计算机网络中的资源相互联通、分工协作，从而提高硬件资源、软件资源和数据资源的利用率。
&lt;ul&gt;
&lt;li&gt;计算机网络资源主要分为：硬件资源、软件资源和数据资源。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;分布式处理：当计算机网络中的某个计算机系统负载过高时，可以将其处理的某个复杂任务分配给网络中的其他计算机系统，利用空闲计算机资源提高整个系统的利用率。&lt;/li&gt;
&lt;li&gt;提高可靠性：计算机网络中的多台计算机可以通过网络互为替代机。&lt;/li&gt;
&lt;li&gt;负载均衡：将工作任务均衡的分配给计算机网络中的各个计算机。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;计算机网络的分类&#34;&gt;计算机网络的分类&lt;/h2&gt;
&lt;h3 id=&#34;分布范围&#34;&gt;分布范围&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;广域网（WAN）：也称远程网
&lt;ul&gt;
&lt;li&gt;提供长距离通信&lt;/li&gt;
&lt;li&gt;是因特网的核心。&lt;/li&gt;
&lt;li&gt;覆盖范围通常是直径为几十千米到几千千米的区域&lt;/li&gt;
&lt;li&gt;各结点交换机的链路一般是高速链路，具有较大的通信容量&lt;/li&gt;
&lt;li&gt;使用交换技术&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;城域网（MAN）：
&lt;ul&gt;
&lt;li&gt;覆盖范围可以跨越几个街区甚至整个城市&lt;/li&gt;
&lt;li&gt;盖区域的直径范围是5~50km&lt;/li&gt;
&lt;li&gt;采用以太网技术，所以常并入局域网的范围讨论&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;局域网（LAN）：
&lt;ul&gt;
&lt;li&gt;覆盖范围较小，通常是直径几十米到几千米的区域&lt;/li&gt;
&lt;li&gt;传统的局域网使用广播技术&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;个人区域网（PAN）：也称无线个人区域网（WPAN）
&lt;ul&gt;
&lt;li&gt;个人工作的地方将消费电子设备用无线技术连接起来的网络&lt;/li&gt;
&lt;li&gt;覆盖区域直径约为10m&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;传输技术&#34;&gt;传输技术&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;广播式网络：所有联网计算机都共享一个公告通信信道。当一台计算机利用共享通信信道发送报文分组时，其他计算机都会“收听”这个分组。接受到该分组的计算机通过检查目的地址决定是否接收该分组。
&lt;ul&gt;
&lt;li&gt;局域网：广播式通信技术&lt;/li&gt;
&lt;li&gt;广域网中的无线、卫星通信网络：广播式通信技术&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;点对点网络：每条物理线路连接一对计算机主机。若通信的两天主机之间没有直接连接的线路，则它们之间的分组传输就要通过中间结点进行接收、存储和转发，直到目的结点。
&lt;ul&gt;
&lt;li&gt;广域网：基本采用点对点通信技术&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;拓扑结构&#34;&gt;拓扑结构&lt;/h3&gt;
&lt;p&gt;网络拓扑结构是指由网络中结点（主机、路由器）与通信线路（网线）之间的几何关系表示的网络结构，主要指通信子网的拓扑结构。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;总线型网络：用单根传输线把计算机连接起来。
&lt;ul&gt;
&lt;li&gt;优点：建网容易、增删结点方便、节省线路&lt;/li&gt;
&lt;li&gt;缺点：重负载时通信效率不高、总线对故障敏感&lt;/li&gt;
&lt;li&gt;多用于局域网&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;星型网络：每个终端或计算机都以单独的线路与中央设备相连。
&lt;ul&gt;
&lt;li&gt;优点：便于控制和管理，端用户之间通信必须经过中央设备&lt;/li&gt;
&lt;li&gt;缺点：成本高、中央设备对故障敏感&lt;/li&gt;
&lt;li&gt;多用于局域网&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;环形网络：所有计算机设备连接成一个环。
&lt;ul&gt;
&lt;li&gt;环中信号是单向传输&lt;/li&gt;
&lt;li&gt;多用于局域网&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;网状网络：每个结点至少有两条路径与其他结点相连，组成一个网。
&lt;ul&gt;
&lt;li&gt;有规则型和非规则型两种&lt;/li&gt;
&lt;li&gt;优点：可靠性高&lt;/li&gt;
&lt;li&gt;缺点：控制复杂、线路成本高&lt;/li&gt;
&lt;li&gt;多用于广域网&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;使用者&#34;&gt;使用者&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;公用网（Public Network）：电信公司出资建造的大型网络。按电信公司规定交纳费用的人都可以使用。&lt;/li&gt;
&lt;li&gt;专用网（Privat Network）：某个部门或机构为满足本单位特殊业务需要而建造的网络。这种网络不向外人提供服务。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;交换技术&#34;&gt;交换技术&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;交换技术&lt;/strong&gt;：交换技术是指各台主机之间、各通信设备之间或主机与通信设备之间为交换信息所采用的数据格式和交换装置的方式。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;电路交换网络：在源结点和目的结点之间建立一条专用的通路用于传送数据，包括建立连接、传输数据和断开连接三个阶段。
&lt;ul&gt;
&lt;li&gt;特点：整个报文的比特流连续的从源结点直达目的结点。&lt;/li&gt;
&lt;li&gt;优点：数据直接传输、时延小。&lt;/li&gt;
&lt;li&gt;缺点：线路利用率低、不能充分利用线路容量、不便于进行差错控制。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;报文交换网络（存储-转发网络）：用户数据加上源地址、目的地址、校验码等辅助信息，然后封装称报文，整个报文传送到相邻的结点。全部存储后，再转发给下一个结点，重复这一过程直到到达目的结点。
&lt;ul&gt;
&lt;li&gt;每个报文可以单独选择到达目的结点的路径。&lt;/li&gt;
&lt;li&gt;特点：整个报文先传送到相邻结点，全部存储后查找转发表，转发到下一个结点。&lt;/li&gt;
&lt;li&gt;优点：
&lt;ul&gt;
&lt;li&gt;较充分的利用线路容量&lt;/li&gt;
&lt;li&gt;实现不同链路之间不同数据传输速率的转换&lt;/li&gt;
&lt;li&gt;实现格式转换&lt;/li&gt;
&lt;li&gt;实现一对多、多对一的访问&lt;/li&gt;
&lt;li&gt;实现差错控制&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;缺点：
&lt;ul&gt;
&lt;li&gt;增大了资源开销（存储报文信息）&lt;/li&gt;
&lt;li&gt;增大了缓冲时延&lt;/li&gt;
&lt;li&gt;需要额外机制保证报文不乱序&lt;/li&gt;
&lt;li&gt;缓冲区难以管理&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;分组交换网络（包交换网络）：将数据分为较短的固定长度的数据块，在每个数据块上加上目的地址、源地址等辅助信息组成分组（包），以存储-转发方式传输。
&lt;ul&gt;
&lt;li&gt;特点：以单个分组（整个报文的一小部分）传送到相邻结点，存储后查找转发表，转发到下一结点。&lt;/li&gt;
&lt;li&gt;优点：
&lt;ul&gt;
&lt;li&gt;具有报文交换网络的所有优点&lt;/li&gt;
&lt;li&gt;缓冲易于管理&lt;/li&gt;
&lt;li&gt;包的平均时延更小&lt;/li&gt;
&lt;li&gt;网络占用的平均缓冲区更少&lt;/li&gt;
&lt;li&gt;更易于标准化&lt;/li&gt;
&lt;li&gt;更易于应用&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;主流网络基本都使用分组交换网络&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;传输介质&#34;&gt;传输介质&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;有线：分为双绞线、同轴电缆网络等&lt;/li&gt;
&lt;li&gt;无线：蓝牙、微波、无线电等类型&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;计算机网络的标准化工作及相关组织&#34;&gt;计算机网络的标准化工作及相关组织&lt;/h2&gt;
&lt;h3 id=&#34;计算机网络的标准化工作&#34;&gt;计算机网络的标准化工作&lt;/h3&gt;
&lt;p&gt;因特网的所有标准都以RFC（Request For Comments）是形式在因特网上发布，RFC要上升为因特网正式标准需要经过以下4各阶段。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;因特网草案：这个阶段还不是RFC文档&lt;/li&gt;
&lt;li&gt;建议标准：从这个阶段开始成为RFC文档&lt;/li&gt;
&lt;li&gt;草案标准&lt;/li&gt;
&lt;li&gt;因特网标准&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;计算机网络的标准化工作的相关组织&#34;&gt;计算机网络的标准化工作的相关组织&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;国际标准化组织（ISO）：主要标准或规范有OSI参考模型，HDLC协议等。&lt;/li&gt;
&lt;li&gt;国际电信联盟（ITU）：
&lt;ul&gt;
&lt;li&gt;前身是国际电话电报咨询委员会（CCITT）&lt;/li&gt;
&lt;li&gt;下属机构ITU-T制定了大量有关远程通信的标准&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;国际电气电子工程师协会（IEEE）：世界上最大的专业技术团队，由计算机和工程学专业人士组成。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;计算机网络体系结构与参考模型&#34;&gt;计算机网络体系结构与参考模型&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;体系结构（Architecture）&lt;/strong&gt;：计算机网络的各层及其协议的集合称为体系结构。它是计算机网络中的各层次、各层的协议及层间接口的集合。&lt;/p&gt;
&lt;h2 id=&#34;计算机网络分层结构&#34;&gt;计算机网络分层结构&lt;/h2&gt;
&lt;p&gt;两个系统中实体间通信是一个复杂的过程，为了降低系统的复杂度，通常对计算机网络的体系结构进行分层，每层处理执行不同的功能以降低系统的复杂度。&lt;/p&gt;
&lt;h3 id=&#34;计算机网络分层的基本原则&#34;&gt;计算机网络分层的基本原则&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;每层都实现一种相对独立的功能，降低系统的复杂度&lt;/li&gt;
&lt;li&gt;各层之间界面自然清晰，易于理解，相互交流尽可能少&lt;/li&gt;
&lt;li&gt;各层功能的精确定义独立于具体的实现方法，可以采用最合适的技术来实现&lt;/li&gt;
&lt;li&gt;保持下层对上层的独立性，上层单向使用下层提供的服务&lt;/li&gt;
&lt;li&gt;整个分层结构应能促进标准化工作&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;计算机网络层次结构基本概念与术语&#34;&gt;计算机网络层次结构基本概念与术语&lt;/h3&gt;
&lt;p&gt;按照一定规则，将分层后的网络从低到高依次称为第1层、第2层$\cdots$第$n$层。
在分层结构中，第$n$层的活动元素通常称为&lt;strong&gt;第$n$层实体&lt;/strong&gt;。
不同机器上的同一层称为&lt;strong&gt;对等层&lt;/strong&gt;，同一层的实体称为&lt;strong&gt;对等实体&lt;/strong&gt;。
第$n$层实体实现的服务为第$n + 1$层所利用，第$n$层称为服务提供者，第$n + 1$层则服务于用户。&lt;/p&gt;
&lt;h4 id=&#34;报文&#34;&gt;报文&lt;/h4&gt;
&lt;p&gt;在计算机网络系统结构的各个层次中，每个报文都分为两部分：一是数据部分（SDU）；二是控制信息部分（PCI），它们共同组成PDU。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;服务数据单元（SDU，Service Data Unit）：为完成用户所要求的功能而应发送的数据。
&lt;ul&gt;
&lt;li&gt;n-SDU：第$n$层服务数据单元称为n-SDU。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;协议控制信息（PCI，Protocol Control Information）：控制协议操作的信息。
&lt;ul&gt;
&lt;li&gt;n-PCI：第$n$层协议控制信息称为n-PCI。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;协议数据单元（PDU，Protocol Data Unit）：对等层次之间传送的数据单位称为该层的PDU。
&lt;ul&gt;
&lt;li&gt;n-PDU：第$n$层协议数据单元称为n-PDU。&lt;/li&gt;
&lt;li&gt;物理层PDU：比特&lt;/li&gt;
&lt;li&gt;数据链路层PDU：帧&lt;/li&gt;
&lt;li&gt;网络层PDU：分组&lt;/li&gt;
&lt;li&gt;传输层PDU：报文段&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在各层传输数据时，把从第$n + 1$层收到的PDU作为第$n$层的SDU，加上第$n$层的PCI，就变成了第$n$层的PDU，交给第$n - 1$层后作为SDU发送，接收方接收时做相反的处理，因此三者的关系为：$n-SDU + n-PCI = n-PDU = (n - 1)-SDU$&lt;/p&gt;
&lt;h3 id=&#34;计算机网络层次结构的含义&#34;&gt;计算机网络层次结构的含义&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;第$n$层的实体不仅要使用第$n - 1$层的服务来实现自身定义的功能，还要向第$n + 1$层提供本层的服务，该服务是第$n$层及其下面各层提供服务的总和。&lt;/li&gt;
&lt;li&gt;最低层只提供服务，是整个层次结构的基础；中间各层既是下一层的服务使用者，又是上一层的服务提供者；最高层面向用户提供服务。&lt;/li&gt;
&lt;li&gt;上一层只能通过相邻层间的接口使用下一层的服务，不能调用其他层的服务；下一层所提供的服务的实现细节对上一层透明。&lt;/li&gt;
&lt;li&gt;两条主机通信时，对等层在逻辑上有一条直接信道，表示为不经过下层就能把信息传送给对方。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;计算机网络协议接口服务等概念&#34;&gt;计算机网络协议、接口、服务等概念&lt;/h2&gt;
&lt;h3 id=&#34;协议&#34;&gt;协议&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;协议&lt;/strong&gt;：指规则的集合，是对等实体之间为通信制定的有关通信规则约定的集合。
协议的三要素：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;语法：规定了传输数据的格式。&lt;/li&gt;
&lt;li&gt;语义：规定了所要完成的功能，即需要发出何种控制信息、完成何种动作及做出何种应答。&lt;/li&gt;
&lt;li&gt;同步：规定了执行各种操作的条件、时序关系等，即事件实现顺序的详细说明。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;接口服务访问点sap&#34;&gt;接口（服务访问点，SAP）&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;接口（服务访问点，SAP，Service Access Point）&lt;/strong&gt;：是同一系统中相邻两层的实体进行交互的连接点。每层只能为紧邻的层次定义接口，不能跨层次定义接口。&lt;/p&gt;
&lt;h3 id=&#34;服务&#34;&gt;服务&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;服务&lt;/strong&gt;：为保证上层对等实体之间的相互通信，下层为上层提供的功能。它是垂直的，在协议的控制下，本层为上层提供服务，同时实现本层协议还需要使用下一层提供的服务。&lt;/p&gt;
&lt;h4 id=&#34;服务原语&#34;&gt;服务原语&lt;/h4&gt;
&lt;p&gt;上层使用下层所提供的服务时必须与下层交换一些命令，这些命令在OSI参考模型中称为&lt;strong&gt;服务原语&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;OSI参考模型将原语划分为4类：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;请求（Request）：由服务用户发往服务提供者，请求完成某项工作。&lt;/li&gt;
&lt;li&gt;指示（Indication）：由服务提供者发往服务用户，指示用户做某件事情。&lt;/li&gt;
&lt;li&gt;响应（Response）：由服务用户发往服务提供者，作为对指示的响应。&lt;/li&gt;
&lt;li&gt;证实（Confirmation）：由服务提供者发往服务用户，作为对请求的证实。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;服务分类&#34;&gt;服务分类&lt;/h4&gt;
&lt;h5 id=&#34;面向连接服务与无连接服务&#34;&gt;面向连接服务与无连接服务&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;面向连接服务：通信前双方必须先建立连接，分配相应的资源，以保证通信的正常进行，传输结束后释放连接和所占用的资源。
&lt;ul&gt;
&lt;li&gt;面向连接服务分为：建立连接、数据传输、连接释放三个阶段&lt;/li&gt;
&lt;li&gt;TCP是典型的面向连接服务协议&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;无连接服务：通信前双方不需要先建立连接，需要发送数据时可直接发送，把每个带有目的地址的报文传送到线路上，由系统选定路线进行传输。
&lt;ul&gt;
&lt;li&gt;是不可靠的服务&lt;/li&gt;
&lt;li&gt;尽最大努力交付（Best-Effort-Delivery）：并不保证通信的可靠性&lt;/li&gt;
&lt;li&gt;IP、UDP是典型的无连接服务协议&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;可靠服务和不可靠服务&#34;&gt;可靠服务和不可靠服务&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;可靠服务：可靠服务指网络具有纠错、检错、应答机制，能保证数据正确的，可靠地传送到目的地。&lt;/li&gt;
&lt;li&gt;不可靠服务：网络尽量正确、可靠地传送，不能保证数据正确、可靠地传送到目的地，是一种尽力而为的服务。
&lt;ul&gt;
&lt;li&gt;不可靠服务网络的正确性、可靠性要由应用或用户来保障&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;有应答服务和无应答服务&#34;&gt;有应答服务和无应答服务&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;有应答服务：接收方收到数据后向发送方给出相应的应答，该应答由传输系统内部自动实现，而不由用户来实现。
&lt;ul&gt;
&lt;li&gt;拥有请求、指示、响应和证实全部4类原语&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;无应答服务：接收方收到数据后不自动给出应答。若需要应答，由高层实现。
&lt;ul&gt;
&lt;li&gt;只有请求和指示两类原语&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;isoosi-参考模型和-tcpip-模型&#34;&gt;ISO/OSI 参考模型和 TCP/IP 模型&lt;/h2&gt;
&lt;h3 id=&#34;开放系统互连参考模型osi参考模型&#34;&gt;开放系统互连参考模型（OSI参考模型）&lt;/h3&gt;
&lt;p&gt;国际标准化组织（ISO）提出的网络体系结构模型，称为开放系统互连参考模型（OSI/RM），统称为OSI参考模型。
OSI参考模型有7层，从下到上分别为：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层。低三层统称为&lt;strong&gt;通信子网&lt;/strong&gt;，为了联网而附加的通信设备，完成数据的传输功能；高三层统称为&lt;strong&gt;资源子网&lt;/strong&gt;，相当于计算机系统，完成数据的处理功能。传输层起到承上启下的作用。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;物理层（Physical Layer）：数据终端设备（DTE）和数据通信设备（DCE）的物理与逻辑连接方法。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;传输单位：比特&lt;/li&gt;
&lt;li&gt;任务：透明地传输比特流&lt;/li&gt;
&lt;li&gt;功能：在物理媒体上为数据端设备透明地传输原始比特流&lt;/li&gt;
&lt;li&gt;研究内容：
&lt;ul&gt;
&lt;li&gt;通信链路与通信结点的连接需要电路接口，物理层规定了这些接口的参数，如机械形状和尺寸、交换电路的数量和排列等&lt;/li&gt;
&lt;li&gt;物理层规定了通信链路上传输的信号的意义和电气特征&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;数据链路层（Data Link Layer）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;传输单位：帧&lt;/li&gt;
&lt;li&gt;任务：将网络层传来的IP数据组装成帧&lt;/li&gt;
&lt;li&gt;功能：组装成帧、差错控制、流量控制和传输管理&lt;/li&gt;
&lt;li&gt;典型协议：HDLC、PPP、ADSL等&lt;/li&gt;
&lt;li&gt;提供点到点（主机到主机）之间的通信&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;网络层（Network Layer）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;传输单位：数据报&lt;/li&gt;
&lt;li&gt;任务：把网络层的协议数据单元（分组）从源端传送到目的端，为分组交换网上的不同主机提供通信服务&lt;/li&gt;
&lt;li&gt;功能：路由选择、流量控制、拥塞控制、差错控制和网络互联&lt;/li&gt;
&lt;li&gt;典型协议：IP、ICMP、IGMP、ARP等&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;传输层（Transport Layer）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;传输单位：报文段（TCP）或数据报（UDP）&lt;/li&gt;
&lt;li&gt;任务：负责主机中两个进程之间的通信&lt;/li&gt;
&lt;li&gt;功能：为端到端连接提供可靠传输服务、为端到端连接提供流量控制、差错控制、服务质量、数据传输管理等服务&lt;/li&gt;
&lt;li&gt;典型协议：TCP、UDP&lt;/li&gt;
&lt;li&gt;提供端到端（进程与进程）之间的通信&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;会话层（Session Layer）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;允许不同主机各个进程之间进行会话。&lt;/li&gt;
&lt;li&gt;会话（建立同步，SYN）：表示层实体或用户进程建立连接并在连接上有序地传输数据的过程。&lt;/li&gt;
&lt;li&gt;功能：
&lt;ul&gt;
&lt;li&gt;管理主机间的会话进程&lt;/li&gt;
&lt;li&gt;数据同步：使用校验点使通信失效时可以从校验点继续恢复通信&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;表示层（Presentation Layer）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;任务：处理两个通信系统中交换信息的表示方式&lt;/li&gt;
&lt;li&gt;功能：数据压缩、加密和解密，数据表示变换&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;应用层（Application Layer）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为特定类型的网络应用提供访问OSI参考模型环境的手段&lt;/li&gt;
&lt;li&gt;典型协议：FTP、SMTP、HTTP等&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;tcpip模型&#34;&gt;TCP/IP模型&lt;/h3&gt;
&lt;p&gt;ARPA在研究ARPAnet时提出的TCP/IP模型，模型从低到高依次为网络接口层（对应OSI参考模型的物理层和数据链路层）、网际层、传输层和应用层（对应OSI参考模型的会话层、表示层和应用层）。TCP/IP以模型中两个最主要的协议命名，应广泛使用已成为事实上的国际标准。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;网络接口层：
&lt;ul&gt;
&lt;li&gt;类似于OSI参考模型的物理层和数据链路层&lt;/li&gt;
&lt;li&gt;作用：从主机或结点接收IP分组，并把它们发送到指定的物理网络上&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;网际层（主机-主机）：
&lt;ul&gt;
&lt;li&gt;类似于OSI参考模型的网络层&lt;/li&gt;
&lt;li&gt;作用：将分组发往任何网络，并为之独立地选择合适的路由，但不保证各个分组有序地到达，各个分组有序的交付由高层负责&lt;/li&gt;
&lt;li&gt;典型协议：IP&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;传输层（应用到应用或进程到进程）：
&lt;ul&gt;
&lt;li&gt;类似于OSI参考模型的传输层&lt;/li&gt;
&lt;li&gt;作用：使得发送端和目的端主机上的对等实体进行会话&lt;/li&gt;
&lt;li&gt;典型协议：
&lt;ul&gt;
&lt;li&gt;传输控制协议（Transmission Control Protocol，TCP）：面向连接的，数据传输的单位是报文段，能够提供可靠的交付。&lt;/li&gt;
&lt;li&gt;用户数据报协议（User Datagram Protocol，UDP）：无连接的，数据传输的单位是数据报，不保证可靠交付，只能提供“尽最大努力交付”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;应用层（用户到用户）：
&lt;ul&gt;
&lt;li&gt;类似于OSI参考模型的会话层、表示层和应用层&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;osi参考模型和tcpip模型的比较&#34;&gt;OSI参考模型和TCP/IP模型的比较&lt;/h3&gt;
&lt;h4 id=&#34;相同点&#34;&gt;相同点&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;都采用分层的体系结构，将复杂的问题划分为若干较容易的问题，分层的功能大体相似&lt;/li&gt;
&lt;li&gt;都是基于独立的协议栈的概念&lt;/li&gt;
&lt;li&gt;二者都可以解决异构网络的互连，实现不同厂家生产的计算机之间的通信&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;不同点&#34;&gt;不同点&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;OSI参考模型精确地定义了三个主要概念：协议、服务和接口，符合现代面向对象程序设计思想；TCP/IP在概念上没有明确区分&lt;/li&gt;
&lt;li&gt;OSI参考模型产生协议之前没有偏向特定协议，通用性良好；TCP/IP首先出现的是协议，模型实际上是对已有协议的描述&lt;/li&gt;
&lt;li&gt;OSI参考模型最初只考虑一种标准的公用数据网将各种不同的系统互连，在认识到IP的重要性后，将网络层划分出一个子层完成类似于IP的功能；TCP/IP模型在设计之初就考虑到了多种异构网的互联问题，并将IP作为一个单独的重要层次&lt;/li&gt;
&lt;li&gt;OSI参考模型在网络层支持无连接和面向连接的通信，但在传输层仅有面向连接的通信；TCP/IP认为可靠性是端到端的问题，在网际层仅有一种无连接的通信模式，但在传输层支持无连接和面向连接两种模式。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>视频流传输协议</title>
        <link>/post/opencv/%E8%A7%86%E9%A2%91%E6%B5%81%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE/</link>
        <pubDate>Wed, 15 Jun 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/opencv/%E8%A7%86%E9%A2%91%E6%B5%81%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE/</guid>
        <description>&lt;h1 id=&#34;常见视频传输协议&#34;&gt;常见视频传输协议&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;协议&lt;/th&gt;
&lt;th&gt;httpflv&lt;/th&gt;
&lt;th&gt;rtmp&lt;/th&gt;
&lt;th&gt;rtsp&lt;/th&gt;
&lt;th&gt;hls&lt;/th&gt;
&lt;th&gt;dash&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;传输方式&lt;/td&gt;
&lt;td&gt;http流&lt;/td&gt;
&lt;td&gt;tcp流&lt;/td&gt;
&lt;td&gt;tcp流&lt;/td&gt;
&lt;td&gt;http&lt;/td&gt;
&lt;td&gt;http&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;视频封装格式&lt;/td&gt;
&lt;td&gt;flv&lt;/td&gt;
&lt;td&gt;flv tag&lt;/td&gt;
&lt;td&gt;ts mp4&lt;/td&gt;
&lt;td&gt;Ts文件&lt;/td&gt;
&lt;td&gt;Mp4 3gp webm&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;延时&lt;/td&gt;
&lt;td&gt;低&lt;/td&gt;
&lt;td&gt;低&lt;/td&gt;
&lt;td&gt;低&lt;/td&gt;
&lt;td&gt;高&lt;/td&gt;
&lt;td&gt;高&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;数据分段&lt;/td&gt;
&lt;td&gt;连续流&lt;/td&gt;
&lt;td&gt;连续流&lt;/td&gt;
&lt;td&gt;连续流&lt;/td&gt;
&lt;td&gt;切片文件&lt;/td&gt;
&lt;td&gt;切片文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Html5播放&lt;/td&gt;
&lt;td&gt;可通过html5解封包播放(flv.js)&lt;/td&gt;
&lt;td&gt;不支持&lt;/td&gt;
&lt;td&gt;不支持&lt;/td&gt;
&lt;td&gt;可通过html5解封包播放(hls.js)&lt;/td&gt;
&lt;td&gt;如果dash文件列表是mp4webm文件，可直接播放&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;监控行业常见的视频传输协议：RTSP，RTMP（以RTSP流为主）&lt;/p&gt;
&lt;h2 id=&#34;rtsp与rtmp比较&#34;&gt;RTSP与RTMP比较&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;RTSP：低时延，实现难度大，适合视频聊天和视频监控&lt;/li&gt;
&lt;li&gt;RTMP：浏览器支持好，加载flash插件后能直接播放（高版本浏览器目前已禁止flash插件）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;直播常见协议rtmphttp&#34;&gt;直播常见协议：RTMP，HTTP&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;RTMP：只支持flashplayer，目前已被淘汰&lt;/li&gt;
&lt;li&gt;HTTP：flv，m3u8，ts&lt;/li&gt;
&lt;li&gt;flv：flash video，需要flash支持，使用flv.js可支持播放（B站视频）&lt;/li&gt;
&lt;li&gt;m3u8：切片文件，有延迟，实时性不如RTSP协议，如果压缩过小，可能导致客户端网络原因变卡，如果压缩过大，可能导致视频延迟过高&lt;/li&gt;
&lt;li&gt;ts：切片文件，同m3u8&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>基于OpenCv的视频流处理方法</title>
        <link>/post/opencv/%E5%9F%BA%E4%BA%8Eopencv%E7%9A%84%E8%A7%86%E9%A2%91%E6%B5%81%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/</link>
        <pubDate>Fri, 03 Jun 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/opencv/%E5%9F%BA%E4%BA%8Eopencv%E7%9A%84%E8%A7%86%E9%A2%91%E6%B5%81%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/</guid>
        <description>&lt;h1 id=&#34;使用videocapture读取视频流&#34;&gt;使用VideoCapture读取视频流&lt;/h1&gt;
&lt;p&gt;在使用OpenCv处理视频时，无论是视频文件还是摄像头画面，都要使用VideoCapture类来进行每一帧图像的处理。当我们使用视频文件作为参数时，OpenCv则打开视频文件，进行每一帧画面的读取。当我们传递摄像机编号时，OpenCv则打开相机，实时读取相机画面。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;获取VideoCaptrue实例：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 读取视频文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;VideoCapture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;video.mp4&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 打开摄像机&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;VideoCapture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;使用videocapture读取海康rtsp流&#34;&gt;使用VideoCapture读取海康RTSP流&lt;/h2&gt;
&lt;h3 id=&#34;rtsp流&#34;&gt;RTSP流&lt;/h3&gt;
&lt;p&gt;在使用OpenCv进行计算机视觉处理时，我们很多时候需要连接外部相机，如海康威视。监控相机的常见视频传输协议有：RTSP、RTMP（以RTSP为主）
&lt;strong&gt;RTSP与RTMP比较：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RTSP：低时延，实现难度大，适合视频聊天和视频监控&lt;/li&gt;
&lt;li&gt;RTMP：低时延，实现难度大，适合视频聊天和视频监控&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;目前市面上的相机大多以RTSP流协议为主。
在读取海康相机时，需要使用VideoCapture读取RTSP流协议的内容，而不是通过相机编号直接读取。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;海康相机rtsp格式：rtsp://[username]:[password]@[ip]:[port]/[codec]/[channel]/[subtype]/av_stream
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        username: 用户名。例如admin。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        password: 密码。例如12345。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        ip: 为设备IP。例如 192.0.0.64。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        port: 端口号默认为554，若为默认可不填写。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        codec：有h264、MPEG-4、mpeg4这几种。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        channel: 通道号，起始为1。例如通道1，则为ch1。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        subtype: 码流类型，主码流为main，辅码流为sub。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;使用VideoCapture读取RTSP流示例：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 使用rtsp流打开相机&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;open_camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;username&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    使用rtsp流打开相机
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    rtsp格式：rtsp://[username]:[password]@[ip]:[port]/[codec]/[channel]/[subtype]/av_stream
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        username: 用户名。例如admin。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        password: 密码。例如12345。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        ip: 为设备IP。例如 192.0.0.64。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        port: 端口号默认为554，若为默认可不填写。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        codec：有h264、MPEG-4、mpeg4这几种。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        channel: 通道号，起始为1。例如通道1，则为ch1。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        subtype: 码流类型，主码流为main，辅码流为sub。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :return:相机是否打开，相机
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 使用rtsp流打开相机&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;VideoCapture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;rtsp://&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;username&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;/h264/ch1/main/av_stream&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 捕获cv异常&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 打开相机失败&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;ping3&#34;&gt;ping3&lt;/h3&gt;
&lt;p&gt;在使用RTSP流读取相机内容时，若IP错误，或相机连接异常，则VideoCapture无法访问相机，VideoCapture实例访问超时且程序异常，在使用PyQt等GUI程序中，程序可能出现异常闪退情况，所以在连接RTSP流前，请先对相机IP进行预校验，减少出错概率。可以在访问相机之前，通过ping 相机IP的方式来对IP进行预校验。
&lt;strong&gt;在Python中可以使用ping3库对IP进行ping测试。&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ping3.ping成功默认返回秒为单位&lt;/li&gt;
&lt;li&gt;ping3.ping参数错误返回False&lt;/li&gt;
&lt;li&gt;ping3.ping失败时返回None&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ping3.ping函数返回说明：&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Returns:
The delay in seconds/milliseconds, False on error and None on timeout.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ping3.ping示例：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;ping3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ping3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;focus-wind.com&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ping3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;https://focus-wind.com&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ping3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;192.168.1.64&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;ping3.ping运行结果：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ping focus-wind.com ping成功&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mf&#34;&gt;0.03125762939453125&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ping https://focus-wind.com 参数异常&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ping 192.168.1.64 无法访问对应IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;完整访问rtsp流示例&#34;&gt;完整访问RTSP流示例&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;open_camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;username&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;554&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    使用rtsp流打开相机
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    rtsp格式：rtsp://[username]:[password]@[ip]:[port]/[codec]/[channel]/[subtype]/av_stream
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        username: 用户名。例如admin。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        password: 密码。例如12345。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        ip: 为设备IP。例如 192.0.0.64。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        port: 端口号默认为554，若为默认可不填写。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        codec：有h264、MPEG-4、mpeg4这几种。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        channel: 通道号，起始为1。例如通道1，则为ch1。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        subtype: 码流类型，主码流为main，辅码流为sub。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    :return:相机是否打开，相机
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# ping IP，IP预检验&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ping3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ping3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# ping的结果为None或False，ping失败，不存在该IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 使用rtsp流打开相机&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;VideoCapture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;rtsp://&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;username&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;/h264/ch1/main/av_stream&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 捕获cv异常&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 打开相机失败&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;获取视频流信息&#34;&gt;获取视频流信息&lt;/h2&gt;
&lt;p&gt;一般视频流的信息主要包含画面的宽高以及视频显示帧率，对于视频文件，还包括总共有多少帧画面。针对这些信息，我们可以使用VideoCapture类的get方法获取相关信息。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 获取视频帧的宽&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CAP_PROP_FRAME_WIDTH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 获取视频帧的高&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CAP_PROP_FRAME_HEIGHT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 获取视频帧的帧率&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;fps&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CAP_PROP_FPS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 获取视频文件的总帧数&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;frame_count&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CAP_PROP_FRAME_COUNT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;针对获取总帧数函数，若相机不支持获取总帧数，则返回0，获取总帧数仅对视频文件有意义。&lt;/p&gt;
&lt;h2 id=&#34;获取帧画面&#34;&gt;获取帧画面&lt;/h2&gt;
&lt;p&gt;直接调用VideoCapture类的read方法，read方法会返回两个参数，一个为是否成功标志，一个为帧画面。
&lt;strong&gt;read方法返回参数：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;成功，BGR格式的numpy.ndarray三维数组&lt;/li&gt;
&lt;li&gt;失败，None&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;read使用示例：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 获取帧画面&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在调用read方法时，有时候可能会访问失败，所以为避免访问失败，可以采用while循环确保读取顺利。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 获取帧画面&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 循环读取，确保读取成功&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;读取帧画面优化&#34;&gt;读取帧画面优化&lt;/h2&gt;
&lt;p&gt;OpenCv底层基于ffmpeg读取视频，在OpenCv读取视频流时，会设置缓存区，将视频流读取到缓存区中，但是使用缓存区的话，会导致页面堆积，页面延迟高过，所以为了避免OpenCv缓存区视频流堆积的情况，可以使用线程实时读取OpenCv画面，将读取的每一帧内容存在队列中，在需要获取帧画面时，获取队列中的数据。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;79
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;queue&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;threading&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;cv2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;CameraThread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threading&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 保存实例化相机，通过实例化相机操作相机&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 保存每一帧从rtsp流中读取到的画面&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;maxsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 线程体是否循环执行标志&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;flag_run&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 相机线程调用函数&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;flag_run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;c1&#34;&gt;# 捕获异常，避免读取视频操作因异常而退出&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;c1&#34;&gt;# 相机实例存在，判断相机是否打开&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_opened&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;c1&#34;&gt;# 相机已打开，读取相机内容&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        &lt;span class=&#34;c1&#34;&gt;# 读取相机内容失败&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        &lt;span class=&#34;c1&#34;&gt;# 将内容添加到队列中&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        &lt;span class=&#34;c1&#34;&gt;# 判断队列是否满&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;full&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                            &lt;span class=&#34;c1&#34;&gt;# 队列满，队头出队&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                            &lt;span class=&#34;c1&#34;&gt;# 队尾添加数据&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;put&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                            &lt;span class=&#34;c1&#34;&gt;# 队尾添加数据&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;put&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;c1&#34;&gt;# 捕获cv异常&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;c1&#34;&gt;# 因为子线程会一直调用该程序，可对捕获到的异常不进行处理&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;pass&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;c1&#34;&gt;# 捕获Exception异常&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;pass&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# setter：设置相机的camera对象&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;set_camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        设置相机的camera对象
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 设置相机的camera&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 获取队列中的RGB图像&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        获取队列中的RGB图像
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        :return: img: RGB图像
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 读取队列中的图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# img为None，读取失败，队列还未获取到图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 一直读取图片，直到读取图片成功&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 返回读取到的内容&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 停止运行&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;run_stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;flag_run&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 开始运行&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;run_start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;flag_run&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>OpenCv-cv2.imshow()显示图片不全</title>
        <link>/post/opencv/opencv-cv2.imshow%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87%E4%B8%8D%E5%85%A8/</link>
        <pubDate>Mon, 16 May 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/opencv/opencv-cv2.imshow%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87%E4%B8%8D%E5%85%A8/</guid>
        <description>&lt;p&gt;&lt;strong&gt;问题：&lt;/strong&gt; 在使用&lt;code&gt;cv2.imshow()&lt;/code&gt;显示图片时，只能显示图片的部分内容，无法完全显示图片内容。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;原因：&lt;/strong&gt; 查看&lt;code&gt;cv2.imshow()&lt;/code&gt;函数说明可知，opencv在使用&lt;code&gt;cv2.imshow()&lt;/code&gt;显示图片时，是在指定窗口中显示图片，若在调用&lt;code&gt;cv2.imshow()&lt;/code&gt;函数之前，没有调用创建窗口的函数，则默认使用&lt;code&gt;cv2.WINDOW_AUTOSIZE&lt;/code&gt;标记创建默认窗口，如果需要显示大于屏幕分辨率的图像，则需要在使用&lt;code&gt;cv2.imshow()&lt;/code&gt;之前调用&lt;code&gt;cv2.namedWindow(&amp;quot;&amp;quot;, cv2.WINDOW_NORMAL)&lt;/code&gt;&lt;/p&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./imshow函数说明.png&#34; title=&#34;&#34; alt=&#34;imshow函数说明&#34;&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;If the window was not created before this function, it is assumed creating a window with cv::WINDOW_AUTOSIZE.
如果该窗口不是在此函数之前创建的，则假定使用cv:：WINDOW_AUTOSIZE创建窗口。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If you need to show an image that is bigger than the screen resolution, you will need to call namedWindow(&amp;quot;&amp;quot;, WINDOW_NORMAL) before the imshow.
如果需要显示大于屏幕分辨率的图像，则需要在imshow之前调用namedWindow(&amp;quot;&amp;quot;, WINDOW_NORMAL)。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;解决方法：&lt;/strong&gt; 在使用&lt;code&gt;cv2.imshow()&lt;/code&gt;之前，调用&lt;code&gt;cv2.namedWindow()&lt;/code&gt;函数，设置显示窗口属性。若调用&lt;code&gt;cv2.namedWindow()&lt;/code&gt;函数图片仍显示不全，可调用&lt;code&gt;cv2.resize()&lt;/code&gt;函数使图片的分辨率在显示屏的分辨率也可使图片完全显示。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;示例：&lt;/strong&gt;
&lt;strong&gt;直接调用imshow()显示图片：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;cv2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imdecode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fromfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;C:\Users\focus\Pictures\背景图片\希望之鲸.jpg&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IMREAD_COLOR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imshow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;img&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;waitKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./部分显示图.png&#34; title=&#34;&#34; alt=&#34;部分显示图&#34;&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;设置namedWindow()：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;cv2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imdecode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fromfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;C:\Users\focus\Pictures\背景图片\希望之鲸.jpg&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IMREAD_COLOR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;namedWindow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;img&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WINDOW_NORMAL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imshow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;img&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;waitKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./显示全图.png&#34; title=&#34;&#34; alt=&#34;显示全图&#34;&gt;
&lt;/div&gt;
</description>
        </item>
        <item>
        <title>基于OpenCv&#43;Django的网络实时视频流传输（前后端分离）</title>
        <link>/post/opencv/%E5%9F%BA%E4%BA%8Eopencv-django%E7%9A%84%E7%BD%91%E7%BB%9C%E5%AE%9E%E6%97%B6%E8%A7%86%E9%A2%91%E6%B5%81%E4%BC%A0%E8%BE%93%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/</link>
        <pubDate>Mon, 16 May 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/opencv/%E5%9F%BA%E4%BA%8Eopencv-django%E7%9A%84%E7%BD%91%E7%BB%9C%E5%AE%9E%E6%97%B6%E8%A7%86%E9%A2%91%E6%B5%81%E4%BC%A0%E8%BE%93%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/</guid>
        <description>&lt;p&gt;使用OpenCv捕获摄像机画面后，我们有时候需要将画面显示在界面上。本博客基于Django的前后端分离模式，将视频流从后端读取，传送给前端显示。&lt;/p&gt;
&lt;h1 id=&#34;django流传输实例streaminghttpresponse&#34;&gt;Django流传输实例：StreamingHttpResponse&lt;/h1&gt;
&lt;p&gt;在使用Django进行视频流传输时，无法使用HttpResponse，JsonResponse等对象对内容直接传输，需要使用StreamingHttpResponse流式传输一个响应给浏览器。StreamingHttpResponse不是HttpResponse的子类，因此他们之间的API略有不同。StreamingHttpResponse与HttpResponse之间有以下显著区别：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;应该给StreamingHttpResponse一个迭代器，产生字节字符串作为内容。&lt;/li&gt;
&lt;li&gt;不应该直接访问StreamingHttpResponse的内容，除非通过迭代器响应对象本身。&lt;/li&gt;
&lt;li&gt;StreamingHttpResponse没有content属性。相反，他有一个streaming_content属性。&lt;/li&gt;
&lt;li&gt;无法使用类文件对象的tell()何write()方法。这样会引起一个异常。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;django传输视频流&#34;&gt;Django传输视频流&lt;/h1&gt;
&lt;p&gt;因为使用Django的StreamingHttpResponse类进行流传输，所以我们首先需要生成一个视频流的迭代器，在迭代器中，需要将从opencv中获取到的numpy.ndarray三维数组转换为字节类型的，然后传输到前端。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;传输视频流：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;读取图片&lt;/li&gt;
&lt;li&gt;图片压缩（针对分辨率较高的界面）&lt;/li&gt;
&lt;li&gt;对图片进行解码&lt;/li&gt;
&lt;li&gt;转换为byte类型&lt;/li&gt;
&lt;li&gt;传输视频流&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;cv2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.http&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StreamingHttpResponse&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;gen_display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    视频流生成器功能。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 读取图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 将图片进行解码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imencode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;.jpeg&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;c1&#34;&gt;# 转换为byte类型的，存储在迭代器中&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;yield&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;--frame&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                       &lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type: image/jpeg&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n\r\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tobytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;video&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    视频流路由。将其放入img标记的src属性中。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    例如：&amp;lt;img src=&amp;#39;https://ip:port/uri&amp;#39; &amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 视频流相机对象&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;VideoCapture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 使用流传输传输视频流&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StreamingHttpResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gen_display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;content_type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;multipart/x-mixed-replace; boundary=frame&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在使用海康威视等分辨率较高的相机时，直接解码，延迟过高，所以需要先对图片进行压缩，然后解码。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;经测试，海康相机使用0.25的压缩倍率显示压缩效率较好，当大于0.25时，延迟较高，小于0.25时，界面显示较差&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;迭代器优化：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;gen_display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    视频流生成器功能。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 读取图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;resize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.25&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.25&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 将图片进行解码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imencode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;.jpeg&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;c1&#34;&gt;# 转换为byte类型的，存储在迭代器中&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;yield&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;--frame&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                       &lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type: image/jpeg&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n\r\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tobytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;前端显示视频流&#34;&gt;前端显示视频流&lt;/h1&gt;
&lt;p&gt;在Django中配置路由后，在浏览器端直接访问视频url即可看到视频显示画面。
在前端HTML5中，将视频路由写入img标签的src属性中，即可访问视频流界面。例如：&amp;lt;img src=&amp;lsquo;https://ip:port/uri&amp;rsquo;
&lt;strong&gt;前端显示视频流：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;html&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;lang&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;en&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;charset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;UTF-8&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;http-equiv&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;X-UA-Compatible&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;IE=edge&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;viewport&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;width=device-width, initial-scale=1.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;基于OpenCv+Django的网络实时视频流传输（前后端分离）&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c&#34;&gt;&amp;lt;!-- 显示视频流 --&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://127.0.0.1:8000/api/cv/display&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;html&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;显示结果：&lt;/strong&gt;&lt;/p&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./前端显示结果.png&#34; title=&#34;&#34; alt=&#34;前端显示结果&#34;&gt;
&lt;/div&gt;
&lt;p&gt;在前端显示视频流中，可以通过调整img标签的属性来调整界面显示位置，显示大小。所以在进行视频流前后端传输中，在保证视频显示清晰度的情况下，建议使用前端来调整界面大小。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;调整界面前端显示视频样式：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;html&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;lang&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;en&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;charset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;UTF-8&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;http-equiv&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;X-UA-Compatible&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;IE=edge&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;meta&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;viewport&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;width=device-width, initial-scale=1.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;基于OpenCv+Django的网络实时视频流传输（前后端分离）&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;style&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;video&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;px&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;px&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;style&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c&#34;&gt;&amp;lt;!-- 显示视频流 --&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;align&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;center&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://127.0.0.1:8000/api/cv/display&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;video&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;html&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;显示结果：&lt;/strong&gt;&lt;/p&gt;
&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./修改显示样式.png&#34; title=&#34;&#34; alt=&#34;修改显示样式&#34;&gt;
&lt;/div&gt;
&lt;h1 id=&#34;视频流传输优化&#34;&gt;视频流传输优化&lt;/h1&gt;
&lt;p&gt;在项目中，我们可能经常需要对多个相机进行处理，而不是对一个相机进行操作，所以我们可以使用相机工厂来获取相机。在实例化相机后，需要开启一个线程，及时更新缓存队列，确保OpenCv不会因为缓存过多而造成缓存区堵塞，界面延迟。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用线程实时读取OpenCv的内容到队列中&lt;/li&gt;
&lt;li&gt;使用相机工厂来获取相机&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;在示例代码中，camera_model为自定义model，其中代码需要用到的数据有数据表记录的唯一标识id，相机的访问api：camera_api&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;相机类：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;  1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 90
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 91
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 92
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 93
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 94
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 95
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 96
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 97
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 98
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 99
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;100
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;101
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;102
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;103
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;104
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;105
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;106
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;107
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;108
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;109
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;110
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;111
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;112
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;113
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;114
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;115
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;116
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;117
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;118
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;119
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;120
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;121
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;122
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;123
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;124
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;125
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;126
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;127
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;128
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;queue&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;threading&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;cv2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;apps.device.models&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Camera&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;CameraException&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 初始化异常&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 初始化异常，定位异常信息描述&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__str__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;BaseCamera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 相机操作对象&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 保存每一帧从rtsp流中读取到的画面，使用opencv读取，为BGR图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;maxsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 后台取帧线程&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;thread&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 相机Model&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;camera_model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 相机基类&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;camera_model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        使用rtsp流初始化相机参数
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        rtsp格式：rtsp://[username]:[password]@[ip]:[port]/[codec]/[channel]/[subtype]/av_stream
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        username: 用户名。例如admin。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        password: 密码。例如12345。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        ip: 为设备IP。例如 192.0.0.64。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        port: 端口号默认为554，若为默认可不填写。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        codec：有h264、MPEG-4、mpeg4这几种。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        channel: 通道号，起始为1。例如通道1，则为ch1。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        subtype: 码流类型，主码流为main，辅码流为sub。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;VideoCapture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera_model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera_api&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isOpened&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 相机打开成功,启动线程读取数据&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;thread&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;threading&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;daemon&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;thread&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 打开失败，相机流错误&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;raise&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CameraException&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;视频流接口访问失败&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        相机后台进程，持续读取相机
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        opencv读取时会将信息存储到缓存区里，处理速度小于缓存区速度，会导致资源积累
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 线程一直读取视频流，将最新的视频流存在队列中&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isOpened&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;c1&#34;&gt;# 读取相机失败&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;pass&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;c1&#34;&gt;# 读取内容成功，将数据存放在缓存区&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;full&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;c1&#34;&gt;# 队列满，队头出队&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;c1&#34;&gt;# 队尾添加数据&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;put&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;c1&#34;&gt;# 队尾添加数据&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;put&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 直接读取图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        直接读取从rtsp流中获取到的图片，不进行额外加工
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        可能为空，需做判空处理
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 读取视频帧&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        获取加工后的图片，可以直接返回给前端显示
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 压缩图片，否则图片过大，编码效率慢，视频延迟过高&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;resize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.25&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.25&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 对图片进行编码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;jpeg&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imencode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;.jpeg&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;jpeg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tobytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;CameraFactory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    相机工厂
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 存储实例化的所有相机&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cameras&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nd&#34;&gt;@classmethod&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;camera_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 通过相机id获取相机&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cameras&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 查看是否存在相机，存在访问&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;camera_model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Camera&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;objects&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;base_camera&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BaseCamera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera_model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera_model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;base_camera&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;bp&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cameras&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setdefault&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;base_camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cameras&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Camera&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DoesNotExist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;c1&#34;&gt;# 相机不存在&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CameraException&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;c1&#34;&gt;# 相机实例失败&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 存在相机，直接返回&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Django views.py：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.http&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StreamingHttpResponse&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;apps.device.Camera&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CameraFactory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BaseCamera&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;gen_display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BaseCamera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    视频流生成器功能。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 读取图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;yield&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;--frame&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                   &lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type: image/jpeg&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n\r\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;video&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    视频流路由。将其放入img标记的src属性中。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    例如：&amp;lt;img src=&amp;#39;https://ip:port/uri&amp;#39; &amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 视频流相机对象&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;camera_id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GET&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;camera_id&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BaseCamera&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CameraFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 使用流传输传输视频流&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StreamingHttpResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gen_display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;camera&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;content_type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;multipart/x-mixed-replace; boundary=frame&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>OpenCv读取中文路径</title>
        <link>/post/opencv/opencv%E8%AF%BB%E5%8F%96%E4%B8%AD%E6%96%87%E8%B7%AF%E5%BE%84/</link>
        <pubDate>Sun, 06 Mar 2022 00:00:00 +0000</pubDate>
        
        <guid>/post/opencv/opencv%E8%AF%BB%E5%8F%96%E4%B8%AD%E6%96%87%E8%B7%AF%E5%BE%84/</guid>
        <description>&lt;p&gt;&lt;strong&gt;问题：&lt;/strong&gt; 在使用&lt;code&gt;cv2.imread()&lt;/code&gt;读取含有中文路径的图片时，无法正常读取图片，读取到的内容为None。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;原因：&lt;/strong&gt; opencv在使用&lt;code&gt;cv2.imread()&lt;/code&gt;读取图片时，只能接收ASCII码的路径参数，导致cv2在读取含有中文路径的图片时为None，无法正常读取图片。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;解决方法：&lt;/strong&gt; 使用&lt;code&gt;np.fromfile()&lt;/code&gt;读取路径为&lt;code&gt;np.uint8&lt;/code&gt;	格式，然后使用&lt;code&gt;cv2.imdecode()&lt;/code&gt;读取数据，并将数据转换为图片格式。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;cv2.imdecode()：&lt;/strong&gt; 从指定的内存缓存中读取数据，并把数据转换(解码)成图像格式。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;示例：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;cv2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imdecode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fromfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;C:\Users\focus\Pictures\背景图片\希望之鲸.jpg&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IMREAD_COLOR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;namedWindow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;img&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WINDOW_NORMAL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imshow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;img&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;cv2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;waitKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div style=&#34;text-align: center;&#34;&gt;
    &lt;img src=&#34;./OpenCv读取中文路径.png&#34; title=&#34;&#34; alt=&#34;OpenCv读取中文路径&#34;&gt;
&lt;/div&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>/index.html</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>/index.html</guid>
        <description></description>
        </item>
        <item>
        <title>搜索</title>
        <link>/search/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>/search/</guid>
        <description></description>
        </item>
        
    </channel>
</rss>
