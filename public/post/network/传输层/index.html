<!DOCTYPE html>
<html lang="" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='传输层'>
<title>传输层</title>

<link rel='canonical' href='/post/network/%E4%BC%A0%E8%BE%93%E5%B1%82/'>

<link rel="stylesheet" href="/scss/style.min.5be32ca3f6e1a997c75795c4359147cc6d4fbd34948c0acd51e31d237033978a.css"><meta property='og:title' content='传输层'>
<meta property='og:description' content='传输层'>
<meta property='og:url' content='/post/network/%E4%BC%A0%E8%BE%93%E5%B1%82/'>
<meta property='og:site_name' content='北溪入江流'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Network' /><meta property='article:published_time' content='2022-10-13T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2022-10-13T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="传输层">
<meta name="twitter:description" content="传输层">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu5573819e39520df65cd1f93c344d2112_156234_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">北溪入江流</a></h1>
            <h2 class="site-description">我见青山多妩媚，料青山见我应如是 | Follow One Cause Until Success</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/focus-wind'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1673241332583" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9125" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9 23.5 23.2 38.1 55.4 38.1 91v112.5c0.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z" p-id="9126" fill="#bababa"></path></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='mailto:focus-wind@foxmail.com'
                        target="_blank"
                        title="Mail"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1673240954326" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8668" width="200" height="200" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32z m-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5z" fill="#bababa" p-id="8669"></path><path d="M833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6c20.2 15.7 48.5 15.7 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z" p-id="8670" fill="#bababa"></path></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.yuque.com/focus_wind'
                        target="_blank"
                        title="YuQue"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1673241533996" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1614" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M854.6 370.6c-9.9-39.4 9.9-102.2 73.4-124.4l-67.9-3.6s-25.7-90-143.6-98c-117.8-8.1-194.9-3-195-3 0.1 0 87.4 55.6 52.4 154.7-25.6 52.5-65.8 95.6-108.8 144.7-1.3 1.3-2.5 2.6-3.5 3.7C319.4 605 96 860 96 860c245.9 64.4 410.7-6.3 508.2-91.1 20.5-0.2 35.9-0.3 46.3-0.3 135.8 0 250.6-117.6 245.9-248.4-3.2-89.9-31.9-110.2-41.8-149.6z m-204.1 334c-10.6 0-26.2 0.1-46.8 0.3l-23.6 0.2-17.8 15.5c-47.1 41-104.4 71.5-171.4 87.6-52.5 12.6-110 16.2-172.7 9.6 18-20.5 36.5-41.6 55.4-63.1 92-104.6 173.8-197.5 236.9-268.5l1.4-1.4 1.3-1.5c4.1-4.6 20.6-23.3 24.7-28.1 9.7-11.1 17.3-19.9 24.5-28.6 30.7-36.7 52.2-67.8 69-102.2l1.6-3.3 1.2-3.4c13.7-38.8 15.4-76.9 6.2-112.8 22.5 0.7 46.5 1.9 71.7 3.6 33.3 2.3 55.5 12.9 71.1 29.2 5.8 6 10.2 12.5 13.4 18.7 1 2 1.7 3.6 2.3 5l5 17.7c-15.7 34.5-19.9 73.3-11.4 107.2 3 11.8 6.9 22.4 12.3 34.4 2.1 4.7 9.5 20.1 11 23.3 10.3 22.7 15.4 43 16.7 78.7 3.3 94.6-82.7 181.9-182 181.9z" p-id="1615" fill="#bababa"></path></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/index.html' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>友链</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="/" selected>简体中文</option>
                        
                            <option value="/en/" >English</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>暗色模式</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                <form action="/search/" class="search-form widget" >
        <p>
            <label>搜索</label>
            <input name="keyword" required placeholder="输入关键词..." />
        
            <button title="搜索">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



            </button>
        </p>
    </form>
            
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#传输层的功能">传输层的功能</a></li>
    <li><a href="#传输层寻址与端口">传输层寻址与端口</a>
      <ol>
        <li><a href="#端口的作用">端口的作用</a></li>
        <li><a href="#端口号">端口号</a>
          <ol>
            <li><a href="#端口号分类">端口号分类</a></li>
          </ol>
        </li>
        <li><a href="#套接字socket">套接字（Socket）</a></li>
      </ol>
    </li>
    <li><a href="#无连接服务与面向连接服务">无连接服务与面向连接服务</a>
      <ol>
        <li><a href="#无连接服务">无连接服务</a>
          <ol>
            <li><a href="#无连接服务udp的优点">无连接服务UDP的优点</a></li>
            <li><a href="#udp应用">UDP应用</a></li>
          </ol>
        </li>
        <li><a href="#面向连接服务">面向连接服务</a>
          <ol>
            <li><a href="#面向连接服务tcp的优点">面向连接服务TCP的优点</a></li>
            <li><a href="#tcp应用">TCP应用</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#udp的特点">UDP的特点</a></li>
    <li><a href="#udp数据报">UDP数据报</a>
      <ol>
        <li><a href="#udp的首部格式">UDP的首部格式</a></li>
        <li><a href="#udp校验">UDP校验</a></li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#tcp协议的主要特点">TCP协议的主要特点</a></li>
    <li><a href="#tcp报文段">TCP报文段</a></li>
    <li><a href="#tcp连接管理">TCP连接管理</a>
      <ol>
        <li><a href="#tcp连接建立要解决的问题">TCP连接建立要解决的问题</a></li>
        <li><a href="#tcp连接的建立">TCP连接的建立</a></li>
        <li><a href="#tcp连接的释放">TCP连接的释放</a></li>
        <li><a href="#tcp建立和释放报文总结">TCP建立和释放报文总结</a></li>
      </ol>
    </li>
    <li><a href="#tcp-可靠传输">TCP 可靠传输</a>
      <ol>
        <li><a href="#序号">序号</a></li>
        <li><a href="#确认">确认</a></li>
        <li><a href="#重传">重传</a>
          <ol>
            <li><a href="#超时">超时</a></li>
            <li><a href="#冗余ack冗余确认">冗余ACK（冗余确认）</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#tcp-流量控制与拥塞控制">TCP 流量控制与拥塞控制</a>
      <ol>
        <li><a href="#tcp流量控制">TCP流量控制</a></li>
        <li><a href="#tcp拥塞控制">TCP拥塞控制</a>
          <ol>
            <li><a href="#慢开始和拥塞避免">慢开始和拥塞避免</a></li>
            <li><a href="#快重传和快恢复">快重传和快恢复</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/network/" >
                计算机网络
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/network/%E4%BC%A0%E8%BE%93%E5%B1%82/">传输层</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            传输层
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2022/10/13</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 19 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="传输层提供的服务">传输层提供的服务</h1>
<h2 id="传输层的功能">传输层的功能</h2>
<p>传输层向应用层提供通信服务，属于面向通信部分的最高层，是用户功能中的最低层。为运行在不同的主机上的进程之间提供逻辑通信，即使网络层协议不可靠，传输层也可以为用户提供可靠的服务。
传输层的具体功能如下：</p>
<ul>
<li>传输层提供应用程序之间的逻辑通信（即端到端通信）。与网络层的区别是，网络层只提供主机之间的逻辑通信。</li>
<li>复用和分用：
<ul>
<li>复用：发送方不同的应用进程都可使用同一个传输层协议传送数据</li>
<li>分用：接收方的传输层在剥去报文的首部后能把这些数据正确交付到目的应用进程</li>
</ul>
</li>
<li>传输层对收到的报文进行差错检验，网络层只检查IP数据报首部，不检验数据部分是否出错</li>
<li>传送层提供两种不同的协议，分别是面向连接的TCP和无连接的UDP。网络层无法同时实现两种协议（要么提供面向连接的虚电路服务，要么提供无连接服务）</li>
</ul>
<h2 id="传输层寻址与端口">传输层寻址与端口</h2>
<h3 id="端口的作用">端口的作用</h3>
<p><strong>端口</strong>：能让应用层的各种应用进程将其数据通过端口向下交付给传输层，以及让传输层知道应当将其报文段中的数据向上通过端口交付给应用层相应的进程。端口是传输层服务访问点（TSAP），端口在传输层的作用类似于网络层的IP地址和数据链路层的MAC地址。端口标识的是主机中的应用程序。
数据链路层的SAP是MAC地址，网络层的SAP是IP地址，传输层的SAP是端口。</p>
<h3 id="端口号">端口号</h3>
<p>应用进程通过端口号进行标识，端口号的长度为16bit，能够表示65536（$2^16$）个不同的端口，端口号只标识本计算机中的各个进程。
端口号根据TCP和UDP协议的不同可以分配相同的端口号。比如9527这个端口号可以分配给仅使用TCP协议的一个进程，也可以同时分配给仅使用UDP协议的一个进程。两者的端口号虽然相同，但是使用的协议不同，所以不是同一进程。</p>
<h4 id="端口号分类">端口号分类</h4>
<ul>
<li>服务端使用的端口号
<ul>
<li>熟知端口号（0~1023）：由LANA（互联网地址指派机构）指派给TCP/IP最重要的一些程序</li>
<li>登记端口号（1024~49151）：供没有端口号的应用程序使用，使用这类端口号应在IANA登记，防止重复使用</li>
</ul>
</li>
<li>客户端使用的端口号（48152~65535）：仅在客户进程运行时才动态的选择，又称<strong>短暂端口号（临时端口）</strong>。通信结束后，端口号就释放，供其他客户进程使用</li>
</ul>
<h5 id="常见熟知端口号">常见熟知端口号</h5>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>应用程序</th>
<th>FTP</th>
<th>TELNET</th>
<th>SMTP</th>
<th>DNS</th>
<th>TFTP</th>
<th>HTTP</th>
<th>HTTPS</th>
<th>SNMP</th>
</tr>
</thead>
<tbody>
<tr>
<td>熟知端口号</td>
<td>21</td>
<td>23</td>
<td>25</td>
<td>53</td>
<td>69</td>
<td>80</td>
<td>443</td>
<td>161</td>
</tr>
</tbody>
</table></div>
<h3 id="套接字socket">套接字（Socket）</h3>
<p><strong>套接字</strong>：在网络中通过IP地址区分不同的主机，通过端口号区分主机中不同的应用进程，IP地址和端口号合在一起就构成了套接字Socket。在网络中采用发送方和接收方的套接字来识别端点。套接字的本质就是一个通信端点。<strong>套接字Socket = （IP地址 : 端口号）</strong>
在网络中进行通信时，报文段应含有发送端口和接收端口的套接字。套接字通过发送端口和目的端口区分，所以一个进程可连接的客户进程无理论上的限制。</p>
<h2 id="无连接服务与面向连接服务">无连接服务与面向连接服务</h2>
<h3 id="无连接服务">无连接服务</h3>
<p>无连接服务是：两个实体之间的通信不需要实现建立好连接，需要通信时，直接发送信息到网络中，让该信息在网络上尽最大努力的传送到目的地。
TCP/IP模型在传输层提供了无连接的用户数据报协议（UDP），提供不可靠的逻辑通信。
UDP是一个无连接的非可靠传输层协议。在网络层之上仅提供两个附加服务：多路复用和对数据的错误检查。</p>
<h4 id="无连接服务udp的优点">无连接服务UDP的优点</h4>
<ul>
<li>比较简单，易于实现</li>
<li>执行速度块</li>
<li>实时性好</li>
</ul>
<h4 id="udp应用">UDP应用</h4>
<ul>
<li>TFTP：小文件传送协议</li>
<li>DNS：域名系统</li>
<li>SNMP：指简单网络管理协议，在IP网络中管理网络结点</li>
<li>RTP：实时传输协议</li>
</ul>
<h3 id="面向连接服务">面向连接服务</h3>
<p>面向连接服务：通信双方在通信之前，必须先建立连接，在通信过程中，整个连接的情况一直被实时的监控和管理。通信结束后，释放建立的连接。
TCP/IP模型在传输层提供了面向连接的传输控制协议（TCP），采用TCP时，传输层向上提供一台全双工的可靠逻辑信道。
TCP连接和网络层虚电路的区别：TCP报文段是在传输层抽象的逻辑信道中传输，对路由器不可见。虚电路经过的交换结点都必须保存虚电路状态信息。传输层采用TCP不影响网络层提供的无连接服务。</p>
<h4 id="面向连接服务tcp的优点">面向连接服务TCP的优点</h4>
<ul>
<li>TCP的确认机制和重传机制保证其传输的可靠，稳定</li>
<li>数据传输中有窗口机制决定传输数据的大小，达到拥塞控制的效果</li>
</ul>
<h4 id="tcp应用">TCP应用</h4>
<ul>
<li>HTTP协议：超文本传输协议，用于浏览器浏览</li>
<li>HTTPS协议：安全超文本传输协议，携带SSL的HTTP协议</li>
<li>FTP协议：文件传输协议，用于文件传输</li>
<li>POP3协议：邮局协议，收邮件使用</li>
<li>SMTP协议：简单邮件传输协议，用来发送电子邮件</li>
<li>Telent协议：远程登陆协议，通过一个终端登陆到网络</li>
<li>SSH协议：安全外壳协议，用于加密安全登陆，替代安全性差的Telent协议</li>
</ul>
<h1 id="udp协议">UDP协议</h1>
<p>用户数据报协议（User Datagram Protocol，UDP）仅在IP的数据报服务上增加了两个最基本的服务：复用和分用以及差错检测。
UDP不保证可靠交付，不意外应用对数据的要求不可靠，所有的维护可靠性工作都在应用层来完成。应用开发者可根据应用的需求灵活设计可靠性机制。
UDP是面向报文的。发送方UDP对应用层提供的报文，添加首部后直接交付给网络层，一次发送一个报文，既不合并也不拆分；接收方UDP对网络层提供的UDP数据报，在去除首部后原封不动地交付给上层应用进程。因此，报文是UDP数据报处理的最小单位。</p>
<h2 id="udp的特点">UDP的特点</h2>
<ul>
<li>UDP无须建立连接，不会引入建立连接的时延，速度比TCP要块很多</li>
<li>无连接状态，不需要维护连接状态，能支持更多的活动客户机</li>
<li>分组首部开销小，TCP首部有20B的开销，而UDP首部仅有8B的开销</li>
<li>应用层能更好的控制要发送的数据和发送时间。UDP没有拥塞控制，网络的拥塞不会影响主机的发送速率。某些实时应用要求以稳定的速度传输，能容忍一些数据的丢失，但不允许有较大的时延，UDP很好的满足了这一要求</li>
<li>UDP支持一对一、一对多、多对一和多对多的交互通信。</li>
</ul>
<h2 id="udp数据报">UDP数据报</h2>
<h3 id="udp的首部格式">UDP的首部格式</h3>
<div style="text-align: center;">
    <img src="./UDP数据报格式.png" title="" alt="UDP数据报格式">
</div>
<ul>
<li>首部（8B）
<ul>
<li>源端口（2B）：源端口号，在需要对方回信时选用，不需要时全为0</li>
<li>目的端口（2B）：目的端口号，在终点交付报文时必须使用到</li>
<li>长度（2B）：UDP数据报的长度（包括首部和数据），单位是B，最小值为8（仅首部）</li>
<li>校验和（2B）：检测UDP数据报传输时是否出错。有错就丢弃。该字段是可选字段，不需要计算校验和时，该字段全为0</li>
</ul>
</li>
</ul>
<p>如果接收方UDP发现收到的报文端口不正确，那么就丢弃该报文，并由ICMP发送“端口不可达”差错报文给发送方。</p>
<h3 id="udp校验">UDP校验</h3>
<p>在计算校验和时，在UDP数据报之前添加12B的伪首部，伪首部只参与计算校验和时，校验和按照这个临时的UDP数据报来计算。UDP校验和即校验首部也校验数据（IP数据报只校验首部）。</p>
<div style="text-align: center;">
    <img src="./伪首部UDP数据报校验和.png" title="" alt="伪首部UDP数据报校验和">
</div>
<p>在计算校验和时，UDP数据报添加伪首部，把全零写入校验和字段。把UDP数据报视为许多16位的子串拼接起来。若UDP的数据部分不是偶数个字节，则在数据部分末尾添加0，使其称为偶数个字节（添加的0是临时的）。然后按照二进制反码计算出这些16位的和，将此和的二进制反码写入校验和字段中，校验完毕。
接收方收到UDP数据报时，加入伪首部和末尾添0（如果不是偶数个字节），按二进制反码求这些16位字的和。当无差错时结果为全1，反之表示出现差错，丢弃这个UDP数据报。</p>
<h1 id="tcp-协议">TCP 协议</h1>
<p>传输控制协议（Transmission Control Protocol，TCP）是在不可靠的网络层之上实现的可靠的数据传输协议，主要解决传输的可靠、有序、无丢失和不重复问题。</p>
<h2 id="tcp协议的主要特点">TCP协议的主要特点</h2>
<ul>
<li>TCP是面向连接的传输层协议，TCP连接是一条逻辑连接</li>
<li>每条TCP连接只能有两个端点，每条TCP连接只能是端到端的（进程之间）</li>
<li>TCP提供可靠交付的服务，保证传送的数据无差错、不丢失、不重复且有序</li>
<li>TCP提供全双工通信，允许通信双方的进程在任何时刻发送数据，因此，TCP连接的两端都设有发送缓存和接收缓存用来存放双向通信的数据
<ul>
<li>发送缓存：
<ul>
<li>发送应用程序传送给发送方TCP准备发送的数据</li>
<li>TCP已发送但是尚未收到确认的数据</li>
</ul>
</li>
<li>接收缓存：
<ul>
<li>按序到达但尚未被接收应用程序读取的数据</li>
<li>不按序到达的数据</li>
</ul>
</li>
</ul>
</li>
<li>TCP是面向字节流的，虽然应用程序和TCP的交互是一次一个数据块，但TCP把应用程序提供的数据仅视为一连串的无结构的字节流</li>
<li>TCP报文的长度根据接收方给出的窗口值和当前网络的拥塞程度决定</li>
</ul>
<h2 id="tcp报文段">TCP报文段</h2>
<p>TCP传送的数据单元称为报文段。TCP报文段既可以用来传输数据，也可以用来建立连接，释放连接和应答。一个TCP报文段分为首部和数据部分。首部的前20B是固定的，后面4N字节是根据需要而增加的选项，长度为4B的整数倍。首部最短长度为20B。</p>
<div style="text-align: center;">
    <img src="./TCP报文段首部.png" title="" alt="TCP报文段首部">
</div>
<ul>
<li>源端口和目的端口（各2B）：运输层和应用层的服务接口，运输层的复用和分用功能都要通过端口实现</li>
<li>序号（4B）：范围是$0 \sim 2^{32} - 1$。TCP是面向字节流的，所以TCP连接传送的字节流中的每个字节都按顺序变化，序号字段的值指的是本报文段所发送的数据的第一个字节的序号</li>
<li>确认号（4B）：期望收到的下一个报文段的第一个数据字节的序号，表面到序号N-1为止的所有数据已经收到</li>
<li>数据偏移（首部长度，4bit）：表示TCP报文段的首部长度（TCP首部具有长度可选部分），指出TCP首部的数据起初处距离TCP报文段的起始处有多远。数据偏移的单位是4B，由于4bit表示的最大值为15，所以TCP首部的长度范围是：20B~60B</li>
<li>保留（6bit）：保留为今后使用，目前置为0</li>
<li>紧急位URG（1bit）：当URG = 1时表示紧急字段有效。告诉系统此报文段有紧急数据，应尽快传送。URG需要和紧急指针联合使用。数据从第一个字节到紧急指针所指的字节接收紧急数据</li>
<li>确认位ACK（1bit）：仅当ACK = 1时确认号字段有效。TCP规定，连接建立后所有传送的报文段都必须把ACK置1</li>
<li>推送位PSH（Push，1bit）：当接收方TCP收到PSH = 1的报文，就尽快的将报文交付给接收进程，而不是等缓存填满了才向上交付</li>
<li>复位位RST（Reset，1bit）：当RST = 1时，表面TCP出现严重错误，必须释放连接，然后再重新建立连接</li>
<li>同步位SYN（1bit）：当同步位 = 1时，表示这是一个连接请求或连接接受报文
<ul>
<li>当SYN = 1，ACK = 0时表示这时一个连接请求报文</li>
<li>若同意连接，则响应报文SYN = 1，ACK = 1</li>
</ul>
</li>
<li>终止位FIN（1bit）：用来释放连接，当FIN = 1时表明发送方数据已发送完毕，请求释放运输连接</li>
<li>窗口（2B）：范围是$0 \sim 2^{16} - 1$。指现在允许对方发送的数据量，接收方的数据缓存是有限的，因此用窗口作为接收方让发送方设置其发送窗口的依据</li>
<li>校验和（2B）：校验和字段校验的范围是首部和数据部分。TCP计算校验和只需要将伪首部的协议字段的17改为6，其他和UDP计算校验和的方式一样</li>
<li>紧急指针（2B）：紧急指针只再URG = 1时有效，指出本报文段中紧急事件共有多少字节（从数据部分开头开始计算）</li>
<li>选项（长度可变）：TCP最初只规定了一种选项，即最大报文段长度（Maximum Segment Size，MSS），MSS仅是TCP报文段中的数据部分的最大长度</li>
<li>填充：使TCP首部长度是4B的整数倍</li>
</ul>
<h2 id="tcp连接管理">TCP连接管理</h2>
<p>TCP是面向连接的协议，每个TCP连接都有三个阶段：连接建立、数据传送和连接释放。TCP的连接管理就是使运输连接的建立和释放能正常运行。</p>
<h3 id="tcp连接建立要解决的问题">TCP连接建立要解决的问题</h3>
<ul>
<li>要使每一方都能够知道对方的存在</li>
<li>要允许双方协商一些参数（如最大窗口值、是否使用窗口扩大选项、时间戳选项及服务质量等）</li>
<li>能够对运输实体资源（缓存大小、连接表中的项目）进行分配</li>
</ul>
<h3 id="tcp连接的建立">TCP连接的建立</h3>
<p>TCP连接的建立采用客户/服务器模式（C/S）。主动发送连接建立请求的应用进程称为客户（Client），被动等待接收的应用进程称为服务器（Server）。
TCP连接的建立需要经历3个步骤，俗称三次握手。
连接建立前，服务器处于LISTEN（收听）状态，等待客户的连接请求：</p>
<ul>
<li>第一步：客户机TCP向服务器TCP发送连接请求报文段。这个报文段中，首部的SYN设为1，选择一个初始序号seq = x。TCP规定，SYN报文段不能携带数据，但是需要消耗一个序号。这时TCP客户进入SYN-SENT（Sent，同步已发送）状态
<ul>
<li>连接请求报文段：同步位SYN = 1，初始序号seq = x</li>
<li>客户进入SYN-SENT（Sent，同步已发送）状态</li>
</ul>
</li>
<li>第二步：服务器TCP收到连接请求报文段后，如同意建立连接，则向客户机发回确认，并为该TCP连接分配缓存和变量。再确认报文中，把SYN和ACK置为1，确认号是ack = x + 1，同时为自己选择一个初始序号seq = y。确认报文不能携带数据，也要消耗一个序号。这时TCP服务器进入SYN-RCVD（Received，同步收到）状态
<ul>
<li>同步确认报文段：同步位SYN = 1，确认位ACK = 1，初始序号seq = y，确认号ack = x + 1</li>
<li>TCP服务器分配资源</li>
<li>服务器进入SYN-RCVD（Received，同步收到）状态</li>
</ul>
</li>
<li>第三步：客户机收到确认报文段后，向服务器发送确认，并为该TCP连接分配缓存和变量。确认报文段确认位ACK置为1，确认号ack = y + 1，序号seq = x + 1。该报文段可以携带数据，若不携带数据则不消耗序号。这时TCP客户进程进入ESTABLISHED（Established，已建立连接）状态
<ul>
<li>确认段：确认位ACK = 1，确认号ack = y + 1，序号seq = x + 1</li>
<li>TCP客户分配资源</li>
<li>客户进入ESTABLISHED（Established，已建立连接）状态。</li>
</ul>
</li>
</ul>
<h3 id="tcp连接的释放">TCP连接的释放</h3>
<p>TCP连接的任何一方都可以终止连接请求。TCP连接释放的过程称为四次分手。</p>
<ul>
<li>第一步：主动关闭方向被动关闭方发送连接释放报文段，并停止发送数据。连接释放报文段的终止位FIN置1，序号seq = u（前面已传送的数据最后一个字节的序号加1），FIN报文段即使不携带数据，也消耗一个序号。TCP主动关闭方进入FIN-WAIT-1（终止等待1）状态。因为TCP是全双工，一方关闭数据通路，另一方仍可以继续发送数据
<ul>
<li>连接释放报文段：FIN = 1，seq = u</li>
<li>主动关闭方进入FIN-WAIT-1（终止等待1）状态</li>
</ul>
</li>
<li>第二步：被动关闭方收到连接释放报文段后发送确认，确认号ack = u + 1，序号seq = v。此时被动关闭方进入CLOSE-WAIT（关闭等待）状态，此时主动关闭方到被动关闭方的连接就释放了，TCP连接处于半关闭状态，此时被动关闭方仍能向主动关闭方发送数据
<ul>
<li>被动确认报文段：ACK = 1，seq = v，ack = u + 1</li>
<li>被动关闭方进入CLOSE-WAIT（关闭等待）状态</li>
</ul>
</li>
<li>第三步：若被动关闭方需要释放连接，就通知TCP释放连接。释放连接请求FIN和ACK置为1，ack = u + 1，seq = w（主动关闭方半关闭后，被动关闭方可能还继续发送数据）。这时被动关闭方进入LAST-ACK（最后确认状态）
<ul>
<li>被动释放报文段：FIN = 1，ACK = 1，seq = w，ack = u + 1</li>
<li>被动关闭方进入LAST-ACK（最后确认状态）</li>
</ul>
</li>
<li>主动关闭方收到连接释放报文段后，发送确认。确认报文段ACK置为1，确认号ack = w + 1，seq = u + 1，经过时间等待计时器设置的时间2MSL（最长报文段寿命）后，主动关闭方才进入CLOSED（连接关闭）状态
<ul>
<li>主动确认报文段：ACK = 1，seq = u + 1，ack = w + 1</li>
<li>等待2MSL（最长报文段寿命）后，主动关闭方进入CLOSED（连接关闭）状态</li>
</ul>
</li>
</ul>
<h3 id="tcp建立和释放报文总结">TCP建立和释放报文总结</h3>
<ul>
<li>TCP连接建立：
<ul>
<li>SYN = 1，seq = x</li>
<li>SYN = 1，ACK = 1，ack = x + 1，seq = y</li>
<li>ACK = 1，ack = y + 1，seq = x + 1</li>
</ul>
</li>
<li>TCP连接释放：
<ul>
<li>FIN = 1，seq = u</li>
<li>ACK = 1，ack = u + 1，seq = v</li>
<li>FIN = 1，ACK = 1，ack = u + 1，seq = w</li>
<li>ACK = 1，ack = u + 1，seq = w + 1</li>
</ul>
</li>
</ul>
<h2 id="tcp-可靠传输">TCP 可靠传输</h2>
<p>TCP提供的可靠数据传输服务保证接收方进程从缓存中读出的字节流与发送方发出的字节流完全一致。TCP使用校验、序号、确认和重传的机制来实现TCP的可靠传输。TCP的校验机制和UDP的校验机制一样，除了伪首部的协议字段的17改为6</p>
<h3 id="序号">序号</h3>
<p>TCP首部的序号字段用来保证数据有序的提交给应用层，TCP把数据视为一个无结构但有序的字节流，序号建立再传送的字节流之上，不建立再报文段上。
TCP连接传送的数据流中的每个字节都编上序号。序号字段是本报文段发送的数据的第一个字节的序号。</p>
<h3 id="确认">确认</h3>
<p>TCP首部的确认号是期望下一个报文段的数据的第一个字节的序号。表示前面的字节流都已成功接收。
TCP默认使用累积确认，即TCP只确认数据流中至第一个丢失字节为止的字节。如TCP已收到序号为1~3，6~8的字节，那么TCP仍等待序号为4的字节，确认号设置为4。</p>
<h3 id="重传">重传</h3>
<h4 id="超时">超时</h4>
<p>TCP每发送一个报文段，就对该报文段设置一个计时器。计时器设置到期后仍未收到确认时，就要重传这一报文。
TCP设置了一个自适应算法，记录报文段发出的时间，以及收到的确认时间，这两个时间差称为报文段的往返时间（Round-Trip Time，RTT）。TCP保留了RTT的一个加权平均往返时间$RTT_S$，它会随新策略的RTT的变化而变化。超时计时器设置的超时重传时间（Retransmission Time-Out，RTO）略大于$RTT_S$。</p>
<h4 id="冗余ack冗余确认">冗余ACK（冗余确认）</h4>
<p>超时触发重传存在的一个问题就是周期性往往很长。发送方通常再超时时间发生之前通过主要冗余ACK来较好的检测丢包情况。
冗余ACK就是再次确认某个报文段的ACK，发送方先前已经收到过该报文段的确认。TCP规定每当比期望值大的失序序号报文段到达时，就发送一个冗余ACK，指明下一个报文的序号。TCP规定当发送方收到同一个报文段的3个冗余ACK时，就认为这个被确认报文段之后的报文已经丢失。</p>
<h2 id="tcp-流量控制与拥塞控制">TCP 流量控制与拥塞控制</h2>
<h3 id="tcp流量控制">TCP流量控制</h3>
<p>TCP流量控制用来消除发送方（发送速率太快）使接收方缓存区溢出的可能性。流量控制是一个速度匹配服务（匹配发送方的发送速率和接收方的读取速率）
TCP是基于滑动窗口机制来实现流量控制机制的。在通信过程中：</p>
<ul>
<li>接收方根据根据接收缓存的大小，动态地调制发送方的发送窗口大小，称为<strong>接收窗口rwnd（Receiver Window）</strong>，即通过调制TCP报文段首部的“窗口”字段值。来限制发送方向网络发送报文的速率。</li>
<li>发送方根据当前网络的拥塞程度来确认窗口值，称为<strong>拥塞窗口cwnd（Congestion Window）</strong>。拥塞窗口的大小与网络的带宽和时延有关</li>
</ul>
<p>传输层的数据链路层流量控制的区别是：</p>
<ul>
<li>传输层定义端到端的流量控制；数据链路层定义网络中相邻两个结点之间的流量控制</li>
<li>传输层的滑动窗口动态变化；数据链路层的滑动窗口大小不能动态变化</li>
</ul>
<h3 id="tcp拥塞控制">TCP拥塞控制</h3>
<p>拥塞控制是防止过多的数据注入网络，保证网络中的路由器和链路不致于过载。出现拥塞时，端点不知道拥塞发生的细节，对通信连接的端点来说，拥塞往往表现为通信时延的增加。
因特网定义了拥塞控制的4种算法：慢开始、拥塞避免、快重传和快恢复。
拥塞控制和流量控制的区别：</p>
<ul>
<li>拥塞控制是让网络能够承载现有网络的负荷，是一个全局性的过程，涉及所有的主机、路由器，以及降低网络传输性能有关的所有因素</li>
<li>流量控制指点到点的通信量的控制，是端到端的问题，所要做的是抑制发送端发送数据的速率，以便接收端来得及接收</li>
<li>拥塞控制和流量控制都通过控制发送方发送速率来达到控制效果</li>
</ul>
<p>因特网发送方在发送报文段时，既要考虑接收方的接受能力，又要全局考虑不要使网络发生拥塞情况。因此，TCP协议要求发送方维护两个窗口：</p>
<ul>
<li>接收窗口rwnd：接收方根据目前接收缓存大小所允诺 的最新窗口值，反映接收方的容量，由接收方根据其放在TCP报文段的首部窗口值通知发送方</li>
<li>拥塞窗口cwnd：发送方根据自己估算的网络拥塞程度设置窗口值，反映网络当前的容量。只要网络未出现拥塞，窗口就增大一些，以便把更多的分组发送出去。但网络只要出现拥塞，窗口值就减小一些，减少注入网络的数据</li>
</ul>
<p>发送窗口的上限值取决于接收窗口rwnd和拥塞窗口cwnd种较小的一个：$发送窗口上限值 = min[rwnd, cwnd]$</p>
<h4 id="慢开始和拥塞避免">慢开始和拥塞避免</h4>
<h5 id="慢开始算法">慢开始算法</h5>
<p>在TCP刚建立好时，先令拥塞窗口cwnd = 1，没收到一个对新报文段的确认后，将cwnd加1，用这样的方法逐步增大发送方的cwnd，可使分组注入网络的速率更加合理。
慢开始的慢指TCP开始发送报文段时将cwnd = 1，使得发送方在开始时只发送一个报文段，然后再逐渐增大 cwnd。
慢开始算法每经过一个传输轮次（往返时延RTT），cwnd就会加倍，即cwnd的值随传输轮次线性增长。这样慢开始一直把cwnd增大到一个规定的慢开始门限ssthresh（阈值），然后改用拥塞避免算法。</p>
<h5 id="拥塞避免算法">拥塞避免算法</h5>
<p>拥塞避免算法的思路是让拥塞窗口cwnd缓慢增大，具体做法时，目的经过一个往返时延RTT就把发送方的拥塞窗口cwnd加1，使拥塞窗口cwnd按线性规律缓慢增长，这比慢开始算法的拥塞窗口增长速率要缓慢的多。
注意慢开始算法是每收到一个确认报文后将cwnd加1，而拥塞避免是每经过一个往返时延RTT时拥塞窗口加1，注意两者的区别。</p>
<h6 id="慢开始和拥塞避免的选择">慢开始和拥塞避免的选择</h6>
<ul>
<li>当cwnd &lt; ssthresh时，使用慢开始算法</li>
<li>当cwnd = ssthresh时，即可使用慢开始算法，也可使用拥塞避免算法</li>
<li>当cwnd &gt; ssthresh时，使用拥塞避免算法</li>
</ul>
<h5 id="网络拥塞的处理">网络拥塞的处理</h5>
<p>无论是慢开始还是拥塞避免，只要发送方判断网络出现拥塞（未收到确认），就把慢开始门限ssthresh设置为出现拥塞时发送方cwnd值的一半（不能小于2）。然后将拥塞窗口cwnd重新设置为1，执行慢开始算法。目的是迅速减少主机发送到网络中的分组数，使得发生拥塞的路由器有足够时间把队列中积压的分组处理完毕。
慢开始算法和拥塞避免都使用了“乘法减小”和“加法增大”方法：</p>
<ul>
<li>乘法减小：在拥塞避免阶段，只要出现超时，就把慢开始门限值ssthresh设置为当前拥塞窗口的一半</li>
<li>加法增大：执行拥塞避免算法后，在收到对所有报文段的确认后，就把拥塞窗口cwnd加1，使拥塞窗口缓慢增大，防止网络过早出现拥塞</li>
</ul>
<h6 id="拥塞处理示例">拥塞处理示例</h6>
<ul>
<li>初始时，拥塞窗口设置为1（cwnd = 1），慢开始门限设置为16（ssthresh = 16，根据题目条件）</li>
<li>慢开始阶段，cwnd初始为1，发送方每收到一个确认ACK，cwnd加1，即经过每个传输轮次RTT，cwnd呈指数规律增长。</li>
<li>当拥塞窗口cwnd增长到慢开始门限ssthresh时（即cwnd = 16），改用拥塞避免算法，cwnd按线性规律增长</li>
<li>假如当cwnd = 24时出现超时，更新ssthresh = 12（超时时cwnd的一半），cwnd重置为1，并执行慢开始算法，当cwnd = 12时，改为执行拥塞避免算法。</li>
</ul>
<h4 id="快重传和快恢复">快重传和快恢复</h4>
<h5 id="快重传">快重传</h5>
<p>在TCP可靠传输机制中，快重传技术使用冗余ACK检测丢包的情况，冗余ACK同时也可以用于网络拥塞情况的检测（丢包意味着网络出现拥塞）。
当发送方连续收到3个重复的ACK报文时，重传对方尚未收到的报文段，不必等待报文段设置的重传计时器超时</p>
<h5 id="快恢复">快恢复</h5>
<p>快恢复的原理是：当发送方连续收到三个冗余ACK时，执行“乘法减小”算法，把慢开始门限ssthresh设置为此时发送方cwnd的一半，预防网络出现拥塞，但发送方认为网络并未发生严重拥塞（仍可以连续接收多个报文段）。因此快恢复将门限ssthresh设置为cwnd的一半后，将cwnd的值设置为慢开始门限ssthresh的值，然后开始执行拥塞避免算法，使拥塞窗口缓慢的线性增长。</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/network/">Network</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/post/network/%E5%BA%94%E7%94%A8%E5%B1%82/">
        
        

        <div class="article-details">
            <h2 class="article-title">应用层</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/network/%E7%BD%91%E7%BB%9C%E5%B1%82/">
        
        

        <div class="article-details">
            <h2 class="article-title">网络层</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/network/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/">
        
        

        <div class="article-details">
            <h2 class="article-title">数据链路层</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/network/%E7%89%A9%E7%90%86%E5%B1%82/">
        
        

        <div class="article-details">
            <h2 class="article-title">物理层</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/">
        
        

        <div class="article-details">
            <h2 class="article-title">计算机网络体系结构</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2023 北溪入江流
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
